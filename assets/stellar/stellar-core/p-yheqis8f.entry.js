import{d as e,f as t,g as i}from"./p-1da3eb99.js";import{a as s}from"./p-af15ecc2.js";class r{constructor(t){e(this,t),this.nolazyload=!1,this.width=1280,this.height=720,this.ready=!1}componentDidLoad(){this.image=this.element.querySelector(".image"),this.nolazyload?this.prepare():this.addIntersectionObserver()}addIntersectionObserver(){"IntersectionObserver"in window&&(this.io=new IntersectionObserver(e=>{e[0].isIntersecting?this.handleInScreen():this.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))}handleInScreen(){this.prepare()}handleOffScreen(){this.destroy()}prepare(){this.viewer=new s({source:this.src,container:this.image,width:this.width,height:this.height}),this.viewer.render(),this.ready=!0}destroy(){this.viewer.destroy(),this.ready=!1}render(){return t("div",null,t("div",{class:"image"}),t("div",{class:"overlay"}),!this.ready&&t("skeleton-img",{width:this.width,height:this.height}))}get element(){return i(this)}static get style(){return"stellar-360-image{display:block;position:relative}stellar-360-image canvas{display:block;width:100%!important;height:auto!important}stellar-360-image .overlay{opacity:.3;z-index:3;pointer-events:none;background:var(--gradient,none);mix-blend-mode:var(--blend,multiply);position:absolute;top:0;left:0;width:100%;height:100%}"}}export{r as stellar_360_image};