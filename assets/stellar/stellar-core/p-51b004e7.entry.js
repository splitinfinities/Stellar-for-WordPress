import{r as t,h as n,H as o}from"./p-378b4685.js";import{c as i}from"./p-c428ff15.js";var e=function(t,n,o){return t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array?Array.prototype.forEach.call(t,n,o):n.call(o,t)},a=function(t){var n=t.text||t.textContent||t.innerHTML||"",o=t.src||"",i=t.parentNode||document.querySelector("head")||document.documentElement,e=document.createElement("script");if(n.match("document.write"))return console&&console.log&&console.log("Script contains document.write. Can’t be executed correctly. Code skipped ",t),!1;if(e.type="text/javascript",e.id=t.id,""!==o&&(e.src=o,e.async=!1),""!==n)try{e.appendChild(document.createTextNode(n))}catch(a){e.text=n}return i.appendChild(e),(i instanceof HTMLHeadElement||i instanceof HTMLBodyElement)&&i.contains(e)&&i.removeChild(e),!0},s=function(t,n,o,i){(n="string"==typeof n?n.split(" "):n).forEach((function(n){e(t,(function(t){t.addEventListener(n,o,i)}))}))},c={outerHTML:function(t,n){t.outerHTML=n.outerHTML,this.onSwitch()},innerHTML:function(t,n){t.innerHTML=n.innerHTML,""===n.className?t.removeAttribute("class"):t.className=n.className,this.onSwitch()},switchElementsAlt:function(t,n){if(t.innerHTML=n.innerHTML,n.hasAttributes())for(var o=n.attributes,i=0;i<o.length;i++)t.attributes.setNamedItem(o[i].cloneNode());this.onSwitch()},replaceNode:function(t,n){t.parentNode.replaceChild(n,t),this.onSwitch()},sideBySide:function(t,n,o,i){var e=Array.prototype.forEach,a=[],c=[],r=document.createDocumentFragment(),u="animationend webkitAnimationEnd MSAnimationEnd oanimationend",d=0,f=function(t){t.target===t.currentTarget&&--d<=0&&a&&(a.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)})),c.forEach((function(t){t.className=t.className.replace(t.getAttribute("data-pjax-classes"),""),t.removeAttribute("data-pjax-classes")})),c=null,a=null,this.onSwitch())}.bind(this);i=i||{},e.call(t.childNodes,(function(t){a.push(t),t.classList&&!t.classList.contains("js-Pjax-remove")&&(t.hasAttribute("data-pjax-classes")&&(t.className=t.className.replace(t.getAttribute("data-pjax-classes"),""),t.removeAttribute("data-pjax-classes")),t.classList.add("js-Pjax-remove"),i.callbacks&&i.callbacks.removeElement&&i.callbacks.removeElement(t),i.classNames&&(t.className+=" "+i.classNames.remove+" "+(o.backward?i.classNames.backward:i.classNames.forward)),d++,s(t,u,f,!0))})),e.call(n.childNodes,(function(t){if(t.classList){var n="";i.classNames&&(n=" js-Pjax-add "+i.classNames.add+" "+(o.backward?i.classNames.forward:i.classNames.backward)),i.callbacks&&i.callbacks.addElement&&i.callbacks.addElement(t),t.className+=n,t.setAttribute("data-pjax-classes",n),c.push(t),r.appendChild(t),d++,s(t,u,f,!0)}})),t.className=n.className,t.appendChild(r)}};function r(){window._gaq&&_gaq.push(["_trackPageview"]),window.ga&&ga("send","pageview",{page:location.pathname,title:document.title})}var u,d=(u=0,function(){var t="pjax"+(new Date).getTime()+"_"+u;return u++,t}),f=function(t,n,o){(n="string"==typeof n?n.split(" "):n).forEach((function(n){var i;(i=document.createEvent("HTMLEvents")).initEvent(n,!0,!0),i.eventName=n,o&&Object.keys(o).forEach((function(t){i[t]=o[t]})),e(t,(function(t){var n=!1;t.parentNode||t===document||t===window||(n=!0,document.body.appendChild(t)),t.dispatchEvent(i),n&&t.parentNode.removeChild(t)}))}))},l=function(t){if(null===t||"object"!=typeof t)return t;var n=t.constructor();for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n},h=function(){},w=function(){this.options.debug&&console&&("function"==typeof console.log?console.log.apply(console,arguments):console.log&&console.log(arguments))},m=function(t){switch(t.tagName.toLowerCase()){case"a":t.hasAttribute("data-pjax-state")||this.attachLink(t);break;case"form":t.hasAttribute("data-pjax-state")||this.attachForm(t);break;default:throw"Pjax can only be applied on <a> or <form> submit"}},p=function(t,n){if(!v(n)){var o=l(this.options),i=function(t,n){return n.which>1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey?"modifier":t.protocol!==window.location.protocol||t.host!==window.location.host?"external":t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,"")?"anchor":t.href===window.location.href.split("#")[0]+"#"?"anchor-empty":void 0}(t,n);if(i)t.setAttribute("data-pjax-state",i);else{if(n.preventDefault(),this.options.currentUrlFullReload&&t.href===window.location.href.split("#")[0])return t.setAttribute("data-pjax-state","reload"),void this.reload();t.setAttribute("data-pjax-state","load"),o.triggerElement=t,this.loadUrl(t.href,o)}}},v=function(t){return t.defaultPrevented||!1===t.returnValue},j=function(t){var n=this;t.setAttribute("data-pjax-state",""),s(t,"click",(function(o){p.call(n,t,o)})),s(t,"keyup",function(o){13===o.keyCode&&p.call(n,t,o)}.bind(this))},x=function(t,n){if(!y(n)){var o=l(this.options);o.requestOptions={requestUrl:t.getAttribute("action")||window.location.href,requestMethod:t.getAttribute("method")||"GET"};var i=document.createElement("a");i.setAttribute("href",o.requestOptions.requestUrl);var e=function(t,n){return t.protocol!==window.location.protocol||t.host!==window.location.host?"external":t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,"")?"anchor":t.href===window.location.href.split("#")[0]+"#"?"anchor-empty":n.currentUrlFullReload&&t.href===window.location.href.split("#")[0]?"reload":void 0}(i,o);e?t.setAttribute("data-pjax-state",e):(n.preventDefault(),"multipart/form-data"===t.enctype?o.requestOptions.formData=new FormData(t):o.requestOptions.requestParams=function(t){for(var n=[],o=t.elements,i=0;i<o.length;i++){var e=o[i],a=e.tagName.toLowerCase();if(e.name&&void 0!==e.attributes&&"button"!==a){var s=e.attributes.type;if(!s||"checkbox"!==s.value&&"radio"!==s.value||e.checked){var c=[];if("select"===a)for(var r,u=0;u<e.options.length;u++)(r=e.options[u]).selected&&!r.disabled&&c.push(r.hasAttribute("value")?r.value:r.text);else c.push(e.value);for(var d=0;d<c.length;d++)n.push({name:encodeURIComponent(e.name),value:encodeURIComponent(c[d])})}}}return n}(t),t.setAttribute("data-pjax-state","submit"),o.triggerElement=t,this.loadUrl(i.href,o))}},y=function(t){return t.defaultPrevented||!1===t.returnValue},P=function(t){var n=this;t.setAttribute("data-pjax-state",""),s(t,"submit",(function(o){x.call(n,t,o)}))},b=function(t,n,o,i){i=i||document,t.forEach((function(t){e(i.querySelectorAll(t),n,o)}))},g=function(t,n,o,i,a,s){var r=[];o.forEach((function(o){var u=i.querySelectorAll(o),d=a.querySelectorAll(o);if(this.log&&this.log("Pjax switch",o,u,d),u.length!==d.length)throw"DOM doesn’t look the same on new loaded page: ’"+o+"’ - new "+u.length+", old "+d.length;e(u,(function(i,e){var a=d[e];this.log&&this.log("newEl",i,"oldEl",a);var u=t[o]?t[o].bind(this,a,i,s,n[o]):c.outerHTML.bind(this,a,i,s);r.push(u)}),this)}),this),this.state.numPendingSwitches=r.length,r.forEach((function(t){t()}))},R=function(t){t&&t.readyState<4&&(t.onreadystatechange=h,t.abort())},T=function(t,n,o){var i,e,a,s,c,r=(n=n||{}).requestOptions||{},u=(r.requestMethod||"GET").toUpperCase(),d=r.requestParams||null,f=r.formData||null,l=null,h=new XMLHttpRequest,w=n.timeout||0;if(h.onreadystatechange=function(){4===h.readyState&&(200===h.status?o(h.responseText,h,t,n):0!==h.status&&o(null,h,t,n))},h.onerror=function(i){console.log(i),o(null,h,t,n)},h.ontimeout=function(){o(null,h,t,n)},d&&d.length)switch(i=d.map((function(t){return t.name+"="+t.value})).join("&"),u){case"GET":t=t.split("?")[0],t+="?"+i;break;case"POST":l=i}else f&&(l=f);return n.cacheBust&&(e=t,"t",a=Date.now(),s=new RegExp("([?&])t=.*?(&|$)","i"),c=-1!==e.indexOf("?")?"&":"?",t=e.match(s)?e.replace(s,"$1t="+a+"$2"):e+c+"t="+a),h.open(u,t,!0),h.timeout=w,h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.setRequestHeader("X-PJAX","true"),h.setRequestHeader("X-PJAX-Selectors",JSON.stringify(n.selectors)),l&&"POST"===u&&!f&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(l),h},X=function(t,n,o,i){if((i=l(i||this.options)).request=n,!1!==t){var e=window.history.state||{};window.history.replaceState({url:e.url||window.location.href,title:e.title||document.title,uid:e.uid||d(),scrollPos:[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]},document.title,window.location.href);var a=o;n.responseURL?o!==n.responseURL&&(o=n.responseURL):n.getResponseHeader("X-PJAX-URL")?o=n.getResponseHeader("X-PJAX-URL"):n.getResponseHeader("X-XHR-Redirected-To")&&(o=n.getResponseHeader("X-XHR-Redirected-To"));var s=document.createElement("a");s.href=a;var c=s.hash;s.href=o,c&&!s.hash&&(s.hash=c,o=s.href),this.state.href=o,this.state.options=i;try{this.loadContent(t,i)}catch(r){if(f(document,"pjax:error",i),this.options.debug)throw r;return console&&console.error&&console.error("Pjax switch fail: ",r),this.latestChance(o)}}else f(document,"pjax:complete pjax:error",i)},E=function(){return window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/)},S=i((function(t){var n=function(t){this.state={numPendingSwitches:0,href:null,options:null},this.options=function(t){return(t=t||{}).elements=t.elements||"a[href], form[action]",t.selectors=t.selectors||["title",".js-Pjax"],t.switches=t.switches||{},t.switchesOptions=t.switchesOptions||{},t.history=void 0===t.history||t.history,t.analytics="function"==typeof t.analytics||!1===t.analytics?t.analytics:r,t.scrollTo=void 0===t.scrollTo?0:t.scrollTo,t.scrollRestoration=void 0===t.scrollRestoration||t.scrollRestoration,t.cacheBust=void 0===t.cacheBust||t.cacheBust,t.debug=t.debug||!1,t.timeout=t.timeout||0,t.currentUrlFullReload=void 0!==t.currentUrlFullReload&&t.currentUrlFullReload,t.switches.head||(t.switches.head=c.switchElementsAlt),t.switches.body||(t.switches.body=c.switchElementsAlt),t}(t),this.log("Pjax options",this.options),this.options.scrollRestoration&&"scrollRestoration"in history&&(history.scrollRestoration="manual"),this.maxUid=this.lastUid=d(),this.parseDOM(document),s(window,"popstate",function(t){if(t.state){var n=l(this.options);n.url=t.state.url,n.title=t.state.title,n.history=!1,n.scrollPos=t.state.scrollPos,t.state.uid<this.lastUid?n.backward=!0:n.forward=!0,this.lastUid=t.state.uid,this.loadUrl(t.state.url,n)}}.bind(this))};if(n.switches=c,n.prototype={log:w,getElements:function(t){return t.querySelectorAll(this.options.elements)},parseDOM:function(t){var n=m;e(this.getElements(t),n,this)},refresh:function(t){this.parseDOM(t||document)},reload:function(){window.location.reload()},attachLink:j,attachForm:P,forEachSelectors:function(t,n,o){return b.bind(this)(this.options.selectors,t,n,o)},switchSelectors:function(t,n,o,i){return g.bind(this)(this.options.switches,this.options.switchesOptions,t,n,o,i)},latestChance:function(t){window.location=t},onSwitch:function(){f(window,"resize scroll"),this.state.numPendingSwitches--,0===this.state.numPendingSwitches&&this.afterAllSwitches()},loadContent:function(t,n){if("string"==typeof t){var o=document.implementation.createHTMLDocument("pjax"),i=t.match(/<html[^>]+>/gi);if(i&&i.length&&(i=i[0].match(/\s?[a-z:]+(?:=['"][^'">]+['"])*/gi)).length&&(i.shift(),i.forEach((function(t){var n=t.trim().split("=");o.documentElement.setAttribute(n[0],1===n.length||n[1].slice(1,-1))}))),o.documentElement.innerHTML=t,this.log("load content",o.documentElement.attributes,o.documentElement.innerHTML.length),document.activeElement&&function(t,n,o){for(var i=0;i<n.length;i++)for(var e=t.querySelectorAll(n[i]),a=0;a<e.length;a++)if(e[a].contains(o))return!0;return!1}(document,this.options.selectors,document.activeElement))try{document.activeElement.blur()}catch(e){}this.switchSelectors(this.options.selectors,o,document,n)}else f(document,"pjax:complete pjax:error",n)},abortRequest:R,doRequest:T,handleResponse:X,loadUrl:function(t,n){n="object"==typeof n?function(t){if(null==t)return null;for(var n=Object(t),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}return n}({},this.options,n):l(this.options),this.log("load href",t,n),this.abortRequest(this.request),f(document,"pjax:send",n),this.request=this.doRequest(t,n,this.handleResponse.bind(this))},afterAllSwitches:function(){var t=Array.prototype.slice.call(document.querySelectorAll("[autofocus]")).pop();t&&document.activeElement!==t&&t.focus(),this.options.selectors.forEach((function(t){e(document.querySelectorAll(t),(function(t){!function(t){"script"===t.tagName.toLowerCase()&&a(t),e(t.querySelectorAll("script"),(function(t){t.type&&"text/javascript"!==t.type.toLowerCase()||(t.parentNode&&t.parentNode.removeChild(t),a(t))}))}(t)}))}));var n=this.state;if(n.options.history&&(window.history.state||(this.lastUid=this.maxUid=d(),window.history.replaceState({url:window.location.href,title:document.title,uid:this.maxUid,scrollPos:[0,0]},document.title)),this.lastUid=this.maxUid=d(),window.history.pushState({url:n.href,title:n.options.title,uid:this.maxUid,scrollPos:[0,0]},n.options.title,n.href)),this.forEachSelectors((function(t){this.parseDOM(t)}),this),f(document,"pjax:complete pjax:success",n.options),"function"==typeof n.options.analytics&&n.options.analytics(),n.options.history){var o=document.createElement("a");if(o.href=this.state.href,o.hash){var i=o.hash.slice(1);i=decodeURIComponent(i);var s=0,c=document.getElementById(i)||document.getElementsByName(i)[0];if(c&&c.offsetParent)do{s+=c.offsetTop,c=c.offsetParent}while(c);window.scrollTo(0,s)}else!1!==n.options.scrollTo&&(n.options.scrollTo.length>1?window.scrollTo(n.options.scrollTo[0],n.options.scrollTo[1]):window.scrollTo(0,n.options.scrollTo))}else n.options.scrollRestoration&&n.options.scrollPos&&window.scrollTo(n.options.scrollPos[0],n.options.scrollPos[1]);this.state={numPendingSwitches:0,href:null,options:null}}},n.isSupported=E,n.isSupported())t.exports=n;else{var o=h;for(var i in n.prototype)n.prototype.hasOwnProperty(i)&&"function"==typeof n.prototype[i]&&(o[i]=h);t.exports=o}}));const A=class{constructor(n){t(this,n),this.pjax=new S({cacheBust:!1,scrollTo:!1,selectors:["title","meta[name=description]","main"]})}render(){return n(o,null,n("slot",null))}};export{A as stellar_pjax};