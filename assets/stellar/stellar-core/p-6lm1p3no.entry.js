import{c as e,d as t,e as r,f as n,g as i,h as a}from"./p-9ed7c17e.js";import{a as s,b as o,c as l,d as u}from"./p-c16f1b5d.js";import{a as c}from"./p-80aceae1.js";import{a as h}from"./p-a69c1443.js";import{a as d,b as p,c as f,d as m,e as g,f as y,g as v}from"./p-a45d5d95.js";import"./p-091920a9.js";import{a as _}from"./p-9ca97b6b.js";import{a as b}from"./p-5d719a7a.js";import{a as S}from"./p-a0d31045.js";import"./p-2c7f64d5.js";import{a as w}from"./p-de300708.js";import{a as E}from"./p-75188364.js";import{a as T}from"./p-ec9aeb5d.js";import{a as C}from"./p-70cb0a68.js";class A{constructor(t){e(this,t),this.align="left",this.full=!1}render(){return t("slot",null)}static get style(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block}:host([align=left]){text-align:left!important}:host([align=left]) ::slotted(*){margin-right:auto!important}:host([align=center]){text-align:center!important}:host([align=center]) ::slotted(*){margin-right:auto!important;margin-left:auto!important}:host([align=right]){text-align:right!important}:host([align=right]) ::slotted(*){margin-left:auto!important}:host ::slotted(stellar-button){display:inline-block}:host ::slotted(img),:host ::slotted(stellar-code-block){margin-bottom:2rem}:host ::slotted(:last-child){margin-bottom:0}:host([full]) ::slotted(*){max-width:100%}:host ::slotted(ol),:host ::slotted(ul){margin:.25em 0;display:inline-block;text-align:left}:host ::slotted(li){margin-top:.5em}"}}let M;function I(e,t,r,n){return t="ios"===(t=(t||"md").toLowerCase())?"ios":"md",r&&"ios"===t?e=r.toLowerCase():n&&"md"===t?e=n.toLowerCase():e&&(e=e.toLowerCase(),/^md-|^ios-|^logo-/.test(e)||(e=`${t}-${e}`)),"string"!=typeof e||""===e.trim()?null:""!==e.replace(/[a-z]|-|\d/gi,"")?null:e}function R(e){return"string"==typeof e&&k(e=e.trim())?e:null}function k(e){return e.length>0&&/(\/|\.)/.test(e)}class D{constructor(t){e(this,t),this.isVisible=!1,this.lazy=!1,this.isServer=r(this,"isServer"),this.resourcesUrl=r(this,"resourcesUrl"),this.doc=r(this,"document"),this.win=r(this,"window")}componentWillLoad(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidUnload(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,r){if(this.lazy&&this.win&&this.win.IntersectionObserver){const n=this.io=new this.win.IntersectionObserver(e=>{e[0].isIntersecting&&(n.disconnect(),this.io=void 0,r())},{rootMargin:t});n.observe(e)}else r()}loadIcon(){if(!this.isServer&&this.isVisible){const e=this.getUrl();e?function(e,t){let r=O.get(t);return r||(r=fetch(t,{cache:"force-cache"}).then(e=>e.status<=299?e.text():Promise.resolve(null)).then(t=>(function(e,t){if(t){const r=e.createDocumentFragment(),n=e.createElement("div");n.innerHTML=t,r.appendChild(n);for(let e=n.childNodes.length-1;e>=0;e--)"svg"!==n.childNodes[e].nodeName.toLowerCase()&&n.removeChild(n.childNodes[e]);const i=n.firstElementChild;if(i&&"svg"===i.nodeName.toLowerCase()&&(i.setAttribute("class","s-ion-icon"),function e(t){if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(let e=0;e<t.attributes.length;e++){const r=t.attributes[e].value;if("string"==typeof r&&0===r.toLowerCase().indexOf("on"))return!1}for(let r=0;r<t.childNodes.length;r++)if(!e(t.childNodes[r]))return!1}return!0}(i)))return n.innerHTML}return""})(e,t)),O.set(t,r)),r}(this.doc,e).then(e=>this.svgContent=e):console.error("icon was not resolved")}if(!this.ariaLabel){const e=I(this.getName(),this.mode,this.ios,this.md);e&&(this.ariaLabel=e.replace("ios-","").replace("md-","").replace(/\-/g," "))}}getName(){return void 0!==this.name?this.name:this.icon&&!k(this.icon)?this.icon:void 0}getUrl(){let e=R(this.src);return e||((e=I(this.getName(),this.mode,this.ios,this.md))?this.getNamedUrl(e):(e=R(this.icon))||null)}getNamedUrl(e){return function(){if(!M){const e=window;e.Ionicons=e.Ionicons||{},M=e.Ionicons.map=e.Ionicons.map||new Map}return M}().get(e)||`${this.resourcesUrl}svg/${e}.svg`}hostData(){const e=this.flipRtl||this.ariaLabel&&this.ariaLabel.indexOf("arrow")>-1&&!1!==this.flipRtl;return{role:"img",class:Object.assign({},(t=this.color,t?{"ion-color":!0,[`ion-color-${t}`]:!0}:null),{[`icon-${this.size}`]:!!this.size,"flip-rtl":e&&"rtl"===this.doc.dir})};var t}__stencil_render(){return t("div",!this.isServer&&this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"})}static get style(){return"/**style-placeholder:ion-icon:**/"}get el(){return n(this)}static get watchers(){return{icon:["loadIcon"],name:["loadIcon"],src:["loadIcon"]}}render(){return t(i,this.hostData(),this.__stencil_render())}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;-webkit-box-sizing:content-box!important;box-sizing:content-box!important}.icon-inner,svg{display:block;fill:currentColor;stroke:currentColor;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px!important}:host(.icon-large){font-size:32px!important}:host(.ion-color){color:var(--ion-color-base)!important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary,#3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary,#0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary,#f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success,#10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning,#ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger,#f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light,#f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium,#989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark,#222428)}"}}const O=new Map;class P{constructor(t){e(this,t),this.width=600,this.height=300,this.block=!1,this.loading=!1,this.icon=!1}componentWillLoad(){this.block||c.set({"--width":`${this.width}px`,"--height":`${this.height}px`},this.element),this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.intersectionRatio>0?this.element.classList.add("visible"):this.element.classList.remove("visible")})}),this.observer.observe(this.element)}render(){return[this.loading&&this.icon&&t("stellar-asset",{name:"spinning-bubbles",color:"gray25"}),t("svg",{width:this.width,height:this.height},t("rect",{width:this.width,height:this.height}))]}get element(){return n(this)}static get style(){return"skeleton-img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;display:block;position:relative;margin-bottom:1rem;border-radius:4px;overflow:hidden;max-width:var(--width);max-height:var(--height)}skeleton-img svg{display:block;width:100%;height:auto;overflow:hidden}skeleton-img svg rect{fill:var(--theme-base5)}skeleton-img[loading]{position:relative}skeleton-img[loading]:before{content:\"\";display:block;position:absolute;top:0;right:0;bottom:0;left:-100%;background-color:var(--theme-base5);background-image:linear-gradient(45deg,var(--theme-base5),var(--theme-base5) 20%,var(--theme-base3) 40%,var(--theme-base4) 61%,var(--theme-base5) 80%,var(--theme-base5));width:300%;height:100%;-webkit-transform:translateX(calc(var(--width) * -1.75));transform:translateX(calc(var(--width) * -1.75))}skeleton-img[loading].visible:before{-webkit-animation:shimmer 1.25s linear 0s infinite forwards;animation:shimmer 1.25s linear 0s infinite forwards}skeleton-img stellar-asset{position:absolute;top:50%;right:50%;bottom:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:var(--icon-width);height:var(--icon-height)}\@-webkit-keyframes shimmer{0%{opacity:0;-webkit-transform:translateX(calc(var(--width) * -1.75));transform:translateX(calc(var(--width) * -1.75))}10%{opacity:1}90%{opacity:1}to{opacity:0;-webkit-transform:translateX(calc(var(--width) * 1.75));transform:translateX(calc(var(--width) * 1.75))}}\@keyframes shimmer{0%{opacity:0;-webkit-transform:translateX(calc(var(--width) * -1.75));transform:translateX(calc(var(--width) * -1.75))}10%{opacity:1}90%{opacity:1}to{opacity:0;-webkit-transform:translateX(calc(var(--width) * 1.75));transform:translateX(calc(var(--width) * 1.75))}}"}}class L{constructor(t){e(this,t),this.width=1280,this.height=720,this.ready=!1}componentDidLoad(){this.image=this.element.querySelector(".image"),this.addIntersectionObserver()}addIntersectionObserver(){"IntersectionObserver"in window&&(this.io=new IntersectionObserver(e=>{e[0].isIntersecting?this.handleInScreen():this.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))}handleInScreen(){this.prepare()}handleOffScreen(){this.destroy()}prepare(){this.viewer=new h({source:this.src,container:this.image,width:this.width,height:this.height}),this.viewer.render(),this.ready=!0}destroy(){this.viewer.destroy(),this.ready=!1}render(){return t("div",null,t("div",{class:"image"}),t("div",{class:"overlay"}),!this.ready&&t("skeleton-img",{width:this.width,height:this.height}))}get element(){return n(this)}static get style(){return"stellar-360-image{display:block;position:relative}stellar-360-image canvas{display:block;width:100%!important;height:auto!important}stellar-360-image .overlay{opacity:.3;z-index:3;pointer-events:none;background:var(--gradient,none);mix-blend-mode:var(--blend,multiply);position:absolute;top:0;left:0;width:100%;height:100%}"}}class x{constructor(t){e(this,t),this.name="person",this.language="ios-",this.block=!1}componentWillLoad(){this.ariaLabel=this.name.replace("ios-","").replace("md-","").replace(/\-/g," ")}render(){return t("div",{class:"icon-wrap"},t("ion-icon",{src:!this.name&&this.src?this.src:void 0,name:!this.src&&this.name?this.language+this.name:void 0,ariaLabel:this.ariaLabel,"aria-label":this.ariaLabel}))}static get style(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;-webkit-transform-origin:.5em .5em;transform-origin:.5em .5em}:host .icon-wrap{display:-ms-flexbox;display:flex}:host([block]),:host([block]) ion-icon,:host([block]) ion-icon .icon-inner,:host([block]) ion-icon .icon-inner svg{width:100%;height:auto}"}}class N{constructor(t){e(this,t),this.tag="link",this.label="Submit",this.name="",this.value="",this.href="#",this.target="_self",this.size="medium",this.padding="medium",this.icon=!1,this.active=!1,this.disabled=!1,this.danger=!1,this.pill=!1,this.block=!1,this.outline=!1,this.invert=!1,this.processable=!1,this.processing=!1,this.ghost=!1}async click(){if(this.processable&&(this.processing=!0),this.for){const e=this.for.split(":");"modal"===e[0]&&document.querySelector(`stellar-modal[name="${e[1]}"]`).open()}return"submit"===this.tag&&this.element.closest("stellar-form").submit_form(),"link"===this.tag&&(window.location.href=this.href),!0}renderSVG(){return t("stellar-asset",{src:"Loading",color:"white"})}renderButton(){return t("button",{type:"button",class:"button",title:this.label,disabled:this.disabled,onClick:()=>{this.click()}},t("div",{class:"content"},t("slot",null,"Submit")),this.processing&&t("div",{class:"processing"},this.renderSVG()))}renderSubmit(){return t("button",{type:"submit",class:"button",title:this.label,disabled:this.disabled,name:this.name,value:this.value,onClick:()=>{this.click()}},t("div",{class:"content"},t("slot",null,"Submit")),this.processing&&t("div",{class:"processing"},this.renderSVG()))}renderLink(){return t("a",{href:this.href,target:this.target,class:"button","data-disabled":this.disabled,title:this.label,onClick:()=>{this.click()}},t("div",{class:"content"},t("slot",null,"Submit")),this.processing&&t("div",{class:"processing"},this.renderSVG()))}renderAppLink(){return t("stencil-route-link",{url:this.href,anchorClass:"button","data-disabled":this.disabled,title:this.label,onClick:()=>{this.click()}},t("div",{class:"content"},t("slot",null,"Submit")),this.processing&&t("div",{class:"processing"},this.renderSVG()))}renderSpan(){return t("span",{class:"button",title:this.label,"data-disabled":this.disabled,"aria-label":`Button ${this.label} ${this.element.textContent}`,tabIndex:0,onClick:()=>{this.click()}},t("div",{class:"content"},t("slot",null,"Submit")),this.processing&&t("div",{class:"processing"},this.renderSVG()))}render(){return["button"===this.tag&&this.renderButton(),"submit"===this.tag&&this.renderSubmit(),"link"===this.tag&&this.renderLink(),"route-link"===this.tag&&this.renderAppLink(),"span"===this.tag&&this.renderSpan()]}get element(){return n(this)}static get style(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{-moz-appearance:none!important;appearance:none!important;-webkit-appearance:none!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:var(--wrap-display,inline-block);font-family:inherit;text-align:center;vertical-align:middle;-ms-flex-item-align:center;align-self:center;--width:auto;--padding:1.0625em 2em 1.1em 2em;--background:var(--theme-base5);--color:var(--white);--active-background:var(--theme-base7);--active-color:var(--white);--active-border:none;--border:none;--border-radius:0;--font-size:1.3rem;--text-decoration:none}:host([outline]){--background:transparent;--border:2px solid currentColor;--active-background:var(--theme-base0);--active-border:2px solid currentColor}:host([ghost]),:host([outline]){--color:var(--theme-base5);--active-color:var(--theme-base7)}:host([ghost]){--padding:0.05em 0 0.125em;--background:none;--border:none;--active-background:none;--active-border:none}:host([outline][invert]){--background:transparent;--border:2px solid currentColor;--active-background:var(--theme-base0);--active-border:2px solid currentColor}:host([ghost][invert]){--background:none;--active-background:none}:host([ghost][invert]),:host([invert]){--color:var(--theme-base2);--border:none;--active-color:var(--theme-base5);--active-border:none}:host([invert]){--background:var(--white);--active-background:var(--theme-base0)}:host([pill]){--border-radius:1000px}:host([size=tiny]){--font-size:.75rem}:host([size=small]){--font-size:1rem}:host([size=large]){--font-size:2rem}:host([padding=tiny]){--padding:.55em 1.125em .61875em}:host([padding=small]){--padding:.7875em 1.5em .825em}:host([padding=large]){--padding:1.3125em 2.5em 1.375em}:host(:active){-webkit-transform:scale(.925);transform:scale(.925)}:host .button{cursor:pointer;display:-ms-inline-flexbox;display:inline-flex;position:relative;-ms-flex-align:center;align-items:center;outline:0;border:var(--border);background:var(--background);padding:var(--padding);width:var(--width);height:auto;vertical-align:bottom;-webkit-text-decoration:var(--text-decoration);text-decoration:var(--text-decoration);line-height:1;letter-spacing:var(--letter-spacing,.0275em);white-space:nowrap;color:var(--color);font-family:var(--font-system);font-size:var(--font-size);font-weight:500;border-radius:var(--border-radius,0)}:host a.button,:host span.button{width:auto}:host .button:focus,:host .button:hover{border:var(--active-border);background-color:var(--active-background);color:var(--active-color)}:host .button .content{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}:host([block]),:host([block]) .button{display:block;width:100%}:host ::slotted(img),:host ::slotted(stellar-asset){display:inline-block;float:none;width:1em;height:1em}:host ::slotted(img[align=left]),:host ::slotted(stellar-asset[align=left]){-ms-flex-order:-1;order:-1;margin-right:.75em}:host ::slotted(img[align=right]),:host ::slotted(stellar-asset[align=right]){-ms-flex-order:2;order:2;margin-left:.75em}:host-context(.dark-mode){--background:var(--theme-base7);--color:var(--white);--active-background:var(--theme-base9);--active-color:var(--white);--active-border:none}:host-context(.dark-mode):host([outline]){--background:transparent;--color:var(--white);--border:2px solid var(--theme-base5);--active-background:var(--theme-base9);--active-color:var(--theme-base0);--active-border:2px solid var(--theme-base9)}:host-context(.dark-mode):host([ghost]){--padding:0.05em 0 0.125em;--background:none;--color:var(--theme-base5);--border:none;--active-background:none;--active-color:var(--theme-base7);--active-border:none}"}}class B{constructor(t){e(this,t),this.val="none",this.change=a(this,"change",7)}componentWillLoad(){this.options=Object.keys(d).filter(e=>!["base","white","black"].includes(e)),c.set({"--selected-color":`var(--${this.val}5)`},this.element)}valueChangedHandler(e){this.change.emit(e),c.set({"--selected-color":`var(--${this.val}5)`},this.element)}updateValue(e){this.val=e}render(){return t("div",{class:"wrap"},this.options.map(e=>t("button",{value:e,class:e,style:{background:`var(--${e}5)`},onClick:()=>{this.updateValue(e)}})),t("button",{value:"none",class:"none",style:{background:"var(--white)"},onClick:()=>{this.updateValue("none")}}),t("div",{class:"placeholder"}))}get element(){return n(this)}static get watchers(){return{val:["valueChangedHandler"]}}static get style(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;background:var(--selected-color,var(--red5));border:2px solid var(--selected-color,var(--red5));border-radius:100%}:host,:host .wrap{width:32px;height:32px}:host .wrap{border-radius:100%}:host .placeholder{position:absolute;top:0;left:0;-webkit-transition:opacity .2s var(--ease,ease-out) .1s,width .2s var(--ease,ease-out) .1s,z-index .2s var(--ease,ease-out) .1s;transition:opacity .2s var(--ease,ease-out) .1s,width .2s var(--ease,ease-out) .1s,z-index .2s var(--ease,ease-out) .1s;opacity:1;z-index:0;background:#fff;width:32px;height:32px;border-radius:100%}:host .placeholder[data-selected=true]{opacity:1;z-index:9}:host button{cursor:pointer;display:block;position:absolute;-webkit-transition:all .4s var(--ease,ease-out) .1s;transition:all .4s var(--ease,ease-out) .1s;opacity:0;border:0;width:32px;height:32px;border-radius:100%;-webkit-transform:translate3d(34px,0,0);transform:translate3d(34px,0,0)}:host button.current{position:relative;border:2px solid var(--gray2);background:var(--white);overflow:hidden}:host button.current:after{content:\"\";display:block;position:absolute;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);background:var(--red);width:32px;height:4px}:host([val=none]),:host button.none{background:#fff;border:2px solid var(--black)}:host([val=none]):after,:host button.none:after{content:\"\";display:block;position:absolute;left:calc(50% - 2px);top:calc(0% - .2rem);width:4px;height:calc(100% + .4rem);-webkit-transform:rotate(45deg);transform:rotate(45deg);background:var(--red5)}:host button[data-selected=true]{opacity:1;z-index:9}:host .wrap{position:relative;left:-34px}:host .wrap .placeholder{opacity:0;z-index:-1}:host .wrap:hover{width:96px;height:204px;border-radius:100%}:host .wrap:hover button{opacity:1;z-index:99;height:32px}:host .wrap:hover button:first-of-type{-webkit-transform:translate3d(0,34px,0);transform:translate3d(0,34px,0)}:host .wrap:hover button:nth-of-type(2){-webkit-transform:translate3d(34px,34px,0);transform:translate3d(34px,34px,0)}:host .wrap:hover button:nth-of-type(3){-webkit-transform:translate3d(68px,34px,0);transform:translate3d(68px,34px,0)}:host .wrap:hover button:nth-of-type(4){-webkit-transform:translate3d(0,68px,0);transform:translate3d(0,68px,0)}:host .wrap:hover button:nth-of-type(5){-webkit-transform:translate3d(34px,68px,0);transform:translate3d(34px,68px,0)}:host .wrap:hover button:nth-of-type(6){-webkit-transform:translate3d(68px,68px,0);transform:translate3d(68px,68px,0)}:host .wrap:hover button:nth-of-type(7){-webkit-transform:translate3d(0,102px,0);transform:translate3d(0,102px,0)}:host .wrap:hover button:nth-of-type(8){-webkit-transform:translate3d(34px,102px,0);transform:translate3d(34px,102px,0)}:host .wrap:hover button:nth-of-type(9){-webkit-transform:translate3d(68px,102px,0);transform:translate3d(68px,102px,0)}:host .wrap:hover button:nth-of-type(10){-webkit-transform:translate3d(0,136px,0);transform:translate3d(0,136px,0)}:host .wrap:hover button:nth-of-type(11){-webkit-transform:translate3d(34px,136px,0);transform:translate3d(34px,136px,0)}:host .wrap:hover button:nth-of-type(12){-webkit-transform:translate3d(68px,136px,0);transform:translate3d(68px,136px,0)}:host .wrap:hover button:nth-of-type(13){-webkit-transform:translate3d(0,170px,0);transform:translate3d(0,170px,0)}:host .wrap:hover button:nth-of-type(14){-webkit-transform:translate3d(34px,170px,0);transform:translate3d(34px,170px,0)}:host-context(.dark-mode):host([val=none]),:host-context(.dark-mode):host button.none{background:var(--black)!important;border:2px solid var(--white)!important}"}}const F=(e,t)=>Math.abs(e-t),H=(e,t,r)=>{const n=F(e,t)*r;return e>t?e-n:e+n},G=e=>Array.from(e.querySelectorAll(".line")).map(e=>{const t=parseInt(e.dataset.end,10),r=parseInt(e.dataset.start,10),n=parseFloat(e.dataset.opacityStart),i=parseFloat(e.dataset.opacityEnd),a=parseInt(e.dataset.translatexStart,10),s=parseInt(e.dataset.translatexEnd,10),o=parseInt(e.dataset.translateyStart,10),l=parseInt(e.dataset.translateyEnd,10),u=parseFloat(e.dataset.scaleStart),c=parseFloat(e.dataset.scaleEnd),h={};return isNaN(n)||isNaN(i)||(h.opacity={end:i,start:n}),isNaN(a)||isNaN(s)||(h.translateX={end:s,start:a}),isNaN(o)||isNaN(l)||(h.translateY={end:l,start:o}),isNaN(u)||isNaN(c)||(h.scale={end:c,start:u}),void 0===t||void 0===r||0===Object.keys(h).length?null:{el:e,end:t,offset:0,start:r,updates:h}}).filter(e=>e),z=(e,t,r)=>{const n=(()=>{const e=document.createElement("div"),t=["Webkit","webkit","Moz","moz","ms","o"];if(null!=e.style.transform)return"transform";for(let r in t){const n=`${t[r]}Transform`;if(void 0!==e.style[n])return n}})(),i=r;e.map(({el:e,end:r,offset:a,start:s,updates:o})=>{const l=a+s,u=a+r,c=t.get(e);if(i>=l&&i<=u||"before"!==c&&i<l||"after"!==c&&i>u){let r=0,a=0,s=1;const c=((e,t,r)=>F(e,r)/F(e,t))(l,u,((e,t,r)=>Math.max(Math.min(r,t),e))(l,u,i));if(o.opacity){const{end:t,start:r}=o.opacity,n=H(r,t,c).toFixed(2);e.style.opacity=n}if(o.translateX){const{end:e,start:t}=o.translateX;r=parseInt(H(t,e,c),10)}if(o.translateY){const{end:e,start:t}=o.translateY;a=parseInt(H(t,e,c),10)}if(o.scale){const{end:e,start:t}=o.scale;s=H(t,e,c).toFixed(2)}e.style[n]=`translate3d(${r}px, ${a}px, 0) scale(${s})`,t.set(e,i<l?"before":i>u?"after":"during")}})};class j{constructor(t){e(this,t),this.randomId=Math.floor(6*Math.random())+1,this.color="white",this.playing=!1,this.width=800,this.height=800,this.aspectRatio=100,this.visualization="bars2",this.loaded=!1,this.loading=!1,this.visible=!1,this.duration=0,this.current=0,this.cache=new WeakMap}componentWillLoad(){c.set({"--width":`${this.width}px`,"--height":`${this.height}px`,"--aspectRatio":`${this.aspectRatio}%`},this.element)}async componentDidLoad(){this.interviewLines||(this.interviewLines=G(this.element)),z(this.interviewLines,this.cache,this.time),this.addIntersectionObserver()}addIntersectionObserver(){"IntersectionObserver"in window&&(this.io=new IntersectionObserver(e=>{e[0].isIntersecting?this.handleInScreen():this.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))}handleTimeUpdate(e){this.current=Math.round(1e3*e.detail.time),this.duration=Math.round(1e3*e.detail.duration),z(this.interviewLines,this.cache,this.time)}get time(){return this.current}async handleInScreen(){await p(1e3),this.visible=!0,await p(100),this.audio=this.element.querySelector("web-audio"),this.audio_source=await this.audio.source("interview")}async attachContext(){if(!this.loaded){this.loading=!0,await this.audio.connect_the_world(),this.audio_source||(this.audio_source=await this.audio.source("interview"),await this.audio_source.prepare());const e=await this.audio_source.getDuration();this.duration=Math.round(1e3*e),this.loaded=!0,this.loading=!1}}async handleOffScreen(){this.pause()}async play(){this.audio&&this.audio_source&&(await this.audio_source.play(),this.playing=this.audio_source.playing)}async skipTo(e){this.audio&&this.audio_source&&(await this.audio_source.skipTo(e),this.playing=this.audio_source.playing)}async pause(){this.audio&&this.audio_source&&(await this.audio_source.pause(),this.playing=this.audio_source.playing)}async toggle(){this.audio&&this.audio_source&&(await this.audio_source.toggle(),this.playing=this.audio_source.playing)}async handleClick(){await this.attachContext(),await this.toggle(),this.current===this.duration&&await this.skipTo(0)}handleCurrentClick(){_.copyPlain(this.current)}render(){return t("div",{class:"card",onDblClick:()=>{this.handleClick()}},!this.visible&&t("div",null,t("skeleton-img",{width:"1050",height:"600",loading:!0}),t("div",{style:{display:"none"}},t("slot",null))),this.visible&&t("section",null,t("slot",null),t("div",{class:"transcript"},t("slot",{name:"transcript"})),t("web-audio",{name:`interview-${this.randomId}`},t("web-audio-source",{src:this.src,name:"interview"})),t("web-audio-visualizer",{for:`interview-${this.randomId}`,type:this.visualization,width:"1024",height:"1024",color:this.color}),t("button",{class:this.loading?"loading button":this.playing?"playing button":"button",onClick:()=>{this.handleClick()}},t("stellar-asset",{name:this.loading?"sync":this.playing?"pause":"play",class:this.loading?"animation-spin":""})),t("h3",null,t("stellar-unit",{class:"current",value:this.current,from:"ms",to:"s",onClick:()=>{this.handleCurrentClick()}})),t("h3",null,t("stellar-unit",{class:"duration",value:this.duration,from:"ms",to:"s"})),t("stellar-progress",{value:this.current,max:this.duration,noease:!0,blurable:!1,slender:!0,editable:!0,onValueChange:e=>{this.skipTo(e.detail.value)}})))}get element(){return n(this)}static get style(){return"stellar-interview{--width:800px;--height:800px;display:block}stellar-interview div.card{position:relative;display:block;width:auto;height:auto;margin:auto;overflow:hidden}stellar-interview div.card section{height:inherit;display:block;position:relative;padding-top:0!important}stellar-interview web-audio-visualizer{position:absolute;top:auto;left:0;right:0;bottom:0;width:100%;height:60%;pointer-events:none;z-index:2}stellar-interview web-audio-visualizer[type=circle]{height:100%}stellar-interview web-audio-visualizer[type=bars2]{width:80%;left:10%;right:10%}stellar-interview stellar-360-image,stellar-interview stellar-360-video,stellar-interview stellar-image,stellar-interview stellar-video{--gradient:radial-gradient(circle at 30% 107%,var(--theme-base5) 0%,var(--theme-base8) 5%,var(--theme-complement8) 45%,var(--theme-complement5) 60%,var(--theme-base5) 90%);position:relative;z-index:1;display:block}stellar-interview stellar-progress{position:absolute;top:0;left:0;width:100%;z-index:9}stellar-interview stellar-progress .progress{border:0}stellar-interview h3{color:#fff}stellar-interview stellar-unit{position:absolute;bottom:1rem;z-index:2;color:#fff!important;font-weight:700}stellar-interview stellar-unit.current{left:1rem}stellar-interview stellar-unit.duration{right:1rem}stellar-interview .transcript{position:absolute;bottom:0;width:70%;left:15%;z-index:5;pointer-events:none}stellar-interview .button{position:absolute;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;width:9rem;height:9rem;top:50%;right:50%;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);border-radius:100%;padding:0;border:0;z-index:3;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;text-align:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;z-index:4;outline:0;cursor:pointer;padding-left:1rem;mix-blend-mode:soft-light}stellar-interview .button:focus,stellar-interview .button:hover{-webkit-transform:translate(50%,-50%) scale(1.1);transform:translate(50%,-50%) scale(1.1);mix-blend-mode:hard-light}stellar-interview .button stellar-asset{font-size:7rem;margin:auto;display:block}stellar-interview .button.loading{padding:0}stellar-interview .button.playing{width:2.8rem;height:2.8rem;top:2.2rem;right:1.8rem;padding:0;background:transparent;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s}stellar-interview .button.playing stellar-asset{font-size:2.8rem}"}}class W{constructor(t){e(this,t),this.in=6e3,this.out=8300,this.complement=!1}render(){return t("div",{class:"line","data-start":this.in-100,"data-end":this.in,"data-opacity-start":"0","data-opacity-end":"1","data-translatey-start":"10","data-translatey-end":"0"},t("div",{class:"line","data-start":this.out-100,"data-end":this.out,"data-opacity-start":"1","data-opacity-end":"0"},t("slot",null)))}get element(){return n(this)}static get style(){return"stellar-interview-line{display:block;position:absolute;bottom:2rem;width:100%;left:0;right:0;padding:0 2rem;text-align:center}stellar-interview-line[complement]{opacity:.825;bottom:1rem;-webkit-transform:scale(.5);transform:scale(.5)}"}}class q{constructor(t){e(this,t),this.size="medium",this.padding="medium",this.align="top"}componentWillLoad(){b.definePts(this.element,{tiny:320,small:480,medium:640,large:800,massive:1024}),this.refresh()}componentDidLoad(){this.refresh()}async refresh(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}render(){return t("div",{class:"layout"},t("slot",null))}get element(){return n(this)}static get style(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;font-family:inherit;--grid-gap:3rem}:host .layout{display:grid;grid-gap:var(--grid-gap,3rem);margin:0 auto;padding:4rem 0;width:95%;max-width:1024px;min-height:0;min-width:0}:host .layout>*{min-width:0}:host([size=tiny]) .layout{max-width:420px}:host([size=small]) .layout{max-width:700px}:host([size=medium]) .layout{max-width:1024px}:host([size=large]) .layout{max-width:1200px}:host([size=full]) .layout{max-width:100%}:host([size=flush]) .layout{max-width:100%;width:100%}:host([padding=none]) .layout{padding:0}:host([padding=tiny]) .layout{padding:.5rem 0}:host([padding=small]) .layout{padding:1rem 0}:host([padding=medium]) .layout{padding:2rem 0}:host([padding=large]) .layout{padding:4rem 0}:host([type=copy]) .layout{padding:3rem 0}:host([align=top]) .layout{-ms-flex-align:start;align-items:flex-start}:host([align=center]) .layout{-ms-flex-align:center;align-items:center}:host([align=baseline]) .layout{-ms-flex-align:baseline;align-items:baseline}:host([type=supporting-content-right]) ::slotted(aside){-ms-flex-order:1;order:1}:host ::slotted(*){min-width:0}\@media (min-width:700px){:host([type=sidebar-right]) .layout{grid-template-columns:3fr 1fr}:host([type=sidebar]) .layout{grid-template-columns:1fr 3fr}:host([type=half]) .layout{grid-template-columns:1fr 1fr}:host([type=supporting-content]) .layout{grid-template-columns:6fr 4fr}:host([type=supporting-content-right]) .layout{grid-template-columns:4fr 6fr}:host([type=supporting-content-right]) ::slotted(aside){-ms-flex-order:-1;order:-1}}"}}class U{constructor(t){e(this,t),this.dark=!1,this.autoplay=!1,this.current=0,this.currentTrack={title:"Loading...",artist:"One sec...",picture:void 0},this.playlist="show",this.remember=!0,this.artwork=!1,this.view="playlist",this.playing=!1,this.load=!1,this.progress_value=0}componentWillLoad(){var e=localStorage.getItem("playlist");this.playlist=e}componentDidLoad(){this.visualizer=this.element.shadowRoot.querySelector("web-audio-visualizer"),this.audio=this.element.shadowRoot.querySelector("audio"),this.progress=this.element.shadowRoot.querySelector("progress"),this.playlistItems=this.element.querySelectorAll("stellar-song"),this.currentPlaylistItem=this.element.querySelector("stellar-song[playing]"),Array.from(this.playlistItems).forEach((e,t)=>{e.setIndex(t)}),this.audio&&(this.audio.volume=.7);var e=this.element.querySelector("stellar-song[playing]")||this.element.querySelector("stellar-song");e.playing=!0,this.prepare(e),this.autoplay&&this.play(),this.remember&&this.loadFromStorage(),this.handleTimeUpdates(),this.handleProgressClick()}handleProgressClick(){this.progress.addEventListener("click",e=>{this.audio.currentTime=e.offsetX/this.progress.offsetWidth*this.audio.duration})}handleTimeUpdates(){this.audio.addEventListener("timeupdate",()=>{this.currentTime=f(parseFloat(this.audio.currentTime.toString()).toFixed(10)),this.duration=f(parseFloat(this.audio.duration.toString()).toFixed(10)),this.progress_value=0!==this.audio.currentTime&&0!==this.audio.duration?this.audio.currentTime/this.audio.duration*100:0,localStorage.setItem("track",this.current.toString()),localStorage.setItem("time",this.audio.currentTime.toString())}),this.audio.addEventListener("ended",this.next.bind(this))}handleKeydown(e){"space"===e.key?this.pause():"left"===e.key?this.previous():"right"===e.key&&this.next()}loadFromStorage(){var e=parseInt(localStorage.getItem("track")),t=parseFloat(localStorage.getItem("time")),r=localStorage.getItem("playlist");this.playlist=r,e&&t&&(this.playlistItems[e].play(),this.audio.currentTime=t)}async prepare(e){this.currentPlaylistItem&&this.currentPlaylistItem.switching(),this.currentPlaylistItem=e,this.audio.src=this.currentPlaylistItem.src,this.audio.load(),this.current=await this.currentPlaylistItem.getIndex(),this.currentPlaylistItem.playing=!0,this.currentTrack=await this.currentPlaylistItem.details()}async play(){if(this.playing=!0,this.audio.play(),!this.context){var e=new AudioContext;const t=e.createMediaElementSource(this.audio),r=await this.visualizer.connect(e);t.connect(r.analyser),r.analyser.connect(e.destination),this.context=e}}async pause(){this.audio.paused?(this.playing=!0,this.audio.play()):(this.playing=!1,this.audio.pause())}async next(){var e;e=this.element.querySelector("stellar-song[playing]"),(e=this.current===this.playlistItems.length-1?this.element.querySelector("stellar-song:first-child"):e.nextElementSibling).play()}async previous(){var e;(e=this.element.querySelector("stellar-song[playing]")).removeAttribute("playing"),(e=0===this.current?this.element.querySelector("stellar-song:last-child"):e.previousElementSibling).setAttribute("playing",!0),e.play()}togglePlaylist(){this.playlist="show"===this.playlist?"hide":"show",localStorage.setItem("playlist",this.playlist)}toggleAlbumArtView(){this.view="playlist"===this.view?"art":"playlist"}render(){return t("div",{id:"player"},t("div",{class:"playlist-title"},t("slot",{name:"title"},t("h6",null,"Playlist")),t("button",{class:"playlist",onClick:()=>this.togglePlaylist()},t("h6",{class:"list"},t("stellar-asset",{name:"musical-notes"}),"list"))),t("div",{class:"playlist-playing"},t("button",{onClick:()=>this.pause(),class:"toggle-button","data-playing":this.playing},t("ion-icon",this.playing?{name:"md-pause"}:{name:"md-play"})),!this.load&&t("button",{onClick:()=>{this.load=!0}},"Load this playlist"),this.load&&t("div",{class:"playlist-playing-details"},t("h2",null,this.currentTrack.title),t("h3",null,this.currentTrack.artist)),this.load&&void 0!==this.currentTrack.picture&&t("div",{class:"playlist-playing-image"},t("img",{src:this.currentTrack.picture,onClick:()=>this.toggleAlbumArtView()})),t("web-audio-visualizer",{tag:this.audio,type:"art"===this.view?"circle":"bars"})),t("div",{id:"controls",class:"controls"},t("button",{onClick:()=>this.previous(),class:"button previous"},t("stellar-asset",{name:"skip-backward"})),t("button",{onClick:()=>this.next(),class:"button next"},t("stellar-asset",{name:"skip-forward"}))),t("div",{class:"playlist-progress"},t("h6",{id:"currentTime"},this.currentTime),t("h6",{id:"totalTime"},this.duration),t("progress",{id:"progress",max:"100",value:this.progress_value})),t("audio",{id:"playlist-audio",preload:"auto",tabindex:"0",controls:!0},t("source",{id:"source",type:"audio/mp3"})),t("div",{id:"playlist",class:`playlist-list ${this.playlist}`},this.load&&t("slot",null)))}get element(){return n(this)}static get style(){return":host,:host *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{--color-one:var(--theme-base1);--color-two:var(--theme-base9);--color-three:var(--theme-base5);--color-four:var(--theme-base7);--color-bg:var(--theme-base0);--color-bg-active:var(--theme-base1);--color-bg-playing:var(--theme-base2);--color-line:var(--theme-base1)}:host-context(.dark-mode):host{--color-one:var(--theme-base9);--color-two:var(--theme-base1);--color-three:var(--theme-base5);--color-four:var(--theme-base2);--color-bg:var(--black-alt);--color-bg-active:var(--theme-base8);--color-bg-playing:var(--theme-base8);--color-line:var(--black)}:host{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;background:var(--color-bg);max-width:650px;width:100%;margin:0 auto}:host button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;outline:0;border:0;cursor:pointer}:host audio{display:none}:host web-audio-visualizer{height:0;margin-top:1rem;opacity:0;-webkit-transition:all .25s var(--ease) 0s;transition:all .25s var(--ease) 0s;pointer-events:none}:host([playing]) web-audio-visualizer{opacity:1;height:10rem}:host h6{font-size:.75rem;margin:0;text-transform:uppercase;color:var(--color-two);letter-spacing:.23em;z-index:1}:host h6.list{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host h6.list stellar-asset{margin-right:.5rem}:host .playlist-playing,:host .playlist-playing-details,:host .playlist-progress,:host .playlist-title{-webkit-transition:all .1875s ease-in-out 0s;transition:all .1875s ease-in-out 0s}:host .playlist-playing-image{-webkit-transition:all .25s ease-in-out 0s;transition:all .25s ease-in-out 0s}:host .playlist-title{background:var(--color-one);height:40px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;padding:10px 30px}:host .playlist-playing-details{margin-right:30px}:host .playlist-playing{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;margin:30px}:host .playlist-playing h2,:host .playlist-playing h3{font-weight:400;margin:0}:host .playlist-playing h2{color:var(--color-two);font-weight:700;font-size:17px;overflow:hidden;width:100%}:host .playlist-playing h3{color:var(--color-four);font-size:16px;overflow:hidden;width:100%}:host .playlist-progress{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:baseline;align-items:baseline;-ms-flex-pack:justify;justify-content:space-between;width:100%;padding:0 15px 15px}:host .playlist-progress progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:absolute;height:3px;bottom:0;left:0;width:100%;-webkit-transition:all 75ms ease-in-out .25s;transition:all 75ms ease-in-out .25s;cursor:pointer;z-index:2}:host .playlist-progress progress:hover{-webkit-transition:all 75ms ease-in-out 0s;transition:all 75ms ease-in-out 0s;height:16px;bottom:-8px}:host .playlist-progress progress[value]::-moz-progress-bar{background-color:var(--color-line)}:host .playlist-progress progress[value]::-webkit-progress-bar{background-color:var(--color-line)}:host .playlist-progress progress[value]::-webkit-progress-value{background-color:var(--color-three)}:host .playlist-list{max-height:50vh;overflow:auto;-webkit-transition:all .2s ease 0s;transition:all .2s ease 0s}:host .playlist-list.hide{max-height:0}:host .controls{display:-ms-flexbox;display:flex;display:none;margin:1em 0}:host .controls .button{font-size:2rem;width:50%;-ms-flex:12 6 200px;flex:12 6 200px}:host .controls .button stellar-asset{display:inline-block}:host .playlist-playing-image{margin:auto 0 auto auto;width:5rem;-ms-flex:0 0 5rem;flex:0 0 5rem;height:5rem;cursor:pointer}:host .playlist-playing-image img{width:100%;background:#fff;border:1px solid var(--color-one);border-radius:3px;height:auto;-webkit-box-shadow:0 3px 3px 0 var(--color-one);box-shadow:0 3px 3px 0 var(--color-one)}:host .playlist-playing .toggle-button{padding:0;margin-right:20px;width:50px;-ms-flex:0 0 50px;flex:0 0 50px;height:50px;padding:14px;border-radius:100%;background:var(--color-three);color:#fff}:host .playlist-playing .toggle-button path{fill:var(--color-bg)}:host .playlist-playing .toggle-button[data-playing=false]{padding:14px 12px 14px 16px}:host .st0{fill:var(--color-three)}:host .st1{fill:#fff}:host([view=art]) .playlist-playing{position:relative;margin:0;padding:0;overflow:hidden}:host([view=art]) web-audio-visualizer{height:100%;position:absolute;bottom:0;z-index:2;-webkit-transition:all 0s var(--ease) 0s;transition:all 0s var(--ease) 0s}:host([view=art]) .playlist-playing .toggle-button{display:none}:host([view=art]) .playlist-playing .playlist-playing-details{position:absolute;bottom:0;width:100%;padding:2rem;background:var(--color-one);left:0;right:0;text-align:center;mix-blend-mode:hard-light;margin:0;-webkit-transform:translateY(100%);transform:translateY(100%);z-index:3}:host([view=art]:hover) .playlist-playing-details{-webkit-transform:translateY(0);transform:translateY(0)}:host([view=art]) .playlist-progress{padding:0 15px 0}:host([view=art]) .playlist-progress h6{display:none}:host([view=art]) .playlist-playing-image{width:100%;margin:0 auto;-ms-flex:none;flex:none;height:auto}:host([view=art]) .playlist-playing-image:focus,:host([view=art]) .playlist-playing-image:hover{-webkit-transform:scale(1.025);transform:scale(1.025);cursor:pointer}:host([view=art]) .playlist-playing-image img{width:100%}:host([view=art]) .controls{display:none}"}}class X{constructor(t){e(this,t),this.slender=!1,this.max=100,this.editable=!1,this.noease=!1,this.rounded=!1,this.value=0,this.secondary=0,this.blurable=!0,this.wrapper="stellar-blur",this.blur=0,this.ease=m({end:20,start:-1,duration:200,tick:e=>{this.blur=e.value},complete:()=>{this.blur=0,this.ease.stop()}}),this.valueChange=a(this,"valueChange",7)}componentWillLoad(){this.blurable||(this.wrapper="div")}observeValue(){this.blurable&&this.ease.start()}handleClick(e){if(this.editable){var t=this.element.getBoundingClientRect(),r=e.pageX-t.left,n=t.width,i=r/n*this.max,a=Math.round(100*i)/100;console.log(`bounding: ${t}`),console.log(`widthClicked: ${r}`),console.log(`totalWidth: ${n}`),console.log(`max: ${this.max}`),console.log(`calc: ${i}`),console.log(`rounded: ${a}`),this.rounded&&(a=Math.ceil(a)),this.value=a,this.valueChange.emit({value:this.value})}}progress(e){if(e){let e=this.secondary/this.max*100;return e=(e=e<100?e:100)>0?e:0}{let e=this.value/this.max*100;return e=(e=e<100?e:100)>0?e:0}}render(){return t(this.wrapper,{class:"progress",horizontal:this.blur,onClick:e=>{this.handleClick(e)}},t("div",{class:"status",style:{transform:`translate(${this.progress()}%, 0)`}}),this.secondary&&t("div",{class:"secondary",style:{transform:`translate(${this.progress(!0)}%, 0)`}}))}get element(){return n(this)}static get watchers(){return{value:["observeValue"]}}static get style(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;position:relative;overflow:hidden;--border-radius:0.3rem}:host .blur-content{display:block;height:100%}:host([editable]){cursor:pointer}:host .progress{display:block;position:relative;-webkit-transition:all .25s var(--ease) 0ms;transition:all .25s var(--ease) 0ms;background:var(--gray0);width:100%;height:.6rem;border-radius:var(--border-radius);overflow:hidden}:host([editable]:hover) .progress{height:2.4rem}:host .secondary,:host .status{position:absolute;top:0;right:0;bottom:0;left:-100%;-webkit-transition:all .35s var(--ease,ease-in-out) 0ms;transition:all .35s var(--ease,ease-in-out) 0ms;background:var(--theme-base5,var(--gray5));width:100%;z-index:2}:host .secondary{background:var(--theme-base3,var(--gray3));z-index:1}:host([slender]) .progress{border:0;height:.2rem}:host([slender][editable]:hover) .progress{height:.4rem}:host([noease]) .progress,:host([noease]) .secondary,:host([noease]) .status{-webkit-transition:none!important;transition:none!important}:host-context(.dark-mode):host .progress{background:var(--theme-base9)}:host-context(.dark-mode):host .secondary{background:var(--theme-base7,var(--gray7));z-index:1}"}}var V=s(function(e){e.exports=function e(t,r,n){function i(s,l){if(!r[s]){if(!t[s]){var u="function"==typeof o&&o;if(!l&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[s]={exports:{}};t[s][0].call(h.exports,function(e){return i(t[s][1][e]||e)},h,h.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof o&&o,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(){},{}],2:[function(e,t){t.exports=XMLHttpRequest},{}],3:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./MediaFileReader"),i=function(){function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._array=t,r._size=t.length,r._isInitialized=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,n),r(e,[{key:"init",value:function(e){setTimeout(e.onSuccess,0)}},{key:"loadRange",value:function(e,t){setTimeout(t.onSuccess,0)}},{key:"getByteAt",value:function(e){if(e>=this._array.length)throw new Error("Offset "+e+" hasn't been loaded yet.");return this._array[e]}}],[{key:"canReadFile",value:function(e){return Array.isArray(e)||"function"==typeof Buffer&&Buffer.isBuffer(e)}}]),e}();t.exports=i},{"./MediaFileReader":11}],4:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./ChunkedFileData"),i=e("./MediaFileReader"),a=function(){function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._blob=t,r._fileData=new n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i),r(e,[{key:"_init",value:function(e){this._size=this._blob.size,setTimeout(e.onSuccess,1)}},{key:"loadRange",value:function(e,t){var r=this,n=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,e[0],e[1]+1),i=new FileReader;i.onloadend=function(){var n=new Uint8Array(i.result);r._fileData.addData(e[0],n),t.onSuccess()},i.onerror=i.onabort=function(){t.onError&&t.onError({type:"blob",info:i.error})},i.readAsArrayBuffer(n)}},{key:"getByteAt",value:function(e){return this._fileData.getByteAt(e)}}],[{key:"canReadFile",value:function(e){return"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof File&&e instanceof File}}]),e}();t.exports=a},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._fileData=[]}return r(e,null,[{key:"NOT_FOUND",get:function(){return-1}}]),r(e,[{key:"addData",value:function(e,t){var r=e+t.length-1,n=this._getChunkRange(e,r);if(-1===n.startIx)this._fileData.splice(n.insertIx||0,0,{offset:e,data:t});else{var i=this._fileData[n.startIx],a=this._fileData[n.endIx],s=e>i.offset,o=r<a.offset+a.data.length-1,l={offset:Math.min(e,i.offset),data:t};if(s){var u=this._sliceData(i.data,0,e-i.offset);l.data=this._concatData(u,t)}if(o){u=this._sliceData(l.data,0,a.offset-l.offset);l.data=this._concatData(u,a.data)}this._fileData.splice(n.startIx,n.endIx-n.startIx+1,l)}}},{key:"_concatData",value:function(e,t){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)){var r=new e.constructor(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}return e.concat(t)}},{key:"_sliceData",value:function(e,t,r){return e.slice?e.slice(t,r):e.subarray(t,r)}},{key:"_getChunkRange",value:function(e,t){for(var r=-1,n=-1,i=0,a=0;a<this._fileData.length;i=++a){var s=(o=this._fileData[a].offset)+this._fileData[a].data.length;if(t<o-1)break;if(e<=s+1&&t>=o-1){r=a;break}}if(-1===r)return{startIx:-1,endIx:-1,insertIx:i};for(a=r;a<this._fileData.length;a++){var o;if(t>=(o=this._fileData[a].offset)-1&&(n=a),t<=(s=o+this._fileData[a].data.length)+1)break}return-1===n&&(n=r),{startIx:r,endIx:n}}},{key:"hasDataRange",value:function(e,t){for(var r=0;r<this._fileData.length;r++){var n=this._fileData[r];if(t<n.offset)return!1;if(e>=n.offset&&t<n.offset+n.data.length)return!0}return!1}},{key:"getByteAt",value:function(e){for(var t,r=0;r<this._fileData.length;r++){var n=this._fileData[r].offset;if(e>=n&&e<=n+this._fileData[r].data.length-1){t=this._fileData[r];break}}if(t)return t.data[e-t.offset];throw new Error("Offset "+e+" hasn't been loaded yet.")}}]),e}();t.exports=n},{}],6:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./MediaTagReader"),i=[4,132],a=[6,134],s=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"],o=function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,n),r(e,[{key:"_loadData",value:function(e,t){var r=this;e.loadRange([4,7],{onSuccess:function(){r._loadBlock(e,4,t)}})}},{key:"_loadBlock",value:function(e,t,r){var n=this,s=e.getByteAt(t),o=e.getInteger24At(t+1,!0);if(-1!==i.indexOf(s))e.loadRange([l=t+4,l+o],{onSuccess:function(){n._commentOffset=l,n._nextBlock(e,t,s,o,r)}});else if(-1!==a.indexOf(s)){var l;e.loadRange([l=t+4,l+o],{onSuccess:function(){n._pictureOffset=l,n._nextBlock(e,t,s,o,r)}})}else n._nextBlock(e,t,s,o,r)}},{key:"_nextBlock",value:function(e,t,r,n,i){var a=this;r>127?a._commentOffset?i.onSuccess():i.onError({type:"loadData",info:"Comment block could not be found."}):e.loadRange([t+4+n,t+4+4+n],{onSuccess:function(){a._loadBlock(e,t+4+n,i)}})}},{key:"_parseData",value:function(e){for(var t,r,n,i,a,o,l=e.getLongAt(this._commentOffset,!1)+(this._commentOffset+4),u=e.getLongAt(l,!1),c=l+4,h=0;h<u;h++){var d=e.getLongAt(c,!1),p=e.getStringWithCharsetAt(c+4,d,"utf-8").toString(),f=p.indexOf("="),m=[p.slice(0,f),p.slice(f+1)];switch(m[0]){case"TITLE":t=m[1];break;case"ARTIST":r=m[1];break;case"ALBUM":n=m[1];break;case"TRACKNUMBER":i=m[1];break;case"GENRE":a=m[1]}c+=4+d}if(this._pictureOffset){var g=e.getLongAt(this._pictureOffset,!0),y=this._pictureOffset+4,v=e.getLongAt(y,!0),_=y+4,b=e.getStringAt(_,v),S=_+v,w=e.getLongAt(S,!0),E=S+4,T=e.getStringWithCharsetAt(E,w,"utf-8").toString(),C=E+w+16,A=e.getLongAt(C,!0),M=e.getBytesAt(C+4,A,!0);o={format:b,type:s[g],description:T,data:M}}return{type:"FLAC",version:"1",tags:{title:t,artist:r,album:n,track:i,genre:a,picture:o}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(e){return"fLaC"===String.fromCharCode.apply(String,e.slice(0,4))}}]),e}();t.exports=o},{"./MediaTagReader":12}],7:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./MediaTagReader"),i=(e("./MediaFileReader"),function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,n),r(e,[{key:"_loadData",value:function(e,t){var r=e.getSize();e.loadRange([r-128,r-1],t)}},{key:"_parseData",value:function(e){var t=e.getSize()-128,r=e.getStringWithCharsetAt(t+3,30).toString(),n=e.getStringWithCharsetAt(t+33,30).toString(),i=e.getStringWithCharsetAt(t+63,30).toString(),s=e.getStringWithCharsetAt(t+93,4).toString(),o=e.getByteAt(t+97+28),l=e.getByteAt(t+97+29);if(0==o&&0!=l)var u="1.1",c=e.getStringWithCharsetAt(t+97,28).toString();else{u="1.0",c=e.getStringWithCharsetAt(t+97,30).toString();l=0}var h=e.getByteAt(t+97+30);if(h<255)var d=a[h];else d="";var p={type:"ID3",version:u,tags:{title:r,artist:n,album:i,year:s,comment:c,genre:d}};return l&&(p.tags.track=l),p}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(e){return"TAG"===String.fromCharCode.apply(String,e.slice(0,3))}}]),e}()),a=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];t.exports=i},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e("./MediaFileReader");var n=e("./StringUtils"),i=e("./ArrayFileReader"),a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},s=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,null,[{key:"getFrameReaderFunction",value:function(e){return e in o?o[e]:"T"===e[0]?o["T*"]:"W"===e[0]?o["W*"]:null}},{key:"readFrames",value:function(t,r,n,i,a){for(var s={},o=this._getFrameHeaderSize(i);t<r-o;){var l=this._readFrameHeader(n,t,i),u=l.id;if(!u)break;var c=l.flags,h=l.size,d=t+l.headerSize,p=n;if(t+=l.headerSize+l.size,!a||-1!==a.indexOf(u)){if("MP3e"===u||"\0MP3"===u||"\0\0MP"===u||" MP3"===u)break;c&&c.format.unsynchronisation&&(p=this.getUnsyncFileReader(p,d,h),d=0,h=p.getSize()),c&&c.format.data_length_indicator&&(d+=4,h-=4);var f=e.getFrameReaderFunction(u),m=f?f.apply(this,[d,h,p,c,i]):null,g={id:u,size:h,description:this._getFrameDescription(u),data:m};u in s?(s[u].id&&(s[u]=[s[u]]),s[u].push(g)):s[u]=g}}return s}},{key:"_getFrameHeaderSize",value:function(e){var t=e.major;return 2==t?6:3==t||4==t?10:0}},{key:"_readFrameHeader",value:function(e,t,r){var n=r.major,i=null,a=this._getFrameHeaderSize(r);switch(n){case 2:var s=e.getStringAt(t,3),o=e.getInteger24At(t+3,!0);break;case 3:s=e.getStringAt(t,4),o=e.getLongAt(t+4,!0);break;case 4:s=e.getStringAt(t,4),o=e.getSynchsafeInteger32At(t+4)}return s!=String.fromCharCode(0,0,0)&&s!=String.fromCharCode(0,0,0,0)||(s=""),s&&n>2&&(i=this._readFrameFlags(e,t+8)),{id:s||"",size:o||0,headerSize:a||0,flags:i}}},{key:"_readFrameFlags",value:function(e,t){return{message:{tag_alter_preservation:e.isBitSetAt(t,6),file_alter_preservation:e.isBitSetAt(t,5),read_only:e.isBitSetAt(t,4)},format:{grouping_identity:e.isBitSetAt(t+1,7),compression:e.isBitSetAt(t+1,3),encryption:e.isBitSetAt(t+1,2),unsynchronisation:e.isBitSetAt(t+1,1),data_length_indicator:e.isBitSetAt(t+1,0)}}}},{key:"_getFrameDescription",value:function(e){return e in a?a[e]:"Unknown"}},{key:"getUnsyncFileReader",value:function(e,t,r){for(var n=e.getBytesAt(t,r),a=0;a<n.length-1;a++)255===n[a]&&0===n[a+1]&&n.splice(a+1,1);return new i(n)}}]),e}(),o={};function l(e){var t;switch(e){case 0:t="iso-8859-1";break;case 1:t="utf-16";break;case 2:t="utf-16be";break;case 3:t="utf-8";break;default:t="iso-8859-1"}return t}function u(e,t,r,n){var i=r.getStringWithCharsetAt(e+1,t-1,n),a=r.getStringWithCharsetAt(e+1+i.bytesReadCount,t-1-i.bytesReadCount);return{user_description:i.toString(),data:a.toString()}}o.APIC=function(e,t,r,n,i){var a=e,s=l(r.getByteAt(e));switch(i&&i.major){case 2:var o=r.getStringAt(e+1,3);e+=4;break;case 3:case 4:e+=1+(o=r.getStringWithCharsetAt(e+1,t-1)).bytesReadCount;break;default:throw new Error("Couldn't read ID3v2 major version.")}var u=r.getByteAt(e),h=c[u],d=r.getStringWithCharsetAt(e+1,t-(e-a)-1,s);return e+=1+d.bytesReadCount,{format:o.toString(),type:h,description:d.toString(),data:r.getBytesAt(e,a+t-e)}},o.CHAP=function(e,t,r,i,a){var s=e,o={},l=n.readNullTerminatedString(r.getBytesAt(e,t));o.id=l.toString(),o.startTime=r.getLongAt(e+=l.bytesReadCount,!0),o.endTime=r.getLongAt(e+=4,!0),o.startOffset=r.getLongAt(e+=4,!0),o.endOffset=r.getLongAt(e+=4,!0);var u=t-((e+=4)-s);return o.subFrames=this.readFrames(e,e+u,r,a),o},o.CTOC=function(e,t,r,i,a){var s=e,o={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},l=n.readNullTerminatedString(r.getBytesAt(e,t));o.id=l.toString(),o.topLevel=r.isBitSetAt(e+=l.bytesReadCount,1),o.ordered=r.isBitSetAt(e,0),o.entryCount=r.getByteAt(++e),e++;for(var u=0;u<o.entryCount;u++){var c=n.readNullTerminatedString(r.getBytesAt(e,t-(e-s)));o.childElementIds.push(c.toString()),e+=c.bytesReadCount}return o.subFrames=this.readFrames(e,e+(t-(e-s)),r,a),o},o.COMM=function(e,t,r){var n=e,i=l(r.getByteAt(e)),a=r.getStringAt(e+1,3),s=r.getStringWithCharsetAt(e+4,t-4,i),o=r.getStringWithCharsetAt(e+=4+s.bytesReadCount,n+t-e,i);return{language:a,short_description:s.toString(),text:o.toString()}},o.COM=o.COMM,o.PIC=function(e,t,r,n,i){return o.APIC(e,t,r,n,i)},o.PCNT=function(e,t,r){return r.getLongAt(e,!1)},o.CNT=o.PCNT,o["T*"]=function(e,t,r){var n=l(r.getByteAt(e));return r.getStringWithCharsetAt(e+1,t-1,n).toString()},o.TXXX=function(e,t,r){var n=l(r.getByteAt(e));return u(e,t,r,n)},o.WXXX=function(e,t,r){if(0===t)return null;var n=l(r.getByteAt(e));return u(e,t,r,n)},o["W*"]=function(e,t,r){return 0===t?null:r.getStringWithCharsetAt(e,t,"iso-8859-1").toString()},o.TCON=function(e,t,r,n){return o["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},o.TCO=o.TCON,o.USLT=function(e,t,r){var n=e,i=l(r.getByteAt(e)),a=r.getStringAt(e+1,3),s=r.getStringWithCharsetAt(e+4,t-4,i),o=r.getStringWithCharsetAt(e+=4+s.bytesReadCount,n+t-e,i);return{language:a,descriptor:s.toString(),lyrics:o.toString()}},o.ULT=o.USLT,o.UFID=function(e,t,r){var i=n.readNullTerminatedString(r.getBytesAt(e,t)),a=r.getBytesAt(e+=i.bytesReadCount,t-i.bytesReadCount);return{ownerIdentifier:i.toString(),identifier:a}};var c=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];t.exports=s},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./MediaTagReader"),i=(e("./MediaFileReader"),e("./ID3v2FrameReader")),a=function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,n),r(e,[{key:"_loadData",value:function(e,t){e.loadRange([6,9],{onSuccess:function(){e.loadRange([0,10+e.getSynchsafeInteger32At(6)-1],t)},onError:t.onError})}},{key:"_parseData",value:function(e,t){var r=0,n=e.getByteAt(r+3);if(n>4)return{type:"ID3",version:">2.4",tags:{}};var a=e.getByteAt(r+4),o=e.isBitSetAt(r+5,7),l=e.isBitSetAt(r+5,6),u=e.isBitSetAt(r+5,5),c=e.getSynchsafeInteger32At(r+6);(r+=10,l)&&(r+=e.getLongAt(r,!0)+4);var h={type:"ID3",version:"2."+n+"."+a,major:n,revision:a,flags:{unsynchronisation:o,extended_header:l,experimental_indicator:u,footer_present:!1},size:c,tags:{}};if(t)var d=this._expandShortcutTags(t);var p=c+10;h.flags.unsynchronisation&&(e=i.getUnsyncFileReader(e,r,c),r=0,p=e.getSize());var f=i.readFrames(r,p,e,h,d);for(var m in s)if(s.hasOwnProperty(m)){var g=this._getFrameData(f,s[m]);g&&(h.tags[m]=g)}for(var y in f)f.hasOwnProperty(y)&&(h.tags[y]=f[y]);return h}},{key:"_getFrameData",value:function(e,t){for(var r,n=0;r=t[n];n++)if(r in e)return(e[r]instanceof Array?e[r][0]:e[r]).data}},{key:"getShortcuts",value:function(){return s}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(e){return"ID3"===String.fromCharCode.apply(String,e.slice(0,3))}}]),e}(),s={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};t.exports=a},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./MediaTagReader"),i=(e("./MediaFileReader"),function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,n),r(e,[{key:"_loadData",value:function(e,t){var r=this;e.loadRange([0,16],{onSuccess:function(){r._loadAtom(e,0,"",t)},onError:t.onError})}},{key:"_loadAtom",value:function(e,t,r,n){if(t>=e.getSize())n.onSuccess();else{var i=this,a=e.getLongAt(t,!0);if(0==a||isNaN(a))n.onSuccess();else{var s=e.getStringAt(t+4,4);if(this._isContainerAtom(s)){"meta"==s&&(t+=4);var o=(r?r+".":"")+s;"moov.udta.meta.ilst"===o?e.loadRange([t,t+a],n):e.loadRange([t+8,t+8+8],{onSuccess:function(){i._loadAtom(e,t+8,o,n)},onError:n.onError})}else e.loadRange([t+a,t+a+8],{onSuccess:function(){i._loadAtom(e,t+a,r,n)},onError:n.onError})}}}},{key:"_isContainerAtom",value:function(e){return["moov","udta","meta","ilst"].indexOf(e)>=0}},{key:"_canReadAtom",value:function(e){return"----"!==e}},{key:"_parseData",value:function(e,t){var r={};for(var n in t=this._expandShortcutTags(t),this._readAtom(r,e,0,e.getSize(),t),o)if(o.hasOwnProperty(n)){var i=r[o[n]];i&&(r[n]="track"===n?i.data.track:i.data)}return{type:"MP4",ftyp:e.getStringAt(8,4),version:e.getLongAt(12,!0),tags:r}}},{key:"_readAtom",value:function(e,t,r,n,i,a,s){s=void 0===s?"":s+"  ";for(var o=r;o<r+n;){var l=t.getLongAt(o,!0);if(0==l)return;var u=t.getStringAt(o+4,4);if(this._isContainerAtom(u))return"meta"==u&&(o+=4),void this._readAtom(e,t,o+8,l-8,i,(a?a+".":"")+u,s);(!i||i.indexOf(u)>=0)&&"moov.udta.meta.ilst"===a&&this._canReadAtom(u)&&(e[u]=this._readMetadataAtom(t,o)),o+=l}}},{key:"_readMetadataAtom",value:function(e,t){var r=e.getLongAt(t,!0),n=e.getStringAt(t+4,4),i=e.getInteger24At(t+16+1,!0),o=a[i];if("trkn"==n)l={track:e.getByteAt(t+16+11),total:e.getByteAt(t+16+13)};else if("disk"==n)l={disk:e.getByteAt(t+16+11),total:e.getByteAt(t+16+13)};else{var l,u=t+24,c=r-24;switch("covr"===n&&"uint8"===o&&(o="jpeg"),o){case"text":l=e.getStringWithCharsetAt(u,c,"utf-8").toString();break;case"uint8":l=e.getShortAt(u,!1);break;case"int":case"uint":l=("int"==o?1==c?e.getSByteAt:2==c?e.getSShortAt:4==c?e.getSLongAt:e.getLongAt:1==c?e.getByteAt:2==c?e.getShortAt:e.getLongAt).call(e,u+(8==c?4:0),!0);break;case"jpeg":case"png":l={format:"image/"+o,data:e.getBytesAt(u,c)}}}return{id:n,size:r,description:s[n]||"Unknown",data:l}}},{key:"getShortcuts",value:function(){return o}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(e){return"ftyp"===String.fromCharCode.apply(String,e.slice(4,8))}}]),e}()),a={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},s={"alb":"Album","ART":"Artist",aART:"Album Artist","day":"Release Date","nam":"Title","gen":"Genre",gnre:"Genre",trkn:"Track Number","wrt":"Composer","too":"Encoding Tool","enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","grp":"Grouping",keyw:"Keywords","lyr":"Lyrics","cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},o={title:"nam",artist:"ART",album:"alb",year:"day",comment:"cmt",track:"trkn",genre:"gen",picture:"covr",lyrics:"lyr"};t.exports=i},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./StringUtils"),i=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._isInitialized=!1,this._size=0}return r(e,[{key:"init",value:function(e){var t=this;if(!this._isInitialized)return this._init({onSuccess:function(){t._isInitialized=!0,e.onSuccess()},onError:e.onError});setTimeout(e.onSuccess,1)}},{key:"_init",value:function(){throw new Error("Must implement init function")}},{key:"loadRange",value:function(){throw new Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw new Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(){throw new Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(e,t){for(var r=new Array(t),n=0;n<t;n++)r[n]=this.getByteAt(e+n);return r}},{key:"isBitSetAt",value:function(e,t){return 0!=(this.getByteAt(e)&1<<t)}},{key:"getSByteAt",value:function(e){var t=this.getByteAt(e);return t>127?t-256:t}},{key:"getShortAt",value:function(e,t){var r=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e);return r<0&&(r+=65536),r}},{key:"getSShortAt",value:function(e,t){var r=this.getShortAt(e,t);return r>32767?r-65536:r}},{key:"getLongAt",value:function(e,t){var r=this.getByteAt(e),n=this.getByteAt(e+1),i=this.getByteAt(e+2),a=this.getByteAt(e+3),s=t?(((r<<8)+n<<8)+i<<8)+a:(((a<<8)+i<<8)+n<<8)+r;return s<0&&(s+=4294967296),s}},{key:"getSLongAt",value:function(e,t){var r=this.getLongAt(e,t);return r>2147483647?r-4294967296:r}},{key:"getInteger24At",value:function(e,t){var r=this.getByteAt(e),n=this.getByteAt(e+1),i=this.getByteAt(e+2),a=t?((r<<8)+n<<8)+i:((i<<8)+n<<8)+r;return a<0&&(a+=16777216),a}},{key:"getStringAt",value:function(e,t){for(var r=[],n=e,i=0;n<e+t;n++,i++)r[i]=String.fromCharCode(this.getByteAt(n));return r.join("")}},{key:"getStringWithCharsetAt",value:function(e,t,r){var i,a=this.getBytesAt(e,t);switch((r||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":i=n.readUTF16String(a,"utf-16be"===r);break;case"utf-8":i=n.readUTF8String(a);break;default:i=n.readNullTerminatedString(a)}return i}},{key:"getCharAt",value:function(e){return String.fromCharCode(this.getByteAt(e))}},{key:"getSynchsafeInteger32At",value:function(e){var t=this.getByteAt(e),r=this.getByteAt(e+1),n=this.getByteAt(e+2);return 127&this.getByteAt(e+3)|(127&n)<<7|(127&r)<<14|(127&t)<<21}}],[{key:"canReadFile",value:function(){throw new Error("Must implement canReadFile function")}}]),e}();t.exports=i},{"./StringUtils":13}],12:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e("./MediaFileReader");var n=function(){function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._mediaFileReader=t,this._tags=null}return r(e,[{key:"setTagsToRead",value:function(e){return this._tags=e,this}},{key:"read",value:function(e){var t=this;this._mediaFileReader.init({onSuccess:function(){t._loadData(t._mediaFileReader,{onSuccess:function(){try{var r=t._parseData(t._mediaFileReader,t._tags)}catch(t){if(e.onError)return void e.onError({type:"parseData",info:t.message})}e.onSuccess(r)},onError:e.onError})},onError:e.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(){throw new Error("Must implement _loadData function")}},{key:"_parseData",value:function(){throw new Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(e){if(!e)return null;for(var t,r=[],n=this.getShortcuts(),i=0;t=e[i];i++)r=r.concat(n[t]||[t]);return r}}],[{key:"getTagIdentifierByteRange",value:function(){throw new Error("Must implement")}},{key:"canReadTagFormat",value:function(){throw new Error("Must implement")}}]),e}();t.exports=n},{"./MediaFileReader":11}],13:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(t,r){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._value=t,this.bytesReadCount=r,this.length=t.length}return r(e,[{key:"toString",value:function(){return this._value}}]),e}();t.exports={readUTF16String:function(e,t,r){var i=0,a=1,s=0;r=Math.min(r||e.length,e.length),254==e[0]&&255==e[1]?(t=!0,i=2):255==e[0]&&254==e[1]&&(t=!1,i=2),t&&(a=0,s=1);for(var o=[],l=0;i<r;l++){var u=e[i+a],c=(u<<8)+e[i+s];if(i+=2,0==c)break;if(u<216||u>=224)o[l]=String.fromCharCode(c);else{var h=e[i+a],d=e[i+s];i+=2,o[l]=String.fromCharCode(c,(h<<8)+d)}}return new n(o.join(""),i)},readUTF8String:function(e,t){var r=0;t=Math.min(t||e.length,e.length),239==e[0]&&187==e[1]&&191==e[2]&&(r=3);for(var i=[],a=0;r<t;a++){var s=e[r++];if(0==s)break;if(s<128)i[a]=String.fromCharCode(s);else if(s>=194&&s<224){var o=e[r++];i[a]=String.fromCharCode(((31&s)<<6)+(63&o))}else if(s>=224&&s<240){o=e[r++];var l=e[r++];i[a]=String.fromCharCode(((255&s)<<12)+((63&o)<<6)+(63&l))}else if(s>=240&&s<245){var u=((7&s)<<18)+((63&(o=e[r++]))<<12)+((63&(l=e[r++]))<<6)+(63&e[r++])-65536;i[a]=String.fromCharCode(55296+(u>>10),56320+(1023&u))}}return new n(i.join(""),r)},readNullTerminatedString:function(e,t){var r=[];t=t||e.length;for(var i=0;i<t;){var a=e[i++];if(0==a)break;r[i-1]=String.fromCharCode(a)}return new n(r.join(""),i)}}},{}],14:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=e("./ChunkedFileData"),i=e("./MediaFileReader"),a=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._url=e,r._fileData=new n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),r(t,[{key:"_init",value:function(e){t._config.avoidHeadRequests?this._fetchSizeWithGetRequest(e):this._fetchSizeWithHeadRequest(e)}},{key:"_fetchSizeWithHeadRequest",value:function(e){var t=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(r){var n=t._parseContentLength(r);n?(t._size=n,e.onSuccess()):t._fetchSizeWithGetRequest(e)},onError:e.onError})}},{key:"_fetchSizeWithGetRequest",value:function(e){var t=this,r=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",r,{onSuccess:function(r){var n=t._parseContentRange(r),i=t._getXhrResponseContent(r);if(n){if(null==n.instanceLength)return void t._fetchEntireFile(e);t._size=n.instanceLength}else t._size=i.length;t._fileData.addData(0,i),e.onSuccess()},onError:e.onError})}},{key:"_fetchEntireFile",value:function(e){var t=this;this._makeXHRRequest("GET",null,{onSuccess:function(r){var n=t._getXhrResponseContent(r);t._size=n.length,t._fileData.addData(0,n),e.onSuccess()},onError:e.onError})}},{key:"_getXhrResponseContent",value:function(e){return e.responseBody||e.responseText||""}},{key:"_parseContentLength",value:function(e){var t=this._getResponseHeader(e,"Content-Length");return null==t?t:parseInt(t,10)}},{key:"_parseContentRange",value:function(e){var t=this._getResponseHeader(e,"Content-Range");if(t){var r=t.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!r)throw new Error("FIXME: Unknown Content-Range syntax: "+t);return{firstBytePosition:parseInt(r[1],10),lastBytePosition:parseInt(r[2],10),instanceLength:r[3]?parseInt(r[3],10):null}}return null}},{key:"loadRange",value:function(e,t){var r=this;r._fileData.hasDataRange(e[0],Math.min(r._size,e[1]))?setTimeout(t.onSuccess,1):((e=this._roundRangeToChunkMultiple(e))[1]=Math.min(r._size,e[1]),this._makeXHRRequest("GET",e,{onSuccess:function(n){var i=r._getXhrResponseContent(n);r._fileData.addData(e[0],i),t.onSuccess()},onError:t.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(e){var t=1024*Math.ceil((e[1]-e[0]+1)/1024);return[e[0],e[0]+t-1]}},{key:"_makeXHRRequest",value:function(e,r,n){var i=this._createXHRObject();i.open(e,this._url);var a=function(){200===i.status||206===i.status?n.onSuccess(i):n.onError&&n.onError({type:"xhr",info:"Unexpected HTTP status "+i.status+".",xhr:i}),i=null};void 0!==i.onload?(i.onload=a,i.onerror=function(){n.onError&&n.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:i})}):i.onreadystatechange=function(){4===i.readyState&&a()},t._config.timeoutInSec&&(i.timeout=1e3*t._config.timeoutInSec,i.ontimeout=function(){n.onError&&n.onError({type:"xhr",info:"Timeout after "+i.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:i})}),i.overrideMimeType("text/plain; charset=x-user-defined"),r&&this._setRequestHeader(i,"Range","bytes="+r[0]+"-"+r[1]),this._setRequestHeader(i,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),i.send(null)}},{key:"_setRequestHeader",value:function(e,r,n){t._config.disallowedXhrHeaders.indexOf(r.toLowerCase())<0&&e.setRequestHeader(r,n)}},{key:"_hasResponseHeader",value:function(e,t){var r=e.getAllResponseHeaders();if(!r)return!1;for(var n=r.split("\r\n"),i=[],a=0;a<n.length;a++)i[a]=n[a].split(":")[0].toLowerCase();return i.indexOf(t.toLowerCase())>=0}},{key:"_getResponseHeader",value:function(e,t){return this._hasResponseHeader(e,t)?e.getResponseHeader(t):null}},{key:"getByteAt",value:function(e){return 255&this._fileData.getByteAt(e).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(e("xhr2").XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw new Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(e){return"string"==typeof e&&/^[a-z]+:\/\//i.test(e)}},{key:"setConfig",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this._config[t]=e[t]);for(var r=this._config.disallowedXhrHeaders,n=0;n<r.length;n++)r[n]=r[n].toLowerCase()}}]),t}();a._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},t.exports=a},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e("./MediaFileReader");var i=e("./NodeFileReader"),a=e("./XhrFileReader"),s=e("./BlobFileReader"),o=e("./ArrayFileReader"),l=(e("./MediaTagReader"),e("./ID3v1TagReader")),u=e("./ID3v2TagReader"),c=e("./MP4TagReader"),h=e("./FLACTagReader"),d=[],p=[];function f(e,t){return!(e.offset>=0&&e.offset+e.length>=t||e.offset<0&&(-e.offset>t||e.offset+e.length>0))}var m=function(){function e(t){n(this,e),this._file=t}return r(e,[{key:"setTagsToRead",value:function(e){return this._tagsToRead=e,this}},{key:"setFileReader",value:function(e){return this._fileReader=e,this}},{key:"setTagReader",value:function(e){return this._tagReader=e,this}},{key:"read",value:function(e){var t=new(this._getFileReader())(this._file),r=this;t.init({onSuccess:function(){r._getTagReader(t,{onSuccess:function(n){new n(t).setTagsToRead(r._tagsToRead).read(e)},onError:e.onError})},onError:e.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var e=0;e<d.length;e++)if(d[e].canReadFile(this._file))return d[e];throw new Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(e,t){if(this._tagReader){var r=this._tagReader;setTimeout(function(){t.onSuccess(r)},1)}else this._findTagReader(e,t)}},{key:"_findTagReader",value:function(e,t){for(var r=[],n=[],i=e.getSize(),a=0;a<p.length;a++){var s=p[a].getTagIdentifierByteRange();f(s,i)&&(s.offset>=0&&s.offset<i/2||s.offset<0&&s.offset<-i/2?r.push(p[a]):n.push(p[a]))}var o=!1,l={onSuccess:function(){if(o){for(var r=0;r<p.length;r++){var n=p[r].getTagIdentifierByteRange();if(f(n,i)){try{var a=e.getBytesAt(n.offset>=0?n.offset:n.offset+i,n.length)}catch(e){return void(t.onError&&t.onError({type:"fileReader",info:e.message}))}if(p[r].canReadTagFormat(a))return void t.onSuccess(p[r])}}t.onError&&t.onError({type:"tagFormat",info:"No suitable tag reader found"})}else o=!0},onError:t.onError};this._loadTagIdentifierRanges(e,r,l),this._loadTagIdentifierRanges(e,n,l)}},{key:"_loadTagIdentifierRanges",value:function(e,t,r){if(0!==t.length){for(var n=[Number.MAX_VALUE,0],i=e.getSize(),a=0;a<t.length;a++){var s=t[a].getTagIdentifierByteRange(),o=s.offset>=0?s.offset:s.offset+i,l=o+s.length-1;n[0]=Math.min(o,n[0]),n[1]=Math.max(l,n[1])}e.loadRange(n,r)}else setTimeout(r.onSuccess,1)}}]),e}(),g=function(){function e(){n(this,e)}return r(e,null,[{key:"addFileReader",value:function(t){return d.push(t),e}},{key:"addTagReader",value:function(t){return p.push(t),e}},{key:"removeTagReader",value:function(t){var r=p.indexOf(t);return r>=0&&p.splice(r,1),e}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){a.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(e){a.setConfig({disallowedXhrHeaders:e})}},{key:"setXhrTimeoutInSec",value:function(e){a.setConfig({timeoutInSec:e})}}]),e}();g.addFileReader(a).addFileReader(s).addFileReader(o).addTagReader(u).addTagReader(l).addTagReader(c).addTagReader(h),"undefined"==typeof process||process.browser||g.addFileReader(i),t.exports={read:function(e,t){new m(e).read(t)},Reader:m,Config:g}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)}),$=()=>{const e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e};const Y=1;function K(e){const t=$();return e.onerror=(r=>{"function"==typeof r.preventDefault&&r.preventDefault(),t.reject(e.error)}),e.onsuccess=(()=>t.resolve(e.result)),t.promise}class J{constructor(t){e(this,t),this._index=0,this.songChanged=a(this,"songChanged",7)}songChangedHandler(){this.songChanged.emit(this._index)}get url(){return window.location.origin+g(this.src)}async componentWillLoad(){const e=await function(e){const t=e;return new Promise((r,n)=>{const i=window.indexedDB.open(e,Y);i.onupgradeneeded=(()=>i.result.createObjectStore(t)),i.onblocked=(()=>n(new Error("onblocked"))),i.onerror=(()=>n(i.error)),i.onsuccess=(()=>{const e=i.result;r((r,n)=>(function({db:e,storeName:t,transactionType:r,fn:n}){return new Promise((i,a)=>{const s=e.transaction(t,r),o=s.objectStore(t),l=n(o),u=Array.isArray(l)?Promise.all(l.map(K)):K(l);s.onerror=(()=>a(s.error)),s.oncomplete=(()=>i(u))})})({db:e,storeName:t,transactionType:r,fn:n}))})})}("songs"),t=await e("readonly",e=>e.get(this.src));if(t){var r=JSON.parse(t);const n=await e("readonly",e=>e.get(r.album+"_picture"));r.picture=n,this.updateDetails(r)}else V.read(this.url,{onSuccess:async t=>{var r={title:t.tags.title,album:t.tags.album,genre:t.tags.genre,artist:t.tags.artist,picture:t.tags.picture};if(t.tags.picture){for(var n="",i=0;i<t.tags.picture.data.length;i++)n+=String.fromCharCode(t.tags.picture.data[i]);var a="data:image/jpeg;base64,"+window.btoa(n);r.picture=a,await e("readwrite",e=>e.put(a,r.album+"_picture"))}else r.picture=void 0;await e("readwrite",e=>e.put(JSON.stringify(r),this.src)),this.updateDetails(r)},onError:e=>{this.error=e}})}componentDidLoad(){this.player=this.element.parentElement}updateDetails(e){this.title=e.title,this.album=e.album,this.genre=e.genre,this.artist=e.artist,this.picture=e.picture}async details(){return{title:this.title,album:this.album,genre:this.genre,artist:this.artist,picture:this.picture}}async preload(){var e=new Audio;e.src=this.src,e.preload="auto",e.volume=1}async play(){this.playing||(this.songChangedHandler(),this.playing=!0,this.player.prepare(this.element),this.player.play())}async switching(){this.playing=!1}async getIndex(){return this._index}async setIndex(e){this._index=e}render(){return t("button",{onClick:()=>this.play()},t("span",{class:"index"},!this.playing&&y(this._index),this.playing&&t("stellar-asset",{name:"play"})),t("div",{class:"tracklisting"},this.artwork&&t("img",{src:this.picture,class:"preview-image"}),t("h2",null,t("span",null,this.title||"Loading...")," / ",this.artist||"Loading...")),t("img",{src:this.picture,class:"backdrop"}))}static get assetsDirs(){return["vendor"]}get element(){return n(this)}static get style(){return":host{display:block;width:100%;-ms-flex:0 0 100%;flex:0 0 100%}:host button{background:none;width:100%;border:0;outline:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-ms-flexbox;display:flex;padding:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;position:relative;overflow:hidden;border-top:1px solid var(--color-line)}:host button:focus,:host button:hover{background:var(--color-bg-active)}:host([playing]) button{background:var(--color-bg-playing)!important}:host .index{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:45px;width:55px;-ms-flex:0 0 55px;flex:0 0 55px;border-right:1px solid var(--color-line);font-size:.75rem;margin:0;margin-right:20px;text-transform:uppercase;color:var(--color-two);letter-spacing:.23em;z-index:1;font-weight:900}:host([playing]) .index{font-size:1.5rem}:host img.preview-image{width:2rem;height:2rem;display:inline-block;margin-right:10px;-webkit-transition:all .15s ease-in-out 0s;transition:all .15s ease-in-out 0s;-webkit-filter:grayscale(100%);filter:grayscale(100%);padding:0;background:#fff;border-radius:4px;z-index:1}:host([playing]) img.preview-image{-webkit-filter:grayscale(0);filter:grayscale(0)}:host h2{z-index:1;color:var(--color-four);font-size:14px;font-weight:400;margin:0;line-height:1;margin-top:-3px;white-space:nowrap}:host h2 span{color:var(--color-two)}:host .tracklisting{overflow:auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;height:46px}:host .tracklisting:after{content:\"\";display:block;width:30px;height:30px;-ms-flex:0 0 30px;flex:0 0 30px}:host img.backdrop{position:absolute;width:100%;-webkit-filter:blur(20px) grayscale(75%);filter:blur(20px) grayscale(75%);opacity:.15;z-index:0;mix-blend-mode:color}:host button[data-playing=true] img.preview-image{width:30px;height:30px;-webkit-filter:grayscale(0);filter:grayscale(0)}:host button[data-playing=true] img.backdrop{opacity:1}:host button[data-playing=true] .index,:host button[data-playing=true] h2 span{color:var(--color-three)!important}"}}var Q={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Z=function(e){return!(!e||!Q[typeof e])},ee=Object.prototype,te=RegExp("^"+String(ee.toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),re=Object.prototype.hasOwnProperty,ne=te.test(ne=Object.keys)&&ne,ie=ne?function(e){return Z(e)?ne(e):[]}:function(e){var t,r=e,n=[];if(!r)return n;if(!Q[typeof e])return n;for(t in r)re.call(r,t)&&n.push(t);return n},ae=te.test(ae=Object.create)&&ae;function se(e){return Z(e)?ae(e):{}}ae||(se=function(){function e(){}return function(t){if(Z(t)){e.prototype=t;var r=new e;e.prototype=null}return r||u.Object()}}());var oe=se,le={configurable:!1,enumerable:!1,value:null,writable:!1},ue=function(){try{var e={},t=te.test(t=Object.defineProperty)&&t,r=t(e,e,e)&&t}catch(e){}return r}(),ce=ue?function(e,t){le.value=t,ue(e,"__bindData__",le)}:function(){},he=[].push,de=function(e,t,r){t||(t=0),void 0===r&&(r=e?e.length:0);for(var n=-1,i=r-t||0,a=Array(i<0?0:i);++n<i;)a[n]=e[t+n];return a},pe=[].push,fe=[].push,me=function e(t,r,n,i,a,s){var o,l=1&r,u=4&r,c=16&r,h=32&r;if(!(2&r||(o=t,"function"==typeof o)))throw new TypeError;c&&!n.length&&(r&=-17,c=n=!1),h&&!i.length&&(r&=-33,h=i=!1);var d=t&&t.__bindData__;return d&&!0!==d?(d=d.slice(),!l||1&d[1]||(d[4]=a),!l&&1&d[1]&&(r|=8),!u||4&d[1]||(d[5]=s),c&&fe.apply(d[2]||(d[2]=[]),n),h&&fe.apply(d[3]||(d[3]=[]),i),d[1]|=r,e.apply(null,d)):(1==r||17===r?function(e){var t=e[0],r=e[2],n=e[4];function i(){if(r){var e=r.slice();he.apply(e,arguments)}if(this instanceof i){var a=oe(t.prototype),s=t.apply(a,e||arguments);return Z(s)?s:a}return t.apply(n,e||arguments)}return ce(i,e),i}:function e(t){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5],l=1&n,u=2&n,c=4&n,h=8&n,d=r;function p(){var t=l?s:this;if(i){var f=i.slice();pe.apply(f,arguments)}if((a||c)&&(f||(f=de(arguments)),a&&pe.apply(f,a),c&&f.length<o))return n|=16,e([r,h?n:-4&n,f,null,s,o]);if(f||(f=arguments),u&&(r=t[d]),this instanceof p){t=oe(r.prototype);var m=r.apply(t,f);return Z(m)?m:t}return r.apply(t,f)}return ce(p,t),p})([t,r,n,i,a,s])},ge=function(e){return e},ye={};ye.funcDecomp=!te.test(u.WinRTError)&&/\bthis\b/.test(function(){return this}),ye.funcNames="string"==typeof Function.name;var ve,_e=ye,be=/^\s*function[ \n\r\t]+\w/,Se=/\bthis\b/,we=Function.prototype.toString,Ee=function(e,t,r){if("function"!=typeof e)return ge;if(void 0===t||!("prototype"in e))return e;var n=e.__bindData__;if(void 0===n&&(_e.funcNames&&(n=!e.name),!(n=n||!_e.funcDecomp))){var i=we.call(e);_e.funcNames||(n=!be.test(i)),n||(n=Se.test(i),ce(e,n))}if(!1===n||!0!==n&&1&n[1])return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(e,t){return arguments.length>2?me(e,17,de(arguments,2),null,t):me(e,1,null,null,t)}(e,t)},Te=function(e,t,r){var n=-1,i=e?e.length:0;if(t=t&&void 0===r?t:Ee(t,r,3),"number"==typeof i)for(;++n<i&&!1!==t(e[n],n,e););else!function(e,t,r){var n,i=e,a=i;if(!i)return a;if(!Q[typeof i])return a;t=t&&void 0===r?t:Ee(t,r,3);for(var s=-1,o=Q[typeof i]&&ie(i),l=o?o.length:0;++s<l;)if(!1===t(i[n=o[s]],n,e))return a}(e,t);return e},Ce={length:{metric:{mm:{name:{singular:"Millimeter",plural:"Millimeters"},to_anchor:.001},cm:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:.01},m:{name:{singular:"Meter",plural:"Meters"},to_anchor:1},km:{name:{singular:"Kilometer",plural:"Kilometers"},to_anchor:1e3}},imperial:{in:{name:{singular:"Inch",plural:"Inches"},to_anchor:1/12},yd:{name:{singular:"Yard",plural:"Yards"},to_anchor:3},"ft-us":{name:{singular:"US Survey Foot",plural:"US Survey Feet"},to_anchor:1.000002},ft:{name:{singular:"Foot",plural:"Feet"},to_anchor:1},mi:{name:{singular:"Mile",plural:"Miles"},to_anchor:5280}},_anchors:{metric:{unit:"m",ratio:3.28084},imperial:{unit:"ft",ratio:1/3.28084}}},area:{metric:{mm2:{name:{singular:"Square Millimeter",plural:"Square Millimeters"},to_anchor:1e-6},cm2:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:1e-4},m2:{name:{singular:"Square Meter",plural:"Square Meters"},to_anchor:1},ha:{name:{singular:"Hectare",plural:"Hectares"},to_anchor:1e4},km2:{name:{singular:"Square Kilometer",plural:"Square Kilometers"},to_anchor:1e6}},imperial:{in2:{name:{singular:"Square Inch",plural:"Square Inches"},to_anchor:1/144},yd2:{name:{singular:"Square Yard",plural:"Square Yards"},to_anchor:9},ft2:{name:{singular:"Square Foot",plural:"Square Feet"},to_anchor:1},ac:{name:{singular:"Acre",plural:"Acres"},to_anchor:43560},mi2:{name:{singular:"Square Mile",plural:"Square Miles"},to_anchor:27878400}},_anchors:{metric:{unit:"m2",ratio:10.7639},imperial:{unit:"ft2",ratio:1/10.7639}}},mass:{metric:{mcg:{name:{singular:"Microgram",plural:"Micrograms"},to_anchor:1e-6},mg:{name:{singular:"Milligram",plural:"Milligrams"},to_anchor:.001},g:{name:{singular:"Gram",plural:"Grams"},to_anchor:1},kg:{name:{singular:"Kilogram",plural:"Kilograms"},to_anchor:1e3},mt:{name:{singular:"Metric Tonne",plural:"Metric Tonnes"},to_anchor:1e6}},imperial:{oz:{name:{singular:"Ounce",plural:"Ounces"},to_anchor:1/16},lb:{name:{singular:"Pound",plural:"Pounds"},to_anchor:1},t:{name:{singular:"Ton",plural:"Tons"},to_anchor:2e3}},_anchors:{metric:{unit:"g",ratio:1/453.592},imperial:{unit:"lb",ratio:453.592}}},volume:{metric:{mm3:{name:{singular:"Cubic Millimeter",plural:"Cubic Millimeters"},to_anchor:1e-6},cm3:{name:{singular:"Cubic Centimeter",plural:"Cubic Centimeters"},to_anchor:.001},ml:{name:{singular:"Millilitre",plural:"Millilitres"},to_anchor:.001},cl:{name:{singular:"Centilitre",plural:"Centilitres"},to_anchor:.01},dl:{name:{singular:"Decilitre",plural:"Decilitres"},to_anchor:.1},l:{name:{singular:"Litre",plural:"Litres"},to_anchor:1},kl:{name:{singular:"Kilolitre",plural:"Kilolitres"},to_anchor:1e3},m3:{name:{singular:"Cubic meter",plural:"Cubic meters"},to_anchor:1e3},km3:{name:{singular:"Cubic kilometer",plural:"Cubic kilometers"},to_anchor:1e12},krm:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:.001},tsk:{name:{singular:"Tesked",plural:"Teskedar"},to_anchor:.005},msk:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:.015},kkp:{name:{singular:"Kaffekopp",plural:"Kaffekoppar"},to_anchor:.15},glas:{name:{singular:"Glas",plural:"Glas"},to_anchor:.2},kanna:{name:{singular:"Kanna",plural:"Kannor"},to_anchor:2.617}},imperial:{tsp:{name:{singular:"Teaspoon",plural:"Teaspoons"},to_anchor:1/6},Tbs:{name:{singular:"Tablespoon",plural:"Tablespoons"},to_anchor:.5},in3:{name:{singular:"Cubic inch",plural:"Cubic inches"},to_anchor:.55411},"fl-oz":{name:{singular:"Fluid Ounce",plural:"Fluid Ounces"},to_anchor:1},cup:{name:{singular:"Cup",plural:"Cups"},to_anchor:8},pnt:{name:{singular:"Pint",plural:"Pints"},to_anchor:16},qt:{name:{singular:"Quart",plural:"Quarts"},to_anchor:32},gal:{name:{singular:"Gallon",plural:"Gallons"},to_anchor:128},ft3:{name:{singular:"Cubic foot",plural:"Cubic feet"},to_anchor:957.506},yd3:{name:{singular:"Cubic yard",plural:"Cubic yards"},to_anchor:25852.7}},_anchors:{metric:{unit:"l",ratio:33.8140226},imperial:{unit:"fl-oz",ratio:1/33.8140226}}},each:{metric:{ea:{name:{singular:"Each",plural:"Each"},to_anchor:1},dz:{name:{singular:"Dozen",plural:"Dozens"},to_anchor:12}},imperial:{},_anchors:{metric:{unit:"ea",ratio:1}}},temperature:{metric:{C:{name:{singular:"degree Celsius",plural:"degrees Celsius"},to_anchor:1,anchor_shift:0},K:{name:{singular:"degree Kelvin",plural:"degrees Kelvin"},to_anchor:1,anchor_shift:273.15}},imperial:{F:{name:{singular:"degree Fahrenheit",plural:"degrees Fahrenheit"},to_anchor:1},R:{name:{singular:"degree Rankine",plural:"degrees Rankine"},to_anchor:1,anchor_shift:459.67}},_anchors:{metric:{unit:"C",transform:function(e){return e/(5/9)+32}},imperial:{unit:"F",transform:function(e){return 5/9*(e-32)}}}},time:{metric:{ns:{name:{singular:"Nanosecond",plural:"Nanoseconds"},to_anchor:1e-9},mu:{name:{singular:"Microsecond",plural:"Microseconds"},to_anchor:1e-6},ms:{name:{singular:"Millisecond",plural:"Milliseconds"},to_anchor:.001},s:{name:{singular:"Second",plural:"Seconds"},to_anchor:1},min:{name:{singular:"Minute",plural:"Minutes"},to_anchor:60},h:{name:{singular:"Hour",plural:"Hours"},to_anchor:3600},d:{name:{singular:"Day",plural:"Days"},to_anchor:86400},week:{name:{singular:"Week",plural:"Weeks"},to_anchor:604800},month:{name:{singular:"Month",plural:"Months"},to_anchor:2629800},year:{name:{singular:"Year",plural:"Years"},to_anchor:31557600}},_anchors:{metric:{unit:"s",ratio:1}}},digital:{bits:{b:{name:{singular:"Bit",plural:"Bits"},to_anchor:1},Kb:{name:{singular:"Kilobit",plural:"Kilobits"},to_anchor:1024},Mb:{name:{singular:"Megabit",plural:"Megabits"},to_anchor:1048576},Gb:{name:{singular:"Gigabit",plural:"Gigabits"},to_anchor:1073741824},Tb:{name:{singular:"Terabit",plural:"Terabits"},to_anchor:1099511627776}},bytes:{B:{name:{singular:"Byte",plural:"Bytes"},to_anchor:1},KB:{name:{singular:"Kilobyte",plural:"Kilobytes"},to_anchor:1024},MB:{name:{singular:"Megabyte",plural:"Megabytes"},to_anchor:1048576},GB:{name:{singular:"Gigabyte",plural:"Gigabytes"},to_anchor:1073741824},TB:{name:{singular:"Terabyte",plural:"Terabytes"},to_anchor:1099511627776}},_anchors:{bits:{unit:"b",ratio:1/8},bytes:{unit:"B",ratio:8}}},partsPer:{metric:{ppm:{name:{singular:"Part-per Million",plural:"Parts-per Million"},to_anchor:1},ppb:{name:{singular:"Part-per Billion",plural:"Parts-per Billion"},to_anchor:.001},ppt:{name:{singular:"Part-per Trillion",plural:"Parts-per Trillion"},to_anchor:1e-6},ppq:{name:{singular:"Part-per Quadrillion",plural:"Parts-per Quadrillion"},to_anchor:1e-9}},imperial:{},_anchors:{metric:{unit:"ppm",ratio:1e-6}}},speed:{metric:{"m/s":{name:{singular:"Metre per second",plural:"Metres per second"},to_anchor:3.6},"km/h":{name:{singular:"Kilometre per hour",plural:"Kilometres per hour"},to_anchor:1}},imperial:{"m/h":{name:{singular:"Mile per hour",plural:"Miles per hour"},to_anchor:1},knot:{name:{singular:"Knot",plural:"Knots"},to_anchor:1.150779},"ft/s":{name:{singular:"Foot per second",plural:"Feet per second"},to_anchor:.681818}},_anchors:{metric:{unit:"km/h",ratio:1/1.609344},imperial:{unit:"m/h",ratio:1.609344}}},pace:{metric:{"min/km":{name:{singular:"Minute per kilometre",plural:"Minutes per kilometre"},to_anchor:.06},"s/m":{name:{singular:"Second per metre",plural:"Seconds per metre"},to_anchor:1}},imperial:{"min/mi":{name:{singular:"Minute per mile",plural:"Minutes per mile"},to_anchor:.0113636},"s/ft":{name:{singular:"Second per foot",plural:"Seconds per foot"},to_anchor:1}},_anchors:{metric:{unit:"s/m",ratio:.3048},imperial:{unit:"s/ft",ratio:1/.3048}}},pressure:{metric:{Pa:{name:{singular:"pascal",plural:"pascals"},to_anchor:.001},kPa:{name:{singular:"kilopascal",plural:"kilopascals"},to_anchor:1},MPa:{name:{singular:"megapascal",plural:"megapascals"},to_anchor:1e3},hPa:{name:{singular:"hectopascal",plural:"hectopascals"},to_anchor:.1},bar:{name:{singular:"bar",plural:"bar"},to_anchor:100},torr:{name:{singular:"torr",plural:"torr"},to_anchor:101325/76e4}},imperial:{psi:{name:{singular:"pound per square inch",plural:"pounds per square inch"},to_anchor:.001},ksi:{name:{singular:"kilopound per square inch",plural:"kilopound per square inch"},to_anchor:1}},_anchors:{metric:{unit:"kPa",ratio:.00014503768078},imperial:{unit:"psi",ratio:6894.76000045014}}},current:{metric:{A:{name:{singular:"Ampere",plural:"Amperes"},to_anchor:1},mA:{name:{singular:"Milliampere",plural:"Milliamperes"},to_anchor:.001},kA:{name:{singular:"Kiloampere",plural:"Kiloamperes"},to_anchor:1e3}},_anchors:{metric:{unit:"A",ratio:1}}},voltage:{metric:{V:{name:{singular:"Volt",plural:"Volts"},to_anchor:1},mV:{name:{singular:"Millivolt",plural:"Millivolts"},to_anchor:.001},kV:{name:{singular:"Kilovolt",plural:"Kilovolts"},to_anchor:1e3}},_anchors:{metric:{unit:"V",ratio:1}}},power:{metric:{W:{name:{singular:"Watt",plural:"Watts"},to_anchor:1},mW:{name:{singular:"Milliwatt",plural:"Milliwatts"},to_anchor:.001},kW:{name:{singular:"Kilowatt",plural:"Kilowatts"},to_anchor:1e3},MW:{name:{singular:"Megawatt",plural:"Megawatts"},to_anchor:1e6},GW:{name:{singular:"Gigawatt",plural:"Gigawatts"},to_anchor:1e9}},_anchors:{metric:{unit:"W",ratio:1}}},reactivePower:{metric:{VAR:{name:{singular:"Volt-Ampere Reactive",plural:"Volt-Amperes Reactive"},to_anchor:1},mVAR:{name:{singular:"Millivolt-Ampere Reactive",plural:"Millivolt-Amperes Reactive"},to_anchor:.001},kVAR:{name:{singular:"Kilovolt-Ampere Reactive",plural:"Kilovolt-Amperes Reactive"},to_anchor:1e3},MVAR:{name:{singular:"Megavolt-Ampere Reactive",plural:"Megavolt-Amperes Reactive"},to_anchor:1e6},GVAR:{name:{singular:"Gigavolt-Ampere Reactive",plural:"Gigavolt-Amperes Reactive"},to_anchor:1e9}},_anchors:{metric:{unit:"VAR",ratio:1}}},apparentPower:{metric:{VA:{name:{singular:"Volt-Ampere",plural:"Volt-Amperes"},to_anchor:1},mVA:{name:{singular:"Millivolt-Ampere",plural:"Millivolt-Amperes"},to_anchor:.001},kVA:{name:{singular:"Kilovolt-Ampere",plural:"Kilovolt-Amperes"},to_anchor:1e3},MVA:{name:{singular:"Megavolt-Ampere",plural:"Megavolt-Amperes"},to_anchor:1e6},GVA:{name:{singular:"Gigavolt-Ampere",plural:"Gigavolt-Amperes"},to_anchor:1e9}},_anchors:{metric:{unit:"VA",ratio:1}}},energy:{metric:{Wh:{name:{singular:"Watt-hour",plural:"Watt-hours"},to_anchor:3600},mWh:{name:{singular:"Milliwatt-hour",plural:"Milliwatt-hours"},to_anchor:3.6},kWh:{name:{singular:"Kilowatt-hour",plural:"Kilowatt-hours"},to_anchor:36e5},MWh:{name:{singular:"Megawatt-hour",plural:"Megawatt-hours"},to_anchor:36e8},GWh:{name:{singular:"Gigawatt-hour",plural:"Gigawatt-hours"},to_anchor:36e11},J:{name:{singular:"Joule",plural:"Joules"},to_anchor:1},kJ:{name:{singular:"Kilojoule",plural:"Kilojoules"},to_anchor:1e3}},_anchors:{metric:{unit:"J",ratio:1}}},reactiveEnergy:{metric:{VARh:{name:{singular:"Volt-Ampere Reactive Hour",plural:"Volt-Amperes Reactive Hour"},to_anchor:1},mVARh:{name:{singular:"Millivolt-Ampere Reactive Hour",plural:"Millivolt-Amperes Reactive Hour"},to_anchor:.001},kVARh:{name:{singular:"Kilovolt-Ampere Reactive Hour",plural:"Kilovolt-Amperes Reactive Hour"},to_anchor:1e3},MVARh:{name:{singular:"Megavolt-Ampere Reactive Hour",plural:"Megavolt-Amperes Reactive Hour"},to_anchor:1e6},GVARh:{name:{singular:"Gigavolt-Ampere Reactive Hour",plural:"Gigavolt-Amperes Reactive Hour"},to_anchor:1e9}},_anchors:{metric:{unit:"VARh",ratio:1}}},volumeFlowRate:{metric:{"mm3/s":{name:{singular:"Cubic Millimeter per second",plural:"Cubic Millimeters per second"},to_anchor:1e-6},"cm3/s":{name:{singular:"Cubic Centimeter per second",plural:"Cubic Centimeters per second"},to_anchor:.001},"ml/s":{name:{singular:"Millilitre per second",plural:"Millilitres per second"},to_anchor:.001},"cl/s":{name:{singular:"Centilitre per second",plural:"Centilitres per second"},to_anchor:.01},"dl/s":{name:{singular:"Decilitre per second",plural:"Decilitres per second"},to_anchor:.1},"l/s":{name:{singular:"Litre per second",plural:"Litres per second"},to_anchor:1},"l/min":{name:{singular:"Litre per minute",plural:"Litres per minute"},to_anchor:1/60},"l/h":{name:{singular:"Litre per hour",plural:"Litres per hour"},to_anchor:1/3600},"kl/s":{name:{singular:"Kilolitre per second",plural:"Kilolitres per second"},to_anchor:1e3},"kl/min":{name:{singular:"Kilolitre per minute",plural:"Kilolitres per minute"},to_anchor:50/3},"kl/h":{name:{singular:"Kilolitre per hour",plural:"Kilolitres per hour"},to_anchor:5/18},"m3/s":{name:{singular:"Cubic meter per second",plural:"Cubic meters per second"},to_anchor:1e3},"m3/min":{name:{singular:"Cubic meter per minute",plural:"Cubic meters per minute"},to_anchor:50/3},"m3/h":{name:{singular:"Cubic meter per hour",plural:"Cubic meters per hour"},to_anchor:5/18},"km3/s":{name:{singular:"Cubic kilometer per second",plural:"Cubic kilometers per second"},to_anchor:1e12}},imperial:{"tsp/s":{name:{singular:"Teaspoon per second",plural:"Teaspoons per second"},to_anchor:1/6},"Tbs/s":{name:{singular:"Tablespoon per second",plural:"Tablespoons per second"},to_anchor:.5},"in3/s":{name:{singular:"Cubic inch per second",plural:"Cubic inches per second"},to_anchor:.55411},"in3/min":{name:{singular:"Cubic inch per minute",plural:"Cubic inches per minute"},to_anchor:.55411/60},"in3/h":{name:{singular:"Cubic inch per hour",plural:"Cubic inches per hour"},to_anchor:.55411/3600},"fl-oz/s":{name:{singular:"Fluid Ounce per second",plural:"Fluid Ounces per second"},to_anchor:1},"fl-oz/min":{name:{singular:"Fluid Ounce per minute",plural:"Fluid Ounces per minute"},to_anchor:1/60},"fl-oz/h":{name:{singular:"Fluid Ounce per hour",plural:"Fluid Ounces per hour"},to_anchor:1/3600},"cup/s":{name:{singular:"Cup per second",plural:"Cups per second"},to_anchor:8},"pnt/s":{name:{singular:"Pint per second",plural:"Pints per second"},to_anchor:16},"pnt/min":{name:{singular:"Pint per minute",plural:"Pints per minute"},to_anchor:4/15},"pnt/h":{name:{singular:"Pint per hour",plural:"Pints per hour"},to_anchor:1/225},"qt/s":{name:{singular:"Quart per second",plural:"Quarts per second"},to_anchor:32},"gal/s":{name:{singular:"Gallon per second",plural:"Gallons per second"},to_anchor:128},"gal/min":{name:{singular:"Gallon per minute",plural:"Gallons per minute"},to_anchor:32/15},"gal/h":{name:{singular:"Gallon per hour",plural:"Gallons per hour"},to_anchor:8/225},"ft3/s":{name:{singular:"Cubic foot per second",plural:"Cubic feet per second"},to_anchor:957.506},"ft3/min":{name:{singular:"Cubic foot per minute",plural:"Cubic feet per minute"},to_anchor:957.506/60},"ft3/h":{name:{singular:"Cubic foot per hour",plural:"Cubic feet per hour"},to_anchor:957.506/3600},"yd3/s":{name:{singular:"Cubic yard per second",plural:"Cubic yards per second"},to_anchor:25852.7},"yd3/min":{name:{singular:"Cubic yard per minute",plural:"Cubic yards per minute"},to_anchor:25852.7/60},"yd3/h":{name:{singular:"Cubic yard per hour",plural:"Cubic yards per hour"},to_anchor:25852.7/3600}},_anchors:{metric:{unit:"l/s",ratio:33.8140227},imperial:{unit:"fl-oz/s",ratio:1/33.8140227}}},illuminance:{metric:{lx:{name:{singular:"Lux",plural:"Lux"},to_anchor:1}},imperial:{"ft-cd":{name:{singular:"Foot-candle",plural:"Foot-candles"},to_anchor:1}},_anchors:{metric:{unit:"lx",ratio:1/10.76391},imperial:{unit:"ft-cd",ratio:10.76391}}},frequency:{metric:{mHz:{name:{singular:"millihertz",plural:"millihertz"},to_anchor:.001},Hz:{name:{singular:"hertz",plural:"hertz"},to_anchor:1},kHz:{name:{singular:"kilohertz",plural:"kilohertz"},to_anchor:1e3},MHz:{name:{singular:"megahertz",plural:"megahertz"},to_anchor:1e6},GHz:{name:{singular:"gigahertz",plural:"gigahertz"},to_anchor:1e9},THz:{name:{singular:"terahertz",plural:"terahertz"},to_anchor:1e12},rpm:{name:{singular:"rotation per minute",plural:"rotations per minute"},to_anchor:1/60},"deg/s":{name:{singular:"degree per second",plural:"degrees per second"},to_anchor:1/360},"rad/s":{name:{singular:"radian per second",plural:"radians per second"},to_anchor:1/(2*Math.PI)}},_anchors:{frequency:{unit:"hz",ratio:1}}},angle:{metric:{rad:{name:{singular:"radian",plural:"radians"},to_anchor:180/Math.PI},deg:{name:{singular:"degree",plural:"degrees"},to_anchor:1},grad:{name:{singular:"gradian",plural:"gradians"},to_anchor:.9},arcmin:{name:{singular:"arcminute",plural:"arcminutes"},to_anchor:1/60},arcsec:{name:{singular:"arcsecond",plural:"arcseconds"},to_anchor:1/3600}},_anchors:{metric:{unit:"deg",ratio:1}}}};(ve=function(e,t){this.val=t?e/t:e}).prototype.from=function(e){if(this.destination)throw new Error(".from must be called before .to");return this.origin=this.getUnit(e),this.origin||this.throwUnsupportedUnitError(e),this},ve.prototype.to=function(e){if(!this.origin)throw new Error(".to must be called after .from");var t,r;if(this.destination=this.getUnit(e),this.destination||this.throwUnsupportedUnitError(e),this.origin.abbr===this.destination.abbr)return this.val;if(this.destination.measure!=this.origin.measure)throw new Error("Cannot convert incompatible measures of "+this.destination.measure+" and "+this.origin.measure);return t=this.val*this.origin.unit.to_anchor,this.origin.unit.anchor_shift&&(t-=this.origin.unit.anchor_shift),this.origin.system!=this.destination.system&&("function"==typeof(r=Ce[this.origin.measure]._anchors[this.origin.system].transform)?t=r(t):t*=Ce[this.origin.measure]._anchors[this.origin.system].ratio),this.destination.unit.anchor_shift&&(t+=this.destination.unit.anchor_shift),t/this.destination.unit.to_anchor},ve.prototype.toBest=function(e){if(!this.origin)throw new Error(".toBest must be called after .from");var t;return e=Object.assign({exclude:[],cutOffNumber:1},e),Te(this.possibilities(),function(r){var n=this.describe(r);if(-1===e.exclude.indexOf(r)&&n.system===this.origin.system){var i=this.to(r);(!t||i>=e.cutOffNumber&&i<t.val)&&(t={val:i,unit:r,singular:n.singular,plural:n.plural})}}.bind(this)),t},ve.prototype.getUnit=function(e){var t;return Te(Ce,function(r,n){if(Te(r,function(r,i){return"_anchors"!=i&&(Te(r,function(r,a){if(a==e)return t={abbr:e,measure:n,system:i,unit:r},!1}),!t&&void 0)}),t)return!1}),t};var Ae=function(e){return{abbr:e.abbr,measure:e.measure,system:e.system,singular:e.unit.name.singular,plural:e.unit.name.plural}};ve.prototype.describe=function(e){var t=ve.prototype.getUnit(e),r=null;try{r=Ae(t)}catch(t){this.throwUnsupportedUnitError(e)}return r},ve.prototype.list=function(e){var t=[];return Te(Ce,function(r,n){e&&e!==n||Te(r,function(e,r){if("_anchors"==r)return!1;Te(e,function(e,i){t=t.concat(Ae({abbr:i,measure:n,system:r,unit:e}))})})}),t},ve.prototype.throwUnsupportedUnitError=function(e){var t=[];throw Te(Ce,function(e){Te(e,function(e,r){if("_anchors"==r)return!1;t=t.concat(ie(e))})}),new Error("Unsupported unit "+e+", use one of: "+t.join(", "))},ve.prototype.possibilities=function(e){var t=[];return this.origin||e?Te(Ce[e=e||this.origin.measure],function(e,r){if("_anchors"==r)return!1;t=t.concat(ie(e))}):Te(ie(Ce),function(e){Te(Ce[e],function(e,r){if("_anchors"==r)return!1;t=t.concat(ie(e))})}),t},ve.prototype.measures=function(){return ie(Ce)};var Me=function(e){return new ve(e)};function Ie(e,t,r){if("number"!=typeof t)throw new TypeError("Expected value to be a number");if(!Number.isInteger(r))throw new TypeError("Expected precision to be an integer");const n="round"===e&&t<0;n&&(t=Math.abs(t));let[i,a]=`${t}e`.split("e"),s=Math[e](`${i}e${Number(a)+r}`);return[i,a]=`${s}e`.split("e"),s=Number(`${i}e${Number(a)-r}`),n&&(s=-s),s}var Re=Ie.bind(null,"round"),ke=Ie.bind(null,"ceil"),De=Ie.bind(null,"floor");Re.up=ke,Re.down=De;class Oe{constructor(t){e(this,t),this.value=1e3,this.from="B",this.to="KB",this.round=!1,this.decimals=2}render(){return Re(Me(this.value).from(this.from).to(this.to),this.decimals)+" "+this.to}static get style(){return"stellar-unit{display:inline-block}"}}class Pe{constructor(t){e(this,t),this.trackInView=!0,this.preload="auto",this.autoplay=!1,this.muted=!1,this.playsinline=!1,this.controls=!0,this.duration=0,this.startTime=0,this.pausedTime=0,this.currentTime=0,this.playing=!1,this.timeupdate=a(this,"timeupdate",7),this.played=a(this,"played",7),this.paused=a(this,"paused",7),this.loaded=a(this,"loaded",7)}componentDidLoad(){this.video_tag=this.element.querySelector("video"),this.video_tag.onplay=(()=>{this.playing=!0,this.played.emit(this.eventData)}),this.video_tag.onpause=(()=>{this.playing=!1,this.pausedTime=this.video_tag.currentTime,this.paused.emit(this.eventData)}),this.video_tag.onloadedmetadata=(()=>{this.setDimensions(),this.duration=this.video_tag.duration,this.loaded.emit(this.eventData)}),this.trackInView&&this.addIntersectionObserver()}get eventData(){return{playing:this.playing,currentTime:this.currentTime,pausedTime:this.pausedTime,startTime:this.startTime,duration:this.duration}}startInterval(){this.playing?this.interval=setInterval(()=>{this.currentTime=this.video_tag.currentTime,this.timeupdate.emit(this.eventData)},30):clearInterval(this.interval)}setDimensions(){this.width=this.width?this.width:this.video_tag.videoWidth,this.height=this.height?this.height:this.video_tag.videoHeight,c.set({"--width":`${this.width}`,"--height":`${this.height}`,"--aspect-ratio":`${this.height/this.width*100}%`},this.element)}addIntersectionObserver(){"IntersectionObserver"in window?(this.io=new IntersectionObserver(e=>{e[0].isIntersecting?this.handleInScreen():this.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element.querySelector("video"))):setTimeout(()=>{this.handleInScreen()},300)}handleInScreen(){this.video_tag.play()}handleOffScreen(){this.video_tag.currentTime=0,this.video_tag.pause()}async getDuration(){return this.video_tag.duration}async play(){this.video_tag.play()}async pause(){this.video_tag.pause()}async toggle(){this.video_tag.paused?this.play():this.pause()}async stop(){this.skipTo(0),this.video_tag.pause()}async skipTo(e){await this.pause(),this.video_tag.currentTime=1e3*e,await this.play()}render(){return t("video",{preload:this.preload,width:this.width,height:this.height,autoplay:this.autoplay,muted:this.muted,playsinline:this.playsinline,poster:this.poster,controls:this.controls},t("slot",null))}get element(){return n(this)}static get watchers(){return{playing:["startInterval"]}}static get style(){return"stellar-video{display:block;width:100%;height:0;position:relative;overflow:hidden;padding-bottom:var(--aspect-ratio)}stellar-video:after,stellar-video video{width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0}stellar-video:after{content:\"\";display:block;pointer-events:none;z-index:2;mix-blend-mode:color}stellar-video[overlay]:after{background:linear-gradient(35deg,var(--theme-complement5),var(--theme-base5) 40%,var(--theme-complement5));mix-blend-mode:color}\@media not all and (min-resolution:.001dpcm){\@media{stellar-video[overlay]:after{mix-blend-mode:hard-light;opacity:.5}}}"}}class Le{constructor(t){e(this,t),this.randomId=Math.floor(6*Math.random())+1,this.color="white",this.width=800,this.height=800,this.aspectRatio=100,this.visualization="bars2",this.loaded=!1,this.loading=!1,this.duration=0,this.current=0,this.visible=!1,this.cache=new WeakMap}componentWillLoad(){c.set({"--width":`${this.width}px`,"--height":`${this.height}px`,"--aspectRatio":`${this.aspectRatio}%`},this.element)}async componentDidLoad(){this.interviewLines||(this.interviewLines=G(this.element)),z(this.interviewLines,this.cache,this.time),this.visualizer=this.element.querySelector("web-audio-visualizer"),this.video=this.element.querySelector("stellar-video"),this.addIntersectionObserver()}addIntersectionObserver(){"IntersectionObserver"in window&&(this.io=new IntersectionObserver(e=>{e[0].isIntersecting?this.handleInScreen():this.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))}handleTimeUpdate(e){this.current=Math.round(1e3*e.detail.currentTime),this.duration=Math.round(1e3*e.detail.duration),z(this.interviewLines,this.cache,this.time)}get time(){return this.current}async handleInScreen(){await p(1e3),this.visible=!0,await p(100),this.visualizer=this.element.querySelector("web-audio-visualizer"),this.video=this.element.querySelector("stellar-video")}async attachContext(){if(!this.context){this.context=new AudioContext;const e=this.context.createMediaElementSource(this.video.video_tag);this.visualizer||(this.visualizer=this.element.querySelector("web-audio-visualizer"));const t=await this.visualizer.connect(this.context);await e.connect(t.analyser),t.analyser.connect(this.context.destination)}}async handleOffScreen(){this.pause()}async play(){this.video&&await this.video.play()}async skipTo(e){this.video&&await this.video.skipTo(e)}async pause(){this.video&&await this.video.pause()}async toggle(){this.video&&await this.video.toggle()}async handlePlay(){await this.handleInScreen(),await this.attachContext(),this.playing=!0}handleClick(){this.toggle(),this.current===this.duration&&this.skipTo(0)}handleCurrentClick(){_.copyPlain(this.current)}render(){return t("div",{class:"card",onDblClick:()=>{this.handleClick()}},!this.visible&&t("div",null,t("skeleton-img",{width:"1050",height:"600",loading:!0})),this.visible&&t("section",null,t("stellar-video",{controls:!1,autoplay:!0,trackInView:!1,onPlayed:()=>{this.handlePlay()},onPaused:()=>{this.playing=!1},onTimeupdate:e=>{this.handleTimeUpdate(e)}},t("source",{src:this.src})),t("div",{class:"transcript"},t("slot",{name:"transcript"})),this.video&&t("web-audio-visualizer",{for:`interview-${this.randomId}`,type:this.visualization,width:"1024",height:"1024",color:this.color,tag:this.video.video_tag}),t("button",{class:this.loading?"loading button":this.playing?"playing button":"button",onClick:()=>{this.handleClick()}},t("stellar-asset",{name:this.loading?"sync":this.playing?"pause":"play",class:this.loading?"animation-spin":""})),t("h3",null,t("stellar-unit",{class:"current",value:this.current,from:"ms",to:"s",onClick:()=>{this.handleCurrentClick()}})),t("h3",null,t("stellar-unit",{class:"duration",value:this.duration,from:"ms",to:"s"})),t("stellar-progress",{value:this.current,max:this.duration,noease:!0,blurable:!1,slender:!0,editable:!0,onValueChange:e=>{this.skipTo(e.detail.value)}})))}get element(){return n(this)}static get style(){return"stellar-video-interview{--width:800px;--height:800px;display:block}stellar-video-interview div.card{position:relative;display:block;width:auto;height:auto;margin:auto;overflow:hidden}stellar-video-interview div.card section{height:inherit;display:block;position:relative;padding-top:0!important}stellar-video-interview web-audio-visualizer{position:absolute;top:auto;left:0;right:0;bottom:0;width:100%;height:60%;pointer-events:none;z-index:2}stellar-video-interview web-audio-visualizer[type=circle]{height:100%}stellar-video-interview web-audio-visualizer[type=bars2]{width:80%;left:10%;right:10%}stellar-video-interview stellar-360-image,stellar-video-interview stellar-360-video,stellar-video-interview stellar-image,stellar-video-interview stellar-video{--gradient:radial-gradient(circle at 30% 107%,var(--theme-base5) 0%,var(--theme-base8) 5%,var(--theme-complement8) 45%,var(--theme-complement5) 60%,var(--theme-base5) 90%);position:relative;z-index:1;display:block}stellar-video-interview stellar-progress{position:absolute;top:0;left:0;width:100%;z-index:9;--border-radius:0}stellar-video-interview stellar-progress .progress{border:0}stellar-video-interview h3{color:#fff}stellar-video-interview stellar-unit{position:absolute;bottom:1rem;z-index:2;color:#fff!important;font-weight:700}stellar-video-interview stellar-unit.current{left:1rem}stellar-video-interview stellar-unit.duration{right:1rem}stellar-video-interview .transcript{position:absolute;bottom:0;width:70%;left:15%;z-index:5;pointer-events:none}stellar-video-interview .button{position:absolute;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;width:9rem;height:9rem;top:50%;right:50%;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);border-radius:100%;padding:0;border:0;z-index:3;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;text-align:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;z-index:4;outline:0;cursor:pointer;padding-left:1rem;mix-blend-mode:soft-light}stellar-video-interview .button:focus,stellar-video-interview .button:hover{-webkit-transform:translate(50%,-50%) scale(1.1);transform:translate(50%,-50%) scale(1.1);mix-blend-mode:hard-light}stellar-video-interview .button stellar-asset{font-size:7rem;margin:auto;display:block}stellar-video-interview .button.loading{padding:0}stellar-video-interview .button.playing{width:2.8rem;height:2.8rem;top:2.2rem;right:1.8rem;padding:0;background:transparent;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s}stellar-video-interview .button.playing stellar-asset{font-size:2.8rem}"}}class xe{constructor(t){e(this,t),this.unsubscribe=(()=>{}),this.activeClass="link-active",this.exact=!1,this.strict=!0,this.custom="a",this.match=null}componentWillLoad(){this.computeMatch()}computeMatch(){this.location&&(this.match=S(this.location.pathname,{path:this.urlMatch||this.url,exact:this.exact,strict:this.strict}))}handleClick(e){var t,r;if(!w(e)&&this.history&&this.url&&this.root)return e.preventDefault(),this.history.push((r=this.root,"/"==(t=this.url).charAt(0)&&"/"==r.charAt(r.length-1)?r.slice(0,r.length-1)+t:r+t))}render(){let e={class:{[this.activeClass]:null!==this.match},onClick:this.handleClick.bind(this)};return this.anchorClass&&(e.class[this.anchorClass]=!0),"a"===this.custom&&(e=Object.assign({},e,{href:this.url,title:this.anchorTitle,role:this.anchorRole,tabindex:this.anchorTabIndex,"aria-haspopup":this.ariaHaspopup,id:this.anchorId,"aria-posinset":this.ariaPosinset,"aria-setsize":this.ariaSetsize,"aria-label":this.ariaLabel})),t(this.custom,Object.assign({},e),t("slot",null))}get el(){return n(this)}static get watchers(){return{location:["computeMatch"]}}}E.injectProps(xe,["history","location","root"]);class Ne{constructor(e,t,r){this.loadBuffer=function(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer";var n=this;r.onload=function(){n.context.decodeAudioData(r.response,function(r){r?(n.bufferList[t]=r,++n.loadCount==n.urlList.length&&n.onload(n.bufferList)):alert("error decoding file data: "+e)},function(e){console.error("decodeAudioData error",e)})},r.onerror=function(){alert("BufferLoader: XHR error")},r.send()},this.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)},this.context=e,this.urlList=t,this.onload=r,this.bufferList=new Array,this.loadCount=0}}var Be=s(function(e){!function(t){function r(){if(r.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");r.prototype._singleton=this,this._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}function n(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function i(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}var a=new r;r.prototype.enable=function(e,t){return this.enabled?void 0:this.supported?void navigator.requestMIDIAccess({sysex:t}).then(function(t){function r(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof e&&e.call(this),i.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}var n,i=[],a=[];this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){i.push(e)};for(var s=t.inputs.values(),o=s.next();o&&!o.done;o=s.next())a.push(o.value.open());for(var l=t.outputs.values(),u=l.next();u&&!u.done;u=l.next())a.push(u.value.open());n=setTimeout(r.bind(this),200),Promise&&Promise.all(a).catch(function(){}).then(r.bind(this))}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):void("function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},r.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._resetInterfaceUserHandlers()},r.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(this._midiInterfaceEvents.indexOf(e)>=0))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},r.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(this._midiInterfaceEvents.indexOf(e)>=0))throw new TypeError("The specified event type is not supported.");for(var r=0;r<this._userHandlers[e].length;r++)if(this._userHandlers[e][r]===t)return!0;return!1},r.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(this._midiInterfaceEvents.indexOf(e)>=0)if(t)for(var r=0;r<this._userHandlers[e].length;r++)this._userHandlers[e][r]===t&&this._userHandlers[e].splice(r,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},r.prototype.toMIDIChannels=function(e){var t;return(t="all"===e||void 0===e?["all"]:Array.isArray(e)?e:[e]).indexOf("all")>-1&&(t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),t.map(function(e){return parseInt(e)}).filter(function(e){return e>=1&&16>=e})},r.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},r.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},r.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},r.prototype.getOctave=function(e){return null!=e&&e>=0&&127>=e?Math.floor(Math.floor(e)/12-1)+Math.floor(a.octaveOffset):void 0},r.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},r.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&e>=0&&127>=e?t=Math.round(e):parseInt(e)>=0&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},r.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var r=a._semitones[t[1].toUpperCase()],n=12*(parseInt(t[3])+1-Math.floor(a.octaveOffset))+r;if(t[2].toLowerCase().indexOf("b")>-1?n-=t[2].length:t[2].toLowerCase().indexOf("#")>-1&&(n+=t[2].length),0>n||n>127)throw new RangeError("Invalid note name or note outside valid range.");return n},r.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},r.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,r=this.interface.inputs.values(),i=r.next();i&&!i.done;i=r.next())if(this._inputs[e]._midiInput===i.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,r=0;r<this._inputs.length;r++)this._inputs[r]._midiInput===e&&(t=!1);t&&this._inputs.push(new n(e))}.bind(this))},r.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,r=this.interface.outputs.values(),n=r.next();n&&!n.done;n=r.next())if(this._outputs[e]._midiOutput===n.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,r=0;r<this._outputs.length;r++)this._outputs[r]._midiOutput===e&&(t=!1);t&&this._outputs.push(new i(e))}.bind(this))},r.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach(function(e){e(t)})},r.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},n.prototype.on=n.prototype.addListener=function(e,t,r){var n=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach(function(e){if("all"!==e&&!(e>=1&&16>=e))throw new RangeError("The 'channel' parameter is invalid.")}),"function"!=typeof r)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==a.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(r);else{if(void 0===a.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(t.indexOf("all")>-1){t=[];for(var i=1;16>=i;i++)t.push(i)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach(function(t){n._userHandlers.channel[e][t]||(n._userHandlers.channel[e][t]=[]),n._userHandlers.channel[e][t].push(r)})}return this},n.prototype.hasListener=function(e,t,r){var n=this;if("function"!=typeof r)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==a.MIDI_SYSTEM_MESSAGES[e]){for(var i=0;i<this._userHandlers.system[e].length;i++)if(this._userHandlers.system[e][i]===r)return!0}else if(void 0!==a.MIDI_CHANNEL_MESSAGES[e]){if(t.indexOf("all")>-1){t=[];for(var s=1;16>=s;s++)t.push(s)}return!!this._userHandlers.channel[e]&&t.every(function(t){var i=n._userHandlers.channel[e][t];return i&&i.indexOf(r)>-1})}return!1},n.prototype.removeListener=function(e,t,r){var n=this;if(void 0!==r&&"function"!=typeof r)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==a.MIDI_SYSTEM_MESSAGES[e])if(void 0===r)this._userHandlers.system[e]=[];else for(var i=0;i<this._userHandlers.system[e].length;i++)this._userHandlers.system[e][i]===r&&this._userHandlers.system[e].splice(i,1);else if(void 0!==a.MIDI_CHANNEL_MESSAGES[e]){if(t.indexOf("all")>-1){t=[];for(var s=1;16>=s;s++)t.push(s)}if(!this._userHandlers.channel[e])return this;t.forEach(function(t){var i=n._userHandlers.channel[e][t];if(i)if(void 0===r)n._userHandlers.channel[e][t]=[];else for(var a=0;a<i.length;a++)i[a]===r&&i.splice(a,1)})}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},n.prototype._initializeUserHandlers=function(){for(var e in a.MIDI_CHANNEL_MESSAGES)a.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in a.MIDI_SYSTEM_MESSAGES)a.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},n.prototype._onMidiMessage=function(e){if(this._userHandlers.system.midimessage.length>0){var t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(e){e(t)})}e.data[0]<240?this._parseChannelEvent(e):e.data[0]<=255&&this._parseSystemEvent(e)},n.prototype._parseChannelEvent=function(e){var t,r,n=e.data[0]>>4,i=1+(15&e.data[0]);e.data.length>1&&(t=e.data[1],r=e.data.length>2?e.data[2]:void 0);var s={target:this,data:e.data,timestamp:e.timeStamp,channel:i};n===a.MIDI_CHANNEL_MESSAGES.noteoff||n===a.MIDI_CHANNEL_MESSAGES.noteon&&0===r?(s.type="noteoff",s.note={number:t,name:a._notes[t%12],octave:a.getOctave(t)},s.velocity=r/127,s.rawVelocity=r):n===a.MIDI_CHANNEL_MESSAGES.noteon?(s.type="noteon",s.note={number:t,name:a._notes[t%12],octave:a.getOctave(t)},s.velocity=r/127,s.rawVelocity=r):n===a.MIDI_CHANNEL_MESSAGES.keyaftertouch?(s.type="keyaftertouch",s.note={number:t,name:a._notes[t%12],octave:a.getOctave(t)},s.value=r/127):n===a.MIDI_CHANNEL_MESSAGES.controlchange&&t>=0&&119>=t?(s.type="controlchange",s.controller={number:t,name:this.getCcNameByNumber(t)},s.value=r):n===a.MIDI_CHANNEL_MESSAGES.channelmode&&t>=120&&127>=t?(s.type="channelmode",s.controller={number:t,name:this.getChannelModeByNumber(t)},s.value=r):n===a.MIDI_CHANNEL_MESSAGES.programchange?(s.type="programchange",s.value=t):n===a.MIDI_CHANNEL_MESSAGES.channelaftertouch?(s.type="channelaftertouch",s.value=t/127):n===a.MIDI_CHANNEL_MESSAGES.pitchbend?(s.type="pitchbend",s.value=((r<<7)+t-8192)/8192):s.type="unknownchannelmessage",this._userHandlers.channel[s.type]&&this._userHandlers.channel[s.type][i]&&this._userHandlers.channel[s.type][i].forEach(function(e){e(s)})},n.prototype.getCcNameByNumber=function(e){if(!((e=Math.floor(e))>=0&&119>=e))throw new RangeError("The control change number must be between 0 and 119.");for(var t in a.MIDI_CONTROL_CHANGE_MESSAGES)if(a.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===a.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},n.prototype.getChannelModeByNumber=function(e){if(!((e=Math.floor(e))>=120&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in a.MIDI_CHANNEL_MODE_MESSAGES)if(a.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===a.MIDI_CHANNEL_MODE_MESSAGES[t])return t},n.prototype._parseSystemEvent=function(e){var t=e.data[0],r={target:this,data:e.data,timestamp:e.timeStamp};t===a.MIDI_SYSTEM_MESSAGES.sysex?r.type="sysex":t===a.MIDI_SYSTEM_MESSAGES.timecode?r.type="timecode":t===a.MIDI_SYSTEM_MESSAGES.songposition?r.type="songposition":t===a.MIDI_SYSTEM_MESSAGES.songselect?(r.type="songselect",r.song=e.data[1]):r.type=t===a.MIDI_SYSTEM_MESSAGES.tuningrequest?"tuningrequest":t===a.MIDI_SYSTEM_MESSAGES.clock?"clock":t===a.MIDI_SYSTEM_MESSAGES.start?"start":t===a.MIDI_SYSTEM_MESSAGES.continue?"continue":t===a.MIDI_SYSTEM_MESSAGES.stop?"stop":t===a.MIDI_SYSTEM_MESSAGES.activesensing?"activesensing":t===a.MIDI_SYSTEM_MESSAGES.reset?"reset":"unknownsystemmessage",this._userHandlers.system[r.type]&&this._userHandlers.system[r.type].forEach(function(e){e(r)})},i.prototype.send=function(e,t,r){if(!(e>=128&&255>=e))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var n=[];return t.forEach(function(e){var t=Math.floor(e);if(!(t>=0&&255>=t))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");n.push(t)}),this._midiOutput.send([e].concat(n),parseFloat(r)||0),this},i.prototype.sendSysex=function(e,t,r){if(!a.sysexEnabled)throw new Error("Sysex message support must first be activated.");return r=r||{},e=[].concat(e),t.forEach(function(e){if(0>e||e>127)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),t=e.concat(t,a.MIDI_SYSTEM_MESSAGES.sysexend),this.send(a.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(r.time)),this},i.prototype.sendTimecodeQuarterFrame=function(e,t){return this.send(a.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter((t=t||{}).time)),this},i.prototype.sendSongPosition=function(e,t){return e=Math.floor(e)||0,this.send(a.MIDI_SYSTEM_MESSAGES.songposition,[e>>7&127,127&e],this._parseTimeParameter((t=t||{}).time)),this},i.prototype.sendSongSelect=function(e,t){if(t=t||{},!((e=Math.floor(e))>=0&&127>=e))throw new RangeError("The song number must be between 0 and 127.");return this.send(a.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},i.prototype.sendTuningRequest=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendClock=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendStart=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendContinue=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendStop=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendActiveSensing=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendReset=function(e){return this.send(a.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.stopNote=function(e,t,r){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,r);var n=64;return(r=r||{}).rawVelocity?!isNaN(r.velocity)&&r.velocity>=0&&r.velocity<=127&&(n=r.velocity):!isNaN(r.velocity)&&r.velocity>=0&&r.velocity<=1&&(n=127*r.velocity),this._convertNoteToArray(e).forEach(function(e){a.toMIDIChannels(t).forEach(function(t){this.send(t-1+(a.MIDI_CHANNEL_MESSAGES.noteoff<<4),[e,Math.round(n)],this._parseTimeParameter(r.time))}.bind(this))}.bind(this)),this},i.prototype.playNote=function(e,t,r){var n,i=64;if((r=r||{}).rawVelocity?!isNaN(r.velocity)&&r.velocity>=0&&r.velocity<=127&&(i=r.velocity):!isNaN(r.velocity)&&r.velocity>=0&&r.velocity<=1&&(i=127*r.velocity),n=this._parseTimeParameter(r.time),this._convertNoteToArray(e).forEach(function(e){a.toMIDIChannels(t).forEach(function(t){this.send(t-1+(a.MIDI_CHANNEL_MESSAGES.noteon<<4),[e,Math.round(i)],n)}.bind(this))}.bind(this)),!isNaN(r.duration)){r.duration<=0&&(r.duration=0);var s=64;r.rawVelocity?!isNaN(r.release)&&r.release>=0&&r.release<=127&&(s=r.release):!isNaN(r.release)&&r.release>=0&&r.release<=1&&(s=127*r.release),this._convertNoteToArray(e).forEach(function(e){a.toMIDIChannels(t).forEach(function(t){this.send(t-1+(a.MIDI_CHANNEL_MESSAGES.noteoff<<4),[e,Math.round(s)],(n||a.time)+r.duration)}.bind(this))}.bind(this))}return this},i.prototype.sendKeyAftertouch=function(e,t,r,n){var i=this;if(n=n||{},1>t||t>16)throw new RangeError("The channel must be between 1 and 16.");(isNaN(r)||0>r||r>1)&&(r=.5);var s=Math.round(127*r);return this._convertNoteToArray(e).forEach(function(e){a.toMIDIChannels(t).forEach(function(t){i.send(t-1+(a.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4),[e,s],i._parseTimeParameter(n.time))})}),this},i.prototype.sendControlChange=function(e,t,r,n){if(n=n||{},"string"==typeof e){if(void 0===(e=a.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!((e=Math.floor(e))>=0&&119>=e))throw new RangeError("Controller numbers must be between 0 and 119.");if(!((t=Math.floor(t)||0)>=0&&127>=t))throw new RangeError("Controller value must be between 0 and 127.");return a.toMIDIChannels(r).forEach(function(r){this.send(r-1+(a.MIDI_CHANNEL_MESSAGES.controlchange<<4),[e,t],this._parseTimeParameter(n.time))}.bind(this)),this},i.prototype._selectRegisteredParameter=function(e,t,r){var n=this;if(e[0]=Math.floor(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(e[1]>=0&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return a.toMIDIChannels(t).forEach(function(){n.sendControlChange(101,e[0],t,{time:r}),n.sendControlChange(100,e[1],t,{time:r})}),this},i.prototype._selectNonRegisteredParameter=function(e,t,r){var n=this;if(e[0]=Math.floor(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(e[1]>=0&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return a.toMIDIChannels(t).forEach(function(){n.sendControlChange(99,e[0],t,{time:r}),n.sendControlChange(98,e[1],t,{time:r})}),this},i.prototype._setCurrentRegisteredParameter=function(e,t,r){var n=this;if((e=[].concat(e))[0]=Math.floor(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return a.toMIDIChannels(t).forEach(function(){n.sendControlChange(6,e[0],t,{time:r})}),e[1]=Math.floor(e[1]),e[1]>=0&&e[1]<=127&&a.toMIDIChannels(t).forEach(function(){n.sendControlChange(38,e[1],t,{time:r})}),this},i.prototype._deselectRegisteredParameter=function(e,t){var r=this;return a.toMIDIChannels(e).forEach(function(){r.sendControlChange(101,127,e,{time:t}),r.sendControlChange(100,127,e,{time:t})}),this},i.prototype.setRegisteredParameter=function(e,t,r,n){var i=this;if(n=n||{},!Array.isArray(e)){if(!a.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=a.MIDI_REGISTERED_PARAMETER[e]}return a.toMIDIChannels(r).forEach(function(){i._selectRegisteredParameter(e,r,n.time),i._setCurrentRegisteredParameter(t,r,n.time),i._deselectRegisteredParameter(r,n.time)}),this},i.prototype.setNonRegisteredParameter=function(e,t,r,n){var i=this;if(n=n||{},!(e[0]>=0&&e[0]<=127&&e[1]>=0&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),a.toMIDIChannels(r).forEach(function(){i._selectNonRegisteredParameter(e,r,n.time),i._setCurrentRegisteredParameter(t,r,n.time),i._deselectRegisteredParameter(r,n.time)}),this},i.prototype.incrementRegisteredParameter=function(e,t,r){var n=this;if(r=r||{},!Array.isArray(e)){if(!a.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=a.MIDI_REGISTERED_PARAMETER[e]}return a.toMIDIChannels(t).forEach(function(){n._selectRegisteredParameter(e,t,r.time),n.sendControlChange(96,0,t,{time:r.time}),n._deselectRegisteredParameter(t,r.time)}),this},i.prototype.decrementRegisteredParameter=function(e,t,r){if(r=r||{},!Array.isArray(e)){if(!a.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=a.MIDI_REGISTERED_PARAMETER[e]}return a.toMIDIChannels(t).forEach(function(){this._selectRegisteredParameter(e,t,r.time),this.sendControlChange(97,0,t,{time:r.time}),this._deselectRegisteredParameter(t,r.time)}.bind(this)),this},i.prototype.setPitchBendRange=function(e,t,r,n){var i=this;if(n=n||{},!((e=Math.floor(e)||0)>=0&&127>=e))throw new RangeError("The semitones value must be between 0 and 127");if(!((t=Math.floor(t)||0)>=0&&127>=t))throw new RangeError("The cents value must be between 0 and 127");return a.toMIDIChannels(r).forEach(function(){i.setRegisteredParameter("pitchbendrange",[e,t],r,{time:n.time})}),this},i.prototype.setModulationRange=function(e,t,r,n){var i=this;if(n=n||{},!((e=Math.floor(e)||0)>=0&&127>=e))throw new RangeError("The semitones value must be between 0 and 127");if(!((t=Math.floor(t)||0)>=0&&127>=t))throw new RangeError("The cents value must be between 0 and 127");return a.toMIDIChannels(r).forEach(function(){i.setRegisteredParameter("modulationrange",[e,t],r,{time:n.time})}),this},i.prototype.setMasterTuning=function(e,t,r){var n=this;if(r=r||{},-65>=(e=parseFloat(e)||0)||e>=64)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var i=Math.floor(e)+64,s=e-Math.floor(e),o=(s=Math.round((s+1)/2*16383))>>7&127,l=127&s;return a.toMIDIChannels(t).forEach(function(){n.setRegisteredParameter("channelcoarsetuning",i,t,{time:r.time}),n.setRegisteredParameter("channelfinetuning",[o,l],t,{time:r.time})}),this},i.prototype.setTuningProgram=function(e,t,r){var n=this;if(r=r||{},!((e=Math.floor(e))>=0&&127>=e))throw new RangeError("The program value must be between 0 and 127");return a.toMIDIChannels(t).forEach(function(){n.setRegisteredParameter("tuningprogram",e,t,{time:r.time})}),this},i.prototype.setTuningBank=function(e,t,r){var n=this;if(r=r||{},!((e=Math.floor(e)||0)>=0&&127>=e))throw new RangeError("The bank value must be between 0 and 127");return a.toMIDIChannels(t).forEach(function(){n.setRegisteredParameter("tuningbank",e,t,{time:r.time})}),this},i.prototype.sendChannelMode=function(e,t,r,n){if(n=n||{},"string"==typeof e){if(!(e=a.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!((e=Math.floor(e))>=120&&127>=e))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if(0>(t=Math.floor(t)||0)||t>127)throw new RangeError("Value must be an integer between 0 and 127.");return a.toMIDIChannels(r).forEach(function(r){this.send(r-1+(a.MIDI_CHANNEL_MESSAGES.channelmode<<4),[e,t],this._parseTimeParameter(n.time))}.bind(this)),this},i.prototype.sendProgramChange=function(e,t,r){var n=this;if(r=r||{},e=Math.floor(e),isNaN(e)||0>e||e>127)throw new RangeError("Program numbers must be between 0 and 127.");return a.toMIDIChannels(t).forEach(function(t){n.send(t-1+(a.MIDI_CHANNEL_MESSAGES.programchange<<4),[e],n._parseTimeParameter(r.time))}),this},i.prototype.sendChannelAftertouch=function(e,t,r){var n=this;r=r||{},e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=.5);var i=Math.round(127*e);return a.toMIDIChannels(t).forEach(function(e){n.send(e-1+(a.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4),[i],n._parseTimeParameter(r.time))}),this},i.prototype.sendPitchBend=function(e,t,r){var n=this;if(r=r||{},isNaN(e)||-1>e||e>1)throw new RangeError("Pitch bend value must be between -1 and 1.");var i=Math.round((e+1)/2*16383),s=i>>7&127,o=127&i;return a.toMIDIChannels(t).forEach(function(e){n.send(e-1+(a.MIDI_CHANNEL_MESSAGES.pitchbend<<4),[o,s],n._parseTimeParameter(r.time))}),this},i.prototype._parseTimeParameter=function(e){var t,r=parseFloat(e);return"string"==typeof e&&"+"===e.substring(0,1)?r&&r>0&&(t=a.time+r):r>a.time&&(t=r),t},i.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach(function(e){t.push(a.guessNoteNumber(e))}),t},e.exports?e.exports=a:t.WebMidi||(t.WebMidi=a)}(u)});class Fe{constructor(t){e(this,t),this.name="web_audio",this.prepared=!1,this.midi=!1,this.sources=[],this.keys={}}async source(e){return 0===this.sources.length&&await this.connect_the_world(),this.sources[e]}async get_context(){return this.context}async is_prepared(){return this.prepared}componentDidLoad(){this.connect_debugger()}async connect_the_world(){return this.connect_context(),this.gain=this.context.createGain(),this.connect_visualizers(),this.connect_sources(),this.connect_midi(),this.prepared=!0,!0}connect_context(){this.context=window.webkitAudioContext?new webkitAudioContext:new AudioContext,this.log("Connected to this.context")}connect_sources(){this.build_sources()}async build_sources(){this.log("Building sources"),this._sources=Array.from(this.element.querySelectorAll("web-audio-source")),this.externalFiles=[],this._sources.forEach((e,t)=>{this.log(`(${t}) Preparing ${e.name}`),this.sources[e.name]=e,new Ne(this.context,[e.src],t=>{this.cache_sources(t,e)}).load()},this)}async cache_sources(e,t){await T(20),e.forEach(e=>{this.log(`Caching ${t.name}`),this.midi&&(this.log(`Assigned ${t.name} to midi key ${t.midikey}, channel ${t.midichannel}`),null==this.keys[t.midichannel]&&(this.keys[t.midichannel]=[]),this.keys[t.midichannel][t.midikey]=t),this._currentSource=t,this._currentSource.assignBuffer(this,e),this.log(`Source ${t.name} is ready`)}),this._currentSource=null}async connect_visualizers(){await T(20),this.visualizers=Array.from(document.querySelectorAll(`web-audio-visualizer[for="${this.name}"]`)),this.visualizers?(this.log("Attaching visualizers"),await v(this.visualizers,async(e,t)=>{e=0===t?await e.connect(this.context,this.context.destination):await e.connect(this.context,this.previousVisualizer.analyser),this.previousVisualizer=e})):this.log(`No visualizers for ${this.name}`),this.visualizers.length>=1?await this.gain.connect(this.previousVisualizer.analyser):await this.gain.connect(this.context.destination)}connect_debugger(){this.debugger=document.querySelector(`web-audio-debugger[for="${this.name}"]`),this.log("Connected debugger")}log(e){this.debugger&&this.debugger.addHistory(e)}connect_midi(){this.midi&&Be.enable(e=>{this.log(e?"Midi couldn't be enabled."+e:"Midi is enabled");var t=Be.inputs[0];t&&(t.addListener("noteon","all",e=>{this.log(`KEY: Channel: ${e.channel}, Note: ${e.note.number}, Name: ${e.note.name}, Oct: ${e.note.octave}`),this.keys[e.channel]&&(this.keys[e.channel][e.note.number].gain().value=e.data[2]/175,this.keys[e.channel][e.note.number].play())}),t.addListener("pitchbend","all",e=>{this.log(`PITCH: Channel: ${e.channel}, Value: ${e.value}`)}),t.addListener("controlchange","all",e=>{this.log(`CTRL: Channel: ${e.channel}, controller: ${e.controller.number}, Value: ${e.value}`);var t=new CustomEvent("midi-controller-update",{detail:e});document.dispatchEvent(t)}),this.log("Listeners added for notes, pitch bend, and controllers."))})}get element(){return n(this)}}class He{constructor(t){e(this,t),this.inert=!1,this.midikey=0,this.midichannel=1,this.status="paused",this.effectsvolume=100,this.effects=[],this.duration=0,this.startTime=0,this.pausedTime=0,this.elapsedTime=0,this.playing=!1,this.timeupdate=a(this,"timeupdate",7)}async getBuffer(){return this.buffer}async webAudio(){return this.webAudioWrapper}async gain(e="wet"){return"wet"===e?this.wetGain:"dry"===e?this.dryGain:"channel"===e?this.channelGain:void 0}async getDuration(){return this.duration}currentTime(){let e=0;return this.pausedTime?e=this.pausedTime:this.startTime&&(e=this.context.currentTime-this.startTime),e>=this.duration&&(e=this.duration),e}async prepare(){this.inert||(this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.wetGain?(this.wetGain.gain.value=this.effectsvolume/100,this.dryGain.gain.value=Math.abs((this.effectsvolume-100)/100)):this.dryGain.gain.value=1,this.wetGain&&this.source.connect(this.wetGain),this.source.connect(this.dryGain),this.duration=this.source.buffer.duration)}async play(){if(this.inert)throw"Cannot play inert media.";this.prepare(),this.source.start(0,this.pausedTime),this.startTime=this.context.currentTime-this.pausedTime,this.pausedTime=0,this.playing=!0,this.tick(),C(()=>{this.tick()})}async skipTo(e){this.stop(),this.pausedTime=e/1e3,this.play()}async pause(){this.elapsedTime=this.context.currentTime-this.startTime,this.stop(),this.pausedTime=this.elapsedTime,this.playing=!1}async toggle(){this.playing?this.pause():this.play()}async stop(){this.source&&(this.source.disconnect(),this.source.stop()),this.source=null,this.pausedTime=0,this.startTime=0,this.playing=!1}tick(){this.timeupdate.emit({time:this.currentTime(),duration:this.duration}),this.source&&C(()=>{this.tick()})}async assignBuffer(e,t){if(this.webAudioWrapper=e.element,this.context=e.context,this.buffer=t,!this.inert){if(this.masterGain=e.gain,this.channelGain=this.context.createGain(),await this.prepareEffects(),Object.keys(this.effects).length>0){this.wetGain=this.context.createGain();let e="";Object.keys(this.effects).reverse().forEach((t,r)=>{0===r?this.wetGain.connect(this.effects[t]):this.effects[e].connect(this.effects[t]),e=t}),this.effects[e].connect(this.channelGain)}this.dryGain=this.context.createGain(),this.dryGain.connect(this.channelGain),this.channelGain.connect(this.masterGain)}}async prepareEffects(){if("WEB-AUDIO"!==this.element.parentElement.nodeName){let e=this.element.parentElement;for(;"WEB-AUDIO"!==e.nodeName;)this.effects[e.getAttribute("name")]=await e.attachEffect(this.context,this.element),e=e.parentElement}}get element(){return n(this)}}const Ge=e=>{for(var t=0;t<e.analyser.frequencyBinCount;t++){var r=e.freqs[t]/256,n=e.height*r*.75,i=e.height-n+25,a=e.width/e.analyser.frequencyBinCount+24;e.canvasCTX.fillStyle=`hsl(${e._color[0]}, ${e._color[1]}%, ${100*r}%)`,e.canvasCTX.fillRect(t*a,i,a,n)}},ze=e=>{const t=e.freqs,r=e.canvas,n=e.canvasCTX;for(var i=t.length-50*~~(t.length/70),a=e.size,s=~~(i/70),o=r.width/70,l=4,u=r.height-8,c=0;c<i;c+=s){var h=t[c]/a*u,d=u/2-h/2;n.beginPath(),n.shadowColor="rgba(0, 0, 0, 0.5)",n.shadowBlur=8,n.shadowOffsetX=0,n.shadowOffsetY=4,n.strokeStyle=`hsl(${e._color[0]}, ${e._color[1]}%, ${e._color[2]}%)`,n.lineWidth=4,n.lineCap="round",n.moveTo(l,d),n.lineTo(l,d+h),n.stroke(),l+=o}},je=250,We=100,qe=15,Ue=e=>{const t=e.analyser.frequencyBinCount,r=function(e){return e.reduce((e,t)=>e+t)/e.length}(e.freqs),n=r<qe?qe:r;let i=0,a=e.width/2,s=e.height/2,o=2*We*Math.PI/t;e.canvasCTX.beginPath(),e.canvasCTX.arc(a,s,We,0,2*Math.PI),e.canvasCTX.lineWidth=n,e.canvasCTX.strokeStyle=`hsl(${e._color[0]}, ${e._color[1]}%, ${e._color[2]}%)`,e.canvasCTX.closePath(),e.canvasCTX.stroke(),e.canvasCTX.save(),e.canvasCTX.translate(a,s);for(var l=0;l<e.analyser.frequencyBinCount;l++){const r=e.freqs[l],n=r>je?je:r;e.canvasCTX.rotate(i),e.canvasCTX.fillStyle=`hsl(${e._color[0]}, ${e._color[1]}%, ${e._color[2]}%)`,e.canvasCTX.fillRect(We+100,-1*o/2,n,o),i=i/(t+o)%360+1}},Xe=e=>{for(var t=0;t<e.analyser.frequencyBinCount;t++){var r=e.height-e.height*(e.times[t]/512)*1.25,n=e.width/e.analyser.frequencyBinCount+16;e.canvasCTX.fillStyle=`hsl(${e._color[0]}, ${e._color[1]}%, ${e._color[2]}%)`,e.canvasCTX.fillRect(t*n,r,24,24)}};var Ve=s(function(e){(function(){e.exports=function(e,t,r){var n,i,a,s,o,l;if(e/=255,t/=255,r/=255,i=0,l=0,a=((s=Math.max(e,t,r))+(o=Math.min(e,t,r)))/2,s===o)i=l=0;else{switch(n=s-o,l=a>.5?n/(2-s-o):n/(s+o),s){case e:i=(t-r)/n+(t<r?6:0);break;case t:i=(r-e)/n+2;break;case r:i=(e-t)/n+4}i/=6}return[i=Math.ceil(360*i),l=Math.ceil(100*l)+"%",a=Math.ceil(100*a)+"%"]}}).call(u)}),$e=function(e){var t=Ve.apply(Ve,function(e){e.charAt&&"#"===e.charAt(0)&&(e=function(e){var t=e.split("");return t.shift(),t.join("")}(e)),3===e.length&&(e=function(e){return e.split("").reduce(function(e,t){return e.concat([t,t])},[]).join("")}(e));var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}(e));return[t[0],parseInt(t[1],10),parseInt(t[2],10)]};class Ye{constructor(t){e(this,t),this.for="web_audio",this.type="wave",this.smoothing=.7,this.size=1024,this.color="white",this.width=1024,this.height=1024,this.clearBackground=(()=>{this.canvasCTX.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasCTX.fillStyle="transparent",this.canvasCTX.fillRect(0,0,this.canvas.width,this.canvas.height)})}componentWillLoad(){this._color=["white","black","black-alt"].includes(this.color)?$e(d[this.color]):$e(d[this.color][5])}componentDidLoad(){this.canvas=this.element.shadowRoot.querySelector("canvas")}async connect(e,t){return this.context=e,this.analyser=this.context.createAnalyser(),t&&this.analyser.connect(t),this.freqs=new Uint8Array(this.analyser.frequencyBinCount),this.times=new Uint8Array(this.analyser.frequencyBinCount),this.canvasCTX=this.canvas.getContext("2d"),requestAnimationFrame(this.draw.bind(this)),this}draw(){this.analyser.smoothingTimeConstant=this.smoothing,this.analyser.fftSize=this.size,this.analyser.getByteFrequencyData(this.freqs),this.analyser.getByteTimeDomainData(this.times);var e=Math.floor(this.freqs.length);this.canvas.width=e||this.width,this.canvas.height=this.height,this.clearBackground(),"wave"===this.type?Xe(this):"bars"===this.type?Ge(this):"bars2"===this.type?ze(this):"circle"===this.type&&Ue(this),requestAnimationFrame(this.draw.bind(this))}getFrequencyValue(e){var t=Math.round(e/(this.context.sampleRate/2)*this.freqs.length);return this.freqs[t]}render(){return t("canvas",{id:"canvas"})}get element(){return n(this)}static get style(){return":host,:host canvas{display:block}:host canvas{width:100%;height:100%}"}}export{A as copy_wrap,D as ion_icon,P as skeleton_img,L as stellar_360_image,x as stellar_asset,N as stellar_button,B as stellar_color_picker,j as stellar_interview,W as stellar_interview_line,q as stellar_layout,U as stellar_playlist,X as stellar_progress,J as stellar_song,Oe as stellar_unit,Pe as stellar_video,Le as stellar_video_interview,xe as stencil_route_link,Fe as web_audio,He as web_audio_source,Ye as web_audio_visualizer};