var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};System.register(["./p-afdfa3ab.system.js","./p-2ddf37dd.system.js","./p-ddf33e94.system.js","./p-7e55331e.system.js","./p-da4cf384.system.js","./p-92ab9c5e.system.js","./p-b69a032e.system.js","./p-23f875f8.system.js","./p-4ac25c7d.system.js","./p-b29c4ce8.system.js","./p-f5ef4500.system.js","./p-ba1f0cc7.system.js","./p-4d8a0206.system.js","./p-1dd637b5.system.js"],function(n){"use strict";var r,i,o,a,s,u,l,c,h,d,f,p,m,g,y,v,b,_,S,w,E,T,C,A,M;return{setters:[function(e){r=e.c,i=e.d,o=e.e,a=e.f,s=e.g,u=e.h},function(e){l=e.a,c=e.b,h=e.d},function(e){d=e.a},function(e){f=e.a},function(e){p=e.a,m=e.b,g=e.c,y=e.d,v=e.e,b=e.f,_=e.g},function(){},function(e){S=e.a},function(e){w=e.a},function(e){E=e.a},function(){},function(e){T=e.a},function(e){C=e.a},function(e){A=e.a},function(e){M=e.a}],execute:function(){var I,k=function(){function e(e){r(this,e),this.align="left",this.full=!1}return e.prototype.render=function(){return i("slot",null)},Object.defineProperty(e,"style",{get:function(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block}:host([align=left]){text-align:left!important}:host([align=left]) ::slotted(*){margin-right:auto!important}:host([align=center]){text-align:center!important}:host([align=center]) ::slotted(*){margin-right:auto!important;margin-left:auto!important}:host([align=right]){text-align:right!important}:host([align=right]) ::slotted(*){margin-left:auto!important}:host ::slotted(stellar-button){display:inline-block}:host ::slotted(img),:host ::slotted(stellar-code-block){margin-bottom:2rem}:host ::slotted(:last-child){margin-bottom:0}:host([full]) ::slotted(*){max-width:100%}:host ::slotted(ol),:host ::slotted(ul){margin:.25em 0;display:inline-block;text-align:left}:host ::slotted(li){margin-top:.5em}"},enumerable:!0,configurable:!0}),e}();function R(e,t,n,r){return t="ios"===(t=(t||"md").toLowerCase())?"ios":"md",n&&"ios"===t?e=n.toLowerCase():r&&"md"===t?e=r.toLowerCase():e&&(e=e.toLowerCase(),/^md-|^ios-|^logo-/.test(e)||(e=t+"-"+e)),"string"!=typeof e||""===e.trim()?null:""!==e.replace(/[a-z]|-|\d/gi,"")?null:e}function O(e){return"string"==typeof e&&P(e=e.trim())?e:null}function P(e){return e.length>0&&/(\/|\.)/.test(e)}n("copy_wrap",k);var D=function(){function e(e){r(this,e),this.isVisible=!1,this.lazy=!1,this.isServer=o(this,"isServer"),this.resourcesUrl=o(this,"resourcesUrl"),this.doc=o(this,"document"),this.win=o(this,"window")}return e.prototype.componentWillLoad=function(){var e=this;this.waitUntilVisible(this.el,"50px",function(){e.isVisible=!0,e.loadIcon()})},e.prototype.componentDidUnload=function(){this.io&&(this.io.disconnect(),this.io=void 0)},e.prototype.waitUntilVisible=function(e,t,n){var r=this;if(this.lazy&&this.win&&this.win.IntersectionObserver){var i=this.io=new this.win.IntersectionObserver(function(e){e[0].isIntersecting&&(i.disconnect(),r.io=void 0,n())},{rootMargin:t});i.observe(e)}else n()},e.prototype.loadIcon=function(){var e=this;if(!this.isServer&&this.isVisible){var t=this.getUrl();t?function(e,t){var n=L.get(t);return n||(n=fetch(t,{cache:"force-cache"}).then(function(e){return e.status<=299?e.text():Promise.resolve(null)}).then(function(t){return function(e,t){if(t){var n=e.createDocumentFragment(),r=e.createElement("div");r.innerHTML=t,n.appendChild(r);for(var i=r.childNodes.length-1;i>=0;i--)"svg"!==r.childNodes[i].nodeName.toLowerCase()&&r.removeChild(r.childNodes[i]);var o=r.firstElementChild;if(o&&"svg"===o.nodeName.toLowerCase()&&(o.setAttribute("class","s-ion-icon"),function e(t){if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n].value;if("string"==typeof r&&0===r.toLowerCase().indexOf("on"))return!1}for(n=0;n<t.childNodes.length;n++)if(!e(t.childNodes[n]))return!1}return!0}(o)))return r.innerHTML}return""}(e,t)}),L.set(t,n)),n}(this.doc,t).then(function(t){return e.svgContent=t}):console.error("icon was not resolved")}if(!this.ariaLabel){var n=R(this.getName(),this.mode,this.ios,this.md);n&&(this.ariaLabel=n.replace("ios-","").replace("md-","").replace(/\-/g," "))}},e.prototype.getName=function(){return void 0!==this.name?this.name:this.icon&&!P(this.icon)?this.icon:void 0},e.prototype.getUrl=function(){var e=O(this.src);return e||((e=R(this.getName(),this.mode,this.ios,this.md))?this.getNamedUrl(e):(e=O(this.icon))||null)},e.prototype.getNamedUrl=function(e){return function(){if(!I){var e=window;e.Ionicons=e.Ionicons||{},I=e.Ionicons.map=e.Ionicons.map||new Map}return I}().get(e)||this.resourcesUrl+"svg/"+e+".svg"},e.prototype.hostData=function(){var e,t=this.flipRtl||this.ariaLabel&&this.ariaLabel.indexOf("arrow")>-1&&!1!==this.flipRtl;return{role:"img",class:Object.assign({},x(this.color),(e={},e["icon-"+this.size]=!!this.size,e["flip-rtl"]=t&&"rtl"===this.doc.dir,e))}},e.prototype.__stencil_render=function(){return i("div",!this.isServer&&this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"})},Object.defineProperty(e,"style",{get:function(){return"/**style-placeholder:ion-icon:**/"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"el",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{icon:["loadIcon"],name:["loadIcon"],src:["loadIcon"]}},enumerable:!0,configurable:!0}),e.prototype.render=function(){return i(s,this.hostData(),this.__stencil_render())},e}();n("ion_icon",D);var L=new Map;function x(e){var t;return e?((t={"ion-color":!0})["ion-color-"+e]=!0,t):null}var N=function(){function e(e){r(this,e),this.width=600,this.height=300,this.block=!1,this.loading=!1,this.icon=!1}return e.prototype.componentWillLoad=function(){var e=this;this.block||d.set({"--width":this.width+"px","--height":this.height+"px"},this.element),this.observer=new IntersectionObserver(function(t){t.forEach(function(t){t.intersectionRatio>0?e.element.classList.add("visible"):e.element.classList.remove("visible")})}),this.observer.observe(this.element)},e.prototype.render=function(){return[this.loading&&this.icon&&i("stellar-asset",{name:"spinning-bubbles",color:"gray25"}),i("svg",{width:this.width,height:this.height},i("rect",{width:this.width,height:this.height}))]},Object.defineProperty(e.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"skeleton-img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;display:block;position:relative;margin-bottom:1rem;border-radius:4px;overflow:hidden;max-width:var(--width);max-height:var(--height)}skeleton-img svg{display:block;width:100%;height:auto;overflow:hidden}skeleton-img svg rect{fill:var(--theme-base5)}skeleton-img[loading]{position:relative}skeleton-img[loading]:before{content:\"\";display:block;position:absolute;top:0;right:0;bottom:0;left:-100%;background-color:var(--theme-base5);background-image:linear-gradient(45deg,var(--theme-base5),var(--theme-base5) 20%,var(--theme-base3) 40%,var(--theme-base4) 61%,var(--theme-base5) 80%,var(--theme-base5));width:300%;height:100%;-webkit-transform:translateX(calc(var(--width) * -1.75));transform:translateX(calc(var(--width) * -1.75))}skeleton-img[loading].visible:before{-webkit-animation:shimmer 1.25s linear 0s infinite forwards;animation:shimmer 1.25s linear 0s infinite forwards}skeleton-img stellar-asset{position:absolute;top:50%;right:50%;bottom:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:var(--icon-width);height:var(--icon-height)}\@-webkit-keyframes shimmer{0%{opacity:0;-webkit-transform:translateX(calc(var(--width) * -1.75));transform:translateX(calc(var(--width) * -1.75))}10%{opacity:1}90%{opacity:1}to{opacity:0;-webkit-transform:translateX(calc(var(--width) * 1.75));transform:translateX(calc(var(--width) * 1.75))}}\@keyframes shimmer{0%{opacity:0;-webkit-transform:translateX(calc(var(--width) * -1.75));transform:translateX(calc(var(--width) * -1.75))}10%{opacity:1}90%{opacity:1}to{opacity:0;-webkit-transform:translateX(calc(var(--width) * 1.75));transform:translateX(calc(var(--width) * 1.75))}}"},enumerable:!0,configurable:!0}),e}();n("skeleton_img",N);var B=function(){function e(e){r(this,e),this.width=1280,this.height=720,this.ready=!1}return e.prototype.componentDidLoad=function(){this.image=this.element.querySelector(".image"),this.addIntersectionObserver()},e.prototype.addIntersectionObserver=function(){var e=this;"IntersectionObserver"in window&&(this.io=new IntersectionObserver(function(t){t[0].isIntersecting?e.handleInScreen():e.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))},e.prototype.handleInScreen=function(){this.prepare()},e.prototype.handleOffScreen=function(){this.destroy()},e.prototype.prepare=function(){this.viewer=new f({source:this.src,container:this.image,width:this.width,height:this.height}),this.viewer.render(),this.ready=!0},e.prototype.destroy=function(){this.viewer.destroy(),this.ready=!1},e.prototype.render=function(){return i("div",null,i("div",{class:"image"}),i("div",{class:"overlay"}),!this.ready&&i("skeleton-img",{width:this.width,height:this.height}))},Object.defineProperty(e.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"stellar-360-image{display:block;position:relative}stellar-360-image canvas{display:block;width:100%!important;height:auto!important}stellar-360-image .overlay{opacity:.3;z-index:3;pointer-events:none;background:var(--gradient,none);mix-blend-mode:var(--blend,multiply);position:absolute;top:0;left:0;width:100%;height:100%}"},enumerable:!0,configurable:!0}),e}();n("stellar_360_image",B);var F=function(){function e(e){r(this,e),this.name="person",this.language="ios-",this.block=!1}return e.prototype.componentWillLoad=function(){this.ariaLabel=this.name.replace("ios-","").replace("md-","").replace(/\-/g," ")},e.prototype.render=function(){return i("div",{class:"icon-wrap"},i("ion-icon",{src:!this.name&&this.src?this.src:void 0,name:!this.src&&this.name?this.language+this.name:void 0,ariaLabel:this.ariaLabel,"aria-label":this.ariaLabel}))},Object.defineProperty(e,"style",{get:function(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;-webkit-transform-origin:.5em .5em;transform-origin:.5em .5em}:host .icon-wrap{display:-ms-flexbox;display:flex}:host([block]),:host([block]) ion-icon,:host([block]) ion-icon .icon-inner,:host([block]) ion-icon .icon-inner svg{width:100%;height:auto}"},enumerable:!0,configurable:!0}),e}();n("stellar_asset",F);var H=function(){function n(e){r(this,e),this.tag="link",this.label="Submit",this.name="",this.value="",this.href="#",this.target="_self",this.size="medium",this.padding="medium",this.icon=!1,this.active=!1,this.disabled=!1,this.danger=!1,this.pill=!1,this.block=!1,this.outline=!1,this.invert=!1,this.processable=!1,this.processing=!1,this.ghost=!1}return n.prototype.click=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(){return this.processable&&(this.processing=!0),this.for&&"modal"===(e=this.for.split(":"))[0]&&document.querySelector('stellar-modal[name="'+e[1]+'"]').open(),"submit"===this.tag&&this.element.closest("stellar-form").submit_form(),"link"===this.tag&&(window.location.href=this.href),[2,!0]})})},n.prototype.renderSVG=function(){return i("stellar-asset",{src:"Loading",color:"white"})},n.prototype.renderButton=function(){var e=this;return i("button",{type:"button",class:"button",title:this.label,disabled:this.disabled,onClick:function(){e.click()}},i("div",{class:"content"},i("slot",null,"Submit")),this.processing&&i("div",{class:"processing"},this.renderSVG()))},n.prototype.renderSubmit=function(){var e=this;return i("button",{type:"submit",class:"button",title:this.label,disabled:this.disabled,name:this.name,value:this.value,onClick:function(){e.click()}},i("div",{class:"content"},i("slot",null,"Submit")),this.processing&&i("div",{class:"processing"},this.renderSVG()))},n.prototype.renderLink=function(){var e=this;return i("a",{href:this.href,target:this.target,class:"button","data-disabled":this.disabled,title:this.label,onClick:function(){e.click()}},i("div",{class:"content"},i("slot",null,"Submit")),this.processing&&i("div",{class:"processing"},this.renderSVG()))},n.prototype.renderAppLink=function(){var e=this;return i("stencil-route-link",{url:this.href,anchorClass:"button","data-disabled":this.disabled,title:this.label,onClick:function(){e.click()}},i("div",{class:"content"},i("slot",null,"Submit")),this.processing&&i("div",{class:"processing"},this.renderSVG()))},n.prototype.renderSpan=function(){var e=this;return i("span",{class:"button",title:this.label,"data-disabled":this.disabled,"aria-label":"Button "+this.label+" "+this.element.textContent,tabIndex:0,onClick:function(){e.click()}},i("div",{class:"content"},i("slot",null,"Submit")),this.processing&&i("div",{class:"processing"},this.renderSVG()))},n.prototype.render=function(){return["button"===this.tag&&this.renderButton(),"submit"===this.tag&&this.renderSubmit(),"link"===this.tag&&this.renderLink(),"route-link"===this.tag&&this.renderAppLink(),"span"===this.tag&&this.renderSpan()]},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{-moz-appearance:none!important;appearance:none!important;-webkit-appearance:none!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:var(--wrap-display,inline-block);font-family:inherit;text-align:center;vertical-align:middle;-ms-flex-item-align:center;align-self:center;--width:auto;--padding:1.0625em 2em 1.1em 2em;--background:var(--theme-base5);--color:var(--white);--active-background:var(--theme-base7);--active-color:var(--white);--active-border:none;--border:none;--border-radius:0;--font-size:1.3rem;--text-decoration:none}:host([outline]){--background:transparent;--border:2px solid currentColor;--active-background:var(--theme-base0);--active-border:2px solid currentColor}:host([ghost]),:host([outline]){--color:var(--theme-base5);--active-color:var(--theme-base7)}:host([ghost]){--padding:0.05em 0 0.125em;--background:none;--border:none;--active-background:none;--active-border:none}:host([outline][invert]){--background:transparent;--border:2px solid currentColor;--active-background:var(--theme-base0);--active-border:2px solid currentColor}:host([ghost][invert]){--background:none;--active-background:none}:host([ghost][invert]),:host([invert]){--color:var(--theme-base2);--border:none;--active-color:var(--theme-base5);--active-border:none}:host([invert]){--background:var(--white);--active-background:var(--theme-base0)}:host([pill]){--border-radius:1000px}:host([size=tiny]){--font-size:.75rem}:host([size=small]){--font-size:1rem}:host([size=large]){--font-size:2rem}:host([padding=tiny]){--padding:.55em 1.125em .61875em}:host([padding=small]){--padding:.7875em 1.5em .825em}:host([padding=large]){--padding:1.3125em 2.5em 1.375em}:host(:active){-webkit-transform:scale(.925);transform:scale(.925)}:host .button{cursor:pointer;display:-ms-inline-flexbox;display:inline-flex;position:relative;-ms-flex-align:center;align-items:center;outline:0;border:var(--border);background:var(--background);padding:var(--padding);width:var(--width);height:auto;vertical-align:bottom;-webkit-text-decoration:var(--text-decoration);text-decoration:var(--text-decoration);line-height:1;letter-spacing:var(--letter-spacing,.0275em);white-space:nowrap;color:var(--color);font-family:var(--font-system);font-size:var(--font-size);font-weight:500;border-radius:var(--border-radius,0)}:host a.button,:host span.button{width:auto}:host .button:focus,:host .button:hover{border:var(--active-border);background-color:var(--active-background);color:var(--active-color)}:host .button .content{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}:host([block]),:host([block]) .button{display:block;width:100%}:host ::slotted(img),:host ::slotted(stellar-asset){display:inline-block;float:none;width:1em;height:1em}:host ::slotted(img[align=left]),:host ::slotted(stellar-asset[align=left]){-ms-flex-order:-1;order:-1;margin-right:.75em}:host ::slotted(img[align=right]),:host ::slotted(stellar-asset[align=right]){-ms-flex-order:2;order:2;margin-left:.75em}:host-context(.dark-mode){--background:var(--theme-base7);--color:var(--white);--active-background:var(--theme-base9);--active-color:var(--white);--active-border:none}:host-context(.dark-mode):host([outline]){--background:transparent;--color:var(--white);--border:2px solid var(--theme-base5);--active-background:var(--theme-base9);--active-color:var(--theme-base0);--active-border:2px solid var(--theme-base9)}:host-context(.dark-mode):host([ghost]){--padding:0.05em 0 0.125em;--background:none;--color:var(--theme-base5);--border:none;--active-background:none;--active-color:var(--theme-base7);--active-border:none}"},enumerable:!0,configurable:!0}),n}();n("stellar_button",H);var G=function(){function e(e){r(this,e),this.val="none",this.change=u(this,"change",7)}return e.prototype.componentWillLoad=function(){this.options=Object.keys(p).filter(function(e){return!["base","white","black"].includes(e)}),d.set({"--selected-color":"var(--"+this.val+"5)"},this.element)},e.prototype.valueChangedHandler=function(e){this.change.emit(e),d.set({"--selected-color":"var(--"+this.val+"5)"},this.element)},e.prototype.updateValue=function(e){this.val=e},e.prototype.render=function(){var e=this;return i("div",{class:"wrap"},this.options.map(function(t){return i("button",{value:t,class:t,style:{background:"var(--"+t+"5)"},onClick:function(){e.updateValue(t)}})}),i("button",{value:"none",class:"none",style:{background:"var(--white)"},onClick:function(){e.updateValue("none")}}),i("div",{class:"placeholder"}))},Object.defineProperty(e.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{val:["valueChangedHandler"]}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;background:var(--selected-color,var(--red5));border:2px solid var(--selected-color,var(--red5));border-radius:100%}:host,:host .wrap{width:32px;height:32px}:host .wrap{border-radius:100%}:host .placeholder{position:absolute;top:0;left:0;-webkit-transition:opacity .2s var(--ease,ease-out) .1s,width .2s var(--ease,ease-out) .1s,z-index .2s var(--ease,ease-out) .1s;transition:opacity .2s var(--ease,ease-out) .1s,width .2s var(--ease,ease-out) .1s,z-index .2s var(--ease,ease-out) .1s;opacity:1;z-index:0;background:#fff;width:32px;height:32px;border-radius:100%}:host .placeholder[data-selected=true]{opacity:1;z-index:9}:host button{cursor:pointer;display:block;position:absolute;-webkit-transition:all .4s var(--ease,ease-out) .1s;transition:all .4s var(--ease,ease-out) .1s;opacity:0;border:0;width:32px;height:32px;border-radius:100%;-webkit-transform:translate3d(34px,0,0);transform:translate3d(34px,0,0)}:host button.current{position:relative;border:2px solid var(--gray2);background:var(--white);overflow:hidden}:host button.current:after{content:\"\";display:block;position:absolute;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);background:var(--red);width:32px;height:4px}:host([val=none]),:host button.none{background:#fff;border:2px solid var(--black)}:host([val=none]):after,:host button.none:after{content:\"\";display:block;position:absolute;left:calc(50% - 2px);top:calc(0% - .2rem);width:4px;height:calc(100% + .4rem);-webkit-transform:rotate(45deg);transform:rotate(45deg);background:var(--red5)}:host button[data-selected=true]{opacity:1;z-index:9}:host .wrap{position:relative;left:-34px}:host .wrap .placeholder{opacity:0;z-index:-1}:host .wrap:hover{width:96px;height:204px;border-radius:100%}:host .wrap:hover button{opacity:1;z-index:99;height:32px}:host .wrap:hover button:first-of-type{-webkit-transform:translate3d(0,34px,0);transform:translate3d(0,34px,0)}:host .wrap:hover button:nth-of-type(2){-webkit-transform:translate3d(34px,34px,0);transform:translate3d(34px,34px,0)}:host .wrap:hover button:nth-of-type(3){-webkit-transform:translate3d(68px,34px,0);transform:translate3d(68px,34px,0)}:host .wrap:hover button:nth-of-type(4){-webkit-transform:translate3d(0,68px,0);transform:translate3d(0,68px,0)}:host .wrap:hover button:nth-of-type(5){-webkit-transform:translate3d(34px,68px,0);transform:translate3d(34px,68px,0)}:host .wrap:hover button:nth-of-type(6){-webkit-transform:translate3d(68px,68px,0);transform:translate3d(68px,68px,0)}:host .wrap:hover button:nth-of-type(7){-webkit-transform:translate3d(0,102px,0);transform:translate3d(0,102px,0)}:host .wrap:hover button:nth-of-type(8){-webkit-transform:translate3d(34px,102px,0);transform:translate3d(34px,102px,0)}:host .wrap:hover button:nth-of-type(9){-webkit-transform:translate3d(68px,102px,0);transform:translate3d(68px,102px,0)}:host .wrap:hover button:nth-of-type(10){-webkit-transform:translate3d(0,136px,0);transform:translate3d(0,136px,0)}:host .wrap:hover button:nth-of-type(11){-webkit-transform:translate3d(34px,136px,0);transform:translate3d(34px,136px,0)}:host .wrap:hover button:nth-of-type(12){-webkit-transform:translate3d(68px,136px,0);transform:translate3d(68px,136px,0)}:host .wrap:hover button:nth-of-type(13){-webkit-transform:translate3d(0,170px,0);transform:translate3d(0,170px,0)}:host .wrap:hover button:nth-of-type(14){-webkit-transform:translate3d(34px,170px,0);transform:translate3d(34px,170px,0)}:host-context(.dark-mode):host([val=none]),:host-context(.dark-mode):host button.none{background:var(--black)!important;border:2px solid var(--white)!important}"},enumerable:!0,configurable:!0}),e}();n("stellar_color_picker",G);var j=function(e,t){return Math.abs(e-t)},z=function(e,t,n){var r=j(e,t)*n;return e>t?e-r:e+r},W=function(e){return Array.from(e.querySelectorAll(".line")).map(function(e){var t=parseInt(e.dataset.end,10),n=parseInt(e.dataset.start,10),r=parseFloat(e.dataset.opacityStart),i=parseFloat(e.dataset.opacityEnd),o=parseInt(e.dataset.translatexStart,10),a=parseInt(e.dataset.translatexEnd,10),s=parseInt(e.dataset.translateyStart,10),u=parseInt(e.dataset.translateyEnd,10),l=parseFloat(e.dataset.scaleStart),c=parseFloat(e.dataset.scaleEnd),h={};return isNaN(r)||isNaN(i)||(h.opacity={end:i,start:r}),isNaN(o)||isNaN(a)||(h.translateX={end:a,start:o}),isNaN(s)||isNaN(u)||(h.translateY={end:u,start:s}),isNaN(l)||isNaN(c)||(h.scale={end:c,start:l}),void 0===t||void 0===n||0===Object.keys(h).length?null:{el:e,end:t,offset:0,start:n,updates:h}}).filter(function(e){return e})},q=function(e,t,n){var r=function(){var e=document.createElement("div"),t=["Webkit","webkit","Moz","moz","ms","o"];if(null!=e.style.transform)return"transform";for(var n in t){var r=t[n]+"Transform";if(void 0!==e.style[r])return r}}(),i=n;e.map(function(e){var n,o=e.el,a=e.offset,s=e.updates,u=a+e.start,l=a+e.end,c=t.get(o);if(i>=u&&i<=l||"before"!==c&&i<u||"after"!==c&&i>l){var h=0,d=0,f=1,p=function(e,t,n){return j(e,n)/j(e,t)}(u,l,(n=u,Math.max(Math.min(i,l),n)));if(s.opacity){var m=s.opacity,g=z(m.start,m.end,p).toFixed(2);o.style.opacity=g}if(s.translateX){var y=s.translateX;h=parseInt(z(y.start,y.end,p),10)}if(s.translateY){var v=s.translateY;d=parseInt(z(v.start,v.end,p),10)}if(s.scale){var b=s.scale;f=z(b.start,b.end,p).toFixed(2)}o.style[r]="translate3d("+h+"px, "+d+"px, 0) scale("+f+")",t.set(o,i<u?"before":i>l?"after":"during")}})},U=function(){function n(e){r(this,e),this.randomId=Math.floor(6*Math.random())+1,this.color="white",this.playing=!1,this.width=800,this.height=800,this.aspectRatio=100,this.visualization="bars2",this.loaded=!1,this.loading=!1,this.visible=!1,this.duration=0,this.current=0,this.cache=new WeakMap}return n.prototype.componentWillLoad=function(){d.set({"--width":this.width+"px","--height":this.height+"px","--aspectRatio":this.aspectRatio+"%"},this.element)},n.prototype.componentDidLoad=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.interviewLines||(this.interviewLines=W(this.element)),q(this.interviewLines,this.cache,this.time),this.addIntersectionObserver(),[2]})})},n.prototype.addIntersectionObserver=function(){var e=this;"IntersectionObserver"in window&&(this.io=new IntersectionObserver(function(t){t[0].isIntersecting?e.handleInScreen():e.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))},n.prototype.handleTimeUpdate=function(e){this.current=Math.round(1e3*e.detail.time),this.duration=Math.round(1e3*e.detail.duration),q(this.interviewLines,this.cache,this.time)},Object.defineProperty(n.prototype,"time",{get:function(){return this.current},enumerable:!0,configurable:!0}),n.prototype.handleInScreen=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(t){switch(t.label){case 0:return[4,m(1e3)];case 1:return t.sent(),this.visible=!0,[4,m(100)];case 2:return t.sent(),this.audio=this.element.querySelector("web-audio"),e=this,[4,this.audio.source("interview")];case 3:return e.audio_source=t.sent(),[2]}})})},n.prototype.attachContext=function(){return e(this,void 0,void 0,function(){var e,n;return t(this,function(t){switch(t.label){case 0:return this.loaded?[3,6]:(this.loading=!0,[4,this.audio.connect_the_world()]);case 1:return t.sent(),this.audio_source?[3,4]:(e=this,[4,this.audio.source("interview")]);case 2:return e.audio_source=t.sent(),[4,this.audio_source.prepare()];case 3:t.sent(),t.label=4;case 4:return[4,this.audio_source.getDuration()];case 5:n=t.sent(),this.duration=Math.round(1e3*n),this.loaded=!0,this.loading=!1,t.label=6;case 6:return[2]}})})},n.prototype.handleOffScreen=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.pause(),[2]})})},n.prototype.play=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.audio&&this.audio_source?[4,this.audio_source.play()]:[3,2];case 1:e.sent(),this.playing=this.audio_source.playing,e.label=2;case 2:return[2]}})})},n.prototype.skipTo=function(n){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.audio&&this.audio_source?[4,this.audio_source.skipTo(n)]:[3,2];case 1:e.sent(),this.playing=this.audio_source.playing,e.label=2;case 2:return[2]}})})},n.prototype.pause=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.audio&&this.audio_source?[4,this.audio_source.pause()]:[3,2];case 1:e.sent(),this.playing=this.audio_source.playing,e.label=2;case 2:return[2]}})})},n.prototype.toggle=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.audio&&this.audio_source?[4,this.audio_source.toggle()]:[3,2];case 1:e.sent(),this.playing=this.audio_source.playing,e.label=2;case 2:return[2]}})})},n.prototype.handleClick=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return[4,this.attachContext()];case 1:return e.sent(),[4,this.toggle()];case 2:return e.sent(),this.current!==this.duration?[3,4]:[4,this.skipTo(0)];case 3:e.sent(),e.label=4;case 4:return[2]}})})},n.prototype.handleCurrentClick=function(){S.copyPlain(this.current)},n.prototype.render=function(){var e=this;return i("div",{class:"card",onDblClick:function(){e.handleClick()}},!this.visible&&i("div",null,i("skeleton-img",{width:"1050",height:"600",loading:!0}),i("div",{style:{display:"none"}},i("slot",null))),this.visible&&i("section",null,i("slot",null),i("div",{class:"transcript"},i("slot",{name:"transcript"})),i("web-audio",{name:"interview-"+this.randomId},i("web-audio-source",{src:this.src,name:"interview"})),i("web-audio-visualizer",{for:"interview-"+this.randomId,type:this.visualization,width:"1024",height:"1024",color:this.color}),i("button",{class:this.loading?"loading button":this.playing?"playing button":"button",onClick:function(){e.handleClick()}},i("stellar-asset",{name:this.loading?"sync":this.playing?"pause":"play",class:this.loading?"animation-spin":""})),i("h3",null,i("stellar-unit",{class:"current",value:this.current,from:"ms",to:"s",onClick:function(){e.handleCurrentClick()}})),i("h3",null,i("stellar-unit",{class:"duration",value:this.duration,from:"ms",to:"s"})),i("stellar-progress",{value:this.current,max:this.duration,noease:!0,blurable:!1,slender:!0,editable:!0,onValueChange:function(t){e.skipTo(t.detail.value)}})))},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return"stellar-interview{--width:800px;--height:800px;display:block}stellar-interview div.card{position:relative;display:block;width:auto;height:auto;margin:auto;overflow:hidden}stellar-interview div.card section{height:inherit;display:block;position:relative;padding-top:0!important}stellar-interview web-audio-visualizer{position:absolute;top:auto;left:0;right:0;bottom:0;width:100%;height:60%;pointer-events:none;z-index:2}stellar-interview web-audio-visualizer[type=circle]{height:100%}stellar-interview web-audio-visualizer[type=bars2]{width:80%;left:10%;right:10%}stellar-interview stellar-360-image,stellar-interview stellar-360-video,stellar-interview stellar-image,stellar-interview stellar-video{--gradient:radial-gradient(circle at 30% 107%,var(--theme-base5) 0%,var(--theme-base8) 5%,var(--theme-complement8) 45%,var(--theme-complement5) 60%,var(--theme-base5) 90%);position:relative;z-index:1;display:block}stellar-interview stellar-progress{position:absolute;top:0;left:0;width:100%;z-index:9}stellar-interview stellar-progress .progress{border:0}stellar-interview h3{color:#fff}stellar-interview stellar-unit{position:absolute;bottom:1rem;z-index:2;color:#fff!important;font-weight:700}stellar-interview stellar-unit.current{left:1rem}stellar-interview stellar-unit.duration{right:1rem}stellar-interview .transcript{position:absolute;bottom:0;width:70%;left:15%;z-index:5;pointer-events:none}stellar-interview .button{position:absolute;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;width:9rem;height:9rem;top:50%;right:50%;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);border-radius:100%;padding:0;border:0;z-index:3;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;text-align:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;z-index:4;outline:0;cursor:pointer;padding-left:1rem;mix-blend-mode:soft-light}stellar-interview .button:focus,stellar-interview .button:hover{-webkit-transform:translate(50%,-50%) scale(1.1);transform:translate(50%,-50%) scale(1.1);mix-blend-mode:hard-light}stellar-interview .button stellar-asset{font-size:7rem;margin:auto;display:block}stellar-interview .button.loading{padding:0}stellar-interview .button.playing{width:2.8rem;height:2.8rem;top:2.2rem;right:1.8rem;padding:0;background:transparent;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s}stellar-interview .button.playing stellar-asset{font-size:2.8rem}"},enumerable:!0,configurable:!0}),n}();n("stellar_interview",U);var X=function(){function e(e){r(this,e),this.in=6e3,this.out=8300,this.complement=!1}return e.prototype.render=function(){return i("div",{class:"line","data-start":this.in-100,"data-end":this.in,"data-opacity-start":"0","data-opacity-end":"1","data-translatey-start":"10","data-translatey-end":"0"},i("div",{class:"line","data-start":this.out-100,"data-end":this.out,"data-opacity-start":"1","data-opacity-end":"0"},i("slot",null)))},Object.defineProperty(e.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"stellar-interview-line{display:block;position:absolute;bottom:2rem;width:100%;left:0;right:0;padding:0 2rem;text-align:center}stellar-interview-line[complement]{opacity:.825;bottom:1rem;-webkit-transform:scale(.5);transform:scale(.5)}"},enumerable:!0,configurable:!0}),e}();n("stellar_interview_line",X);var V=function(){function n(e){r(this,e),this.size="medium",this.padding="medium",this.align="top"}return n.prototype.componentWillLoad=function(){w.definePts(this.element,{tiny:320,small:480,medium:640,large:800,massive:1024}),this.refresh()},n.prototype.componentDidLoad=function(){this.refresh()},n.prototype.refresh=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(){return(e=window.document.createEvent("UIEvents")).initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e),[2]})})},n.prototype.render=function(){return i("div",{class:"layout"},i("slot",null))},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;font-family:inherit;--grid-gap:3rem}:host .layout{display:grid;grid-gap:var(--grid-gap,3rem);margin:0 auto;padding:4rem 0;width:95%;max-width:1024px;min-height:0;min-width:0}:host .layout>*{min-width:0}:host([size=tiny]) .layout{max-width:420px}:host([size=small]) .layout{max-width:700px}:host([size=medium]) .layout{max-width:1024px}:host([size=large]) .layout{max-width:1200px}:host([size=full]) .layout{max-width:100%}:host([size=flush]) .layout{max-width:100%;width:100%}:host([padding=none]) .layout{padding:0}:host([padding=tiny]) .layout{padding:.5rem 0}:host([padding=small]) .layout{padding:1rem 0}:host([padding=medium]) .layout{padding:2rem 0}:host([padding=large]) .layout{padding:4rem 0}:host([type=copy]) .layout{padding:3rem 0}:host([align=top]) .layout{-ms-flex-align:start;align-items:flex-start}:host([align=center]) .layout{-ms-flex-align:center;align-items:center}:host([align=baseline]) .layout{-ms-flex-align:baseline;align-items:baseline}:host([type=supporting-content-right]) ::slotted(aside){-ms-flex-order:1;order:1}:host ::slotted(*){min-width:0}\@media (min-width:700px){:host([type=sidebar-right]) .layout{grid-template-columns:3fr 1fr}:host([type=sidebar]) .layout{grid-template-columns:1fr 3fr}:host([type=half]) .layout{grid-template-columns:1fr 1fr}:host([type=supporting-content]) .layout{grid-template-columns:6fr 4fr}:host([type=supporting-content-right]) .layout{grid-template-columns:4fr 6fr}:host([type=supporting-content-right]) ::slotted(aside){-ms-flex-order:-1;order:-1}}"},enumerable:!0,configurable:!0}),n}();n("stellar_layout",V);var Y=function(){function n(e){r(this,e),this.dark=!1,this.autoplay=!1,this.current=0,this.currentTrack={title:"Loading...",artist:"One sec...",picture:void 0},this.playlist="show",this.remember=!0,this.artwork=!1,this.view="playlist",this.playing=!1,this.load=!1,this.progress_value=0}return n.prototype.componentWillLoad=function(){var e=localStorage.getItem("playlist");this.playlist=e},n.prototype.componentDidLoad=function(){this.visualizer=this.element.shadowRoot.querySelector("web-audio-visualizer"),this.audio=this.element.shadowRoot.querySelector("audio"),this.progress=this.element.shadowRoot.querySelector("progress"),this.playlistItems=this.element.querySelectorAll("stellar-song"),this.currentPlaylistItem=this.element.querySelector("stellar-song[playing]"),Array.from(this.playlistItems).forEach(function(e,t){e.setIndex(t)}),this.audio&&(this.audio.volume=.7);var e=this.element.querySelector("stellar-song[playing]")||this.element.querySelector("stellar-song");e.playing=!0,this.prepare(e),this.autoplay&&this.play(),this.remember&&this.loadFromStorage(),this.handleTimeUpdates(),this.handleProgressClick()},n.prototype.handleProgressClick=function(){var e=this;this.progress.addEventListener("click",function(t){e.audio.currentTime=t.offsetX/e.progress.offsetWidth*e.audio.duration})},n.prototype.handleTimeUpdates=function(){var e=this;this.audio.addEventListener("timeupdate",function(){e.currentTime=g(parseFloat(e.audio.currentTime.toString()).toFixed(10)),e.duration=g(parseFloat(e.audio.duration.toString()).toFixed(10)),e.progress_value=0!==e.audio.currentTime&&0!==e.audio.duration?e.audio.currentTime/e.audio.duration*100:0,localStorage.setItem("track",e.current.toString()),localStorage.setItem("time",e.audio.currentTime.toString())}),this.audio.addEventListener("ended",this.next.bind(this))},n.prototype.handleKeydown=function(e){"space"===e.key?this.pause():"left"===e.key?this.previous():"right"===e.key&&this.next()},n.prototype.loadFromStorage=function(){var e=parseInt(localStorage.getItem("track")),t=parseFloat(localStorage.getItem("time")),n=localStorage.getItem("playlist");this.playlist=n,e&&t&&(this.playlistItems[e].play(),this.audio.currentTime=t)},n.prototype.prepare=function(n){return e(this,void 0,void 0,function(){var e,r;return t(this,function(t){switch(t.label){case 0:return this.currentPlaylistItem&&this.currentPlaylistItem.switching(),this.currentPlaylistItem=n,this.audio.src=this.currentPlaylistItem.src,this.audio.load(),e=this,[4,this.currentPlaylistItem.getIndex()];case 1:return e.current=t.sent(),this.currentPlaylistItem.playing=!0,r=this,[4,this.currentPlaylistItem.details()];case 2:return r.currentTrack=t.sent(),[2]}})})},n.prototype.play=function(){return e(this,void 0,void 0,function(){var e,n,r;return t(this,function(t){switch(t.label){case 0:return this.playing=!0,this.audio.play(),this.context?[3,2]:(e=new AudioContext,n=e.createMediaElementSource(this.audio),[4,this.visualizer.connect(e)]);case 1:r=t.sent(),n.connect(r.analyser),r.analyser.connect(e.destination),this.context=e,t.label=2;case 2:return[2]}})})},n.prototype.pause=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.audio.paused?(this.playing=!0,this.audio.play()):(this.playing=!1,this.audio.pause()),[2]})})},n.prototype.next=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(){return e=this.element.querySelector("stellar-song[playing]"),(e=this.current===this.playlistItems.length-1?this.element.querySelector("stellar-song:first-child"):e.nextElementSibling).play(),[2]})})},n.prototype.previous=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(){return(e=this.element.querySelector("stellar-song[playing]")).removeAttribute("playing"),(e=0===this.current?this.element.querySelector("stellar-song:last-child"):e.previousElementSibling).setAttribute("playing",!0),e.play(),[2]})})},n.prototype.togglePlaylist=function(){this.playlist="show"===this.playlist?"hide":"show",localStorage.setItem("playlist",this.playlist)},n.prototype.toggleAlbumArtView=function(){this.view="playlist"===this.view?"art":"playlist"},n.prototype.render=function(){var e=this;return i("div",{id:"player"},i("div",{class:"playlist-title"},i("slot",{name:"title"},i("h6",null,"Playlist")),i("button",{class:"playlist",onClick:function(){return e.togglePlaylist()}},i("h6",{class:"list"},i("stellar-asset",{name:"musical-notes"}),"list"))),i("div",{class:"playlist-playing"},i("button",{onClick:function(){return e.pause()},class:"toggle-button","data-playing":this.playing},i("ion-icon",this.playing?{name:"md-pause"}:{name:"md-play"})),!this.load&&i("button",{onClick:function(){e.load=!0}},"Load this playlist"),this.load&&i("div",{class:"playlist-playing-details"},i("h2",null,this.currentTrack.title),i("h3",null,this.currentTrack.artist)),this.load&&void 0!==this.currentTrack.picture&&i("div",{class:"playlist-playing-image"},i("img",{src:this.currentTrack.picture,onClick:function(){return e.toggleAlbumArtView()}})),i("web-audio-visualizer",{tag:this.audio,type:"art"===this.view?"circle":"bars"})),i("div",{id:"controls",class:"controls"},i("button",{onClick:function(){return e.previous()},class:"button previous"},i("stellar-asset",{name:"skip-backward"})),i("button",{onClick:function(){return e.next()},class:"button next"},i("stellar-asset",{name:"skip-forward"}))),i("div",{class:"playlist-progress"},i("h6",{id:"currentTime"},this.currentTime),i("h6",{id:"totalTime"},this.duration),i("progress",{id:"progress",max:"100",value:this.progress_value})),i("audio",{id:"playlist-audio",preload:"auto",tabindex:"0",controls:!0},i("source",{id:"source",type:"audio/mp3"})),i("div",{id:"playlist",class:"playlist-list "+this.playlist},this.load&&i("slot",null)))},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return":host,:host *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{--color-one:var(--theme-base1);--color-two:var(--theme-base9);--color-three:var(--theme-base5);--color-four:var(--theme-base7);--color-bg:var(--theme-base0);--color-bg-active:var(--theme-base1);--color-bg-playing:var(--theme-base2);--color-line:var(--theme-base1)}:host-context(.dark-mode):host{--color-one:var(--theme-base9);--color-two:var(--theme-base1);--color-three:var(--theme-base5);--color-four:var(--theme-base2);--color-bg:var(--black-alt);--color-bg-active:var(--theme-base8);--color-bg-playing:var(--theme-base8);--color-line:var(--black)}:host{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;background:var(--color-bg);max-width:650px;width:100%;margin:0 auto}:host button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;outline:0;border:0;cursor:pointer}:host audio{display:none}:host web-audio-visualizer{height:0;margin-top:1rem;opacity:0;-webkit-transition:all .25s var(--ease) 0s;transition:all .25s var(--ease) 0s;pointer-events:none}:host([playing]) web-audio-visualizer{opacity:1;height:10rem}:host h6{font-size:.75rem;margin:0;text-transform:uppercase;color:var(--color-two);letter-spacing:.23em;z-index:1}:host h6.list{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host h6.list stellar-asset{margin-right:.5rem}:host .playlist-playing,:host .playlist-playing-details,:host .playlist-progress,:host .playlist-title{-webkit-transition:all .1875s ease-in-out 0s;transition:all .1875s ease-in-out 0s}:host .playlist-playing-image{-webkit-transition:all .25s ease-in-out 0s;transition:all .25s ease-in-out 0s}:host .playlist-title{background:var(--color-one);height:40px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;padding:10px 30px}:host .playlist-playing-details{margin-right:30px}:host .playlist-playing{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;margin:30px}:host .playlist-playing h2,:host .playlist-playing h3{font-weight:400;margin:0}:host .playlist-playing h2{color:var(--color-two);font-weight:700;font-size:17px;overflow:hidden;width:100%}:host .playlist-playing h3{color:var(--color-four);font-size:16px;overflow:hidden;width:100%}:host .playlist-progress{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:baseline;align-items:baseline;-ms-flex-pack:justify;justify-content:space-between;width:100%;padding:0 15px 15px}:host .playlist-progress progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:absolute;height:3px;bottom:0;left:0;width:100%;-webkit-transition:all 75ms ease-in-out .25s;transition:all 75ms ease-in-out .25s;cursor:pointer;z-index:2}:host .playlist-progress progress:hover{-webkit-transition:all 75ms ease-in-out 0s;transition:all 75ms ease-in-out 0s;height:16px;bottom:-8px}:host .playlist-progress progress[value]::-moz-progress-bar{background-color:var(--color-line)}:host .playlist-progress progress[value]::-webkit-progress-bar{background-color:var(--color-line)}:host .playlist-progress progress[value]::-webkit-progress-value{background-color:var(--color-three)}:host .playlist-list{max-height:50vh;overflow:auto;-webkit-transition:all .2s ease 0s;transition:all .2s ease 0s}:host .playlist-list.hide{max-height:0}:host .controls{display:-ms-flexbox;display:flex;display:none;margin:1em 0}:host .controls .button{font-size:2rem;width:50%;-ms-flex:12 6 200px;flex:12 6 200px}:host .controls .button stellar-asset{display:inline-block}:host .playlist-playing-image{margin:auto 0 auto auto;width:5rem;-ms-flex:0 0 5rem;flex:0 0 5rem;height:5rem;cursor:pointer}:host .playlist-playing-image img{width:100%;background:#fff;border:1px solid var(--color-one);border-radius:3px;height:auto;-webkit-box-shadow:0 3px 3px 0 var(--color-one);box-shadow:0 3px 3px 0 var(--color-one)}:host .playlist-playing .toggle-button{padding:0;margin-right:20px;width:50px;-ms-flex:0 0 50px;flex:0 0 50px;height:50px;padding:14px;border-radius:100%;background:var(--color-three);color:#fff}:host .playlist-playing .toggle-button path{fill:var(--color-bg)}:host .playlist-playing .toggle-button[data-playing=false]{padding:14px 12px 14px 16px}:host .st0{fill:var(--color-three)}:host .st1{fill:#fff}:host([view=art]) .playlist-playing{position:relative;margin:0;padding:0;overflow:hidden}:host([view=art]) web-audio-visualizer{height:100%;position:absolute;bottom:0;z-index:2;-webkit-transition:all 0s var(--ease) 0s;transition:all 0s var(--ease) 0s}:host([view=art]) .playlist-playing .toggle-button{display:none}:host([view=art]) .playlist-playing .playlist-playing-details{position:absolute;bottom:0;width:100%;padding:2rem;background:var(--color-one);left:0;right:0;text-align:center;mix-blend-mode:hard-light;margin:0;-webkit-transform:translateY(100%);transform:translateY(100%);z-index:3}:host([view=art]:hover) .playlist-playing-details{-webkit-transform:translateY(0);transform:translateY(0)}:host([view=art]) .playlist-progress{padding:0 15px 0}:host([view=art]) .playlist-progress h6{display:none}:host([view=art]) .playlist-playing-image{width:100%;margin:0 auto;-ms-flex:none;flex:none;height:auto}:host([view=art]) .playlist-playing-image:focus,:host([view=art]) .playlist-playing-image:hover{-webkit-transform:scale(1.025);transform:scale(1.025);cursor:pointer}:host([view=art]) .playlist-playing-image img{width:100%}:host([view=art]) .controls{display:none}"},enumerable:!0,configurable:!0}),n}();n("stellar_playlist",Y);var K=function(){function e(e){var t=this;r(this,e),this.slender=!1,this.max=100,this.editable=!1,this.noease=!1,this.rounded=!1,this.value=0,this.secondary=0,this.blurable=!0,this.wrapper="stellar-blur",this.blur=0,this.ease=y({end:20,start:-1,duration:200,tick:function(e){t.blur=e.value},complete:function(){t.blur=0,t.ease.stop()}}),this.valueChange=u(this,"valueChange",7)}return e.prototype.componentWillLoad=function(){this.blurable||(this.wrapper="div")},e.prototype.observeValue=function(){this.blurable&&this.ease.start()},e.prototype.handleClick=function(e){if(this.editable){var t=this.element.getBoundingClientRect(),n=e.pageX-t.left,r=t.width,i=n/r*this.max,o=Math.round(100*i)/100;console.log("bounding: "+t),console.log("widthClicked: "+n),console.log("totalWidth: "+r),console.log("max: "+this.max),console.log("calc: "+i),console.log("rounded: "+o),this.rounded&&(o=Math.ceil(o)),this.value=o,this.valueChange.emit({value:this.value})}},e.prototype.progress=function(e){var t;return e?(t=(t=this.secondary/this.max*100)<100?t:100)>0?t:0:(t=(t=this.value/this.max*100)<100?t:100)>0?t:0},e.prototype.render=function(){var e=this;return i(this.wrapper,{class:"progress",horizontal:this.blur,onClick:function(t){e.handleClick(t)}},i("div",{class:"status",style:{transform:"translate("+this.progress()+"%, 0)"}}),this.secondary&&i("div",{class:"secondary",style:{transform:"translate("+this.progress(!0)+"%, 0)"}}))},Object.defineProperty(e.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{value:["observeValue"]}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return":host,:host *,:host :after,:host :before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;position:relative;overflow:hidden;--border-radius:0.3rem}:host .blur-content{display:block;height:100%}:host([editable]){cursor:pointer}:host .progress{display:block;position:relative;-webkit-transition:all .25s var(--ease) 0ms;transition:all .25s var(--ease) 0ms;background:var(--gray0);width:100%;height:.6rem;border-radius:var(--border-radius);overflow:hidden}:host([editable]:hover) .progress{height:2.4rem}:host .secondary,:host .status{position:absolute;top:0;right:0;bottom:0;left:-100%;-webkit-transition:all .35s var(--ease,ease-in-out) 0ms;transition:all .35s var(--ease,ease-in-out) 0ms;background:var(--theme-base5,var(--gray5));width:100%;z-index:2}:host .secondary{background:var(--theme-base3,var(--gray3));z-index:1}:host([slender]) .progress{border:0;height:.2rem}:host([slender][editable]:hover) .progress{height:.4rem}:host([noease]) .progress,:host([noease]) .secondary,:host([noease]) .status{-webkit-transition:none!important;transition:none!important}:host-context(.dark-mode):host .progress{background:var(--theme-base9)}:host-context(.dark-mode):host .secondary{background:var(--theme-base7,var(--gray7));z-index:1}"},enumerable:!0,configurable:!0}),e}();n("stellar_progress",K);var J=l(function(e){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof c&&c;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){return i(t[a][1][e]||e)},h,h.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof c&&c,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(){},{}],2:[function(e,t){t.exports=XMLHttpRequest},{}],3:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./MediaFileReader"),i=function(){function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._array=t,n._size=t.length,n._isInitialized=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),n(e,[{key:"init",value:function(e){setTimeout(e.onSuccess,0)}},{key:"loadRange",value:function(e,t){setTimeout(t.onSuccess,0)}},{key:"getByteAt",value:function(e){if(e>=this._array.length)throw new Error("Offset "+e+" hasn't been loaded yet.");return this._array[e]}}],[{key:"canReadFile",value:function(e){return Array.isArray(e)||"function"==typeof Buffer&&Buffer.isBuffer(e)}}]),e}();t.exports=i},{"./MediaFileReader":11}],4:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./ChunkedFileData"),i=e("./MediaFileReader"),o=function(){function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._blob=t,n._fileData=new r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i),n(e,[{key:"_init",value:function(e){this._size=this._blob.size,setTimeout(e.onSuccess,1)}},{key:"loadRange",value:function(e,t){var n=this,r=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,e[0],e[1]+1),i=new FileReader;i.onloadend=function(){var r=new Uint8Array(i.result);n._fileData.addData(e[0],r),t.onSuccess()},i.onerror=i.onabort=function(){t.onError&&t.onError({type:"blob",info:i.error})},i.readAsArrayBuffer(r)}},{key:"getByteAt",value:function(e){return this._fileData.getByteAt(e)}}],[{key:"canReadFile",value:function(e){return"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof File&&e instanceof File}}]),e}();t.exports=o},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._fileData=[]}return n(e,null,[{key:"NOT_FOUND",get:function(){return-1}}]),n(e,[{key:"addData",value:function(e,t){var n=e+t.length-1,r=this._getChunkRange(e,n);if(-1===r.startIx)this._fileData.splice(r.insertIx||0,0,{offset:e,data:t});else{var i=this._fileData[r.startIx],o=this._fileData[r.endIx],a=e>i.offset,s=n<o.offset+o.data.length-1,u={offset:Math.min(e,i.offset),data:t};if(a){var l=this._sliceData(i.data,0,e-i.offset);u.data=this._concatData(l,t)}if(s){l=this._sliceData(u.data,0,o.offset-u.offset);u.data=this._concatData(l,o.data)}this._fileData.splice(r.startIx,r.endIx-r.startIx+1,u)}}},{key:"_concatData",value:function(e,t){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)){var n=new e.constructor(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}return e.concat(t)}},{key:"_sliceData",value:function(e,t,n){return e.slice?e.slice(t,n):e.subarray(t,n)}},{key:"_getChunkRange",value:function(e,t){for(var n=-1,r=-1,i=0,o=0;o<this._fileData.length;i=++o){var a=(s=this._fileData[o].offset)+this._fileData[o].data.length;if(t<s-1)break;if(e<=a+1&&t>=s-1){n=o;break}}if(-1===n)return{startIx:-1,endIx:-1,insertIx:i};for(o=n;o<this._fileData.length;o++){var s;if(t>=(s=this._fileData[o].offset)-1&&(r=o),t<=(a=s+this._fileData[o].data.length)+1)break}return-1===r&&(r=n),{startIx:n,endIx:r}}},{key:"hasDataRange",value:function(e,t){for(var n=0;n<this._fileData.length;n++){var r=this._fileData[n];if(t<r.offset)return!1;if(e>=r.offset&&t<r.offset+r.data.length)return!0}return!1}},{key:"getByteAt",value:function(e){for(var t,n=0;n<this._fileData.length;n++){var r=this._fileData[n].offset;if(e>=r&&e<=r+this._fileData[n].data.length-1){t=this._fileData[n];break}}if(t)return t.data[e-t.offset];throw new Error("Offset "+e+" hasn't been loaded yet.")}}]),e}();t.exports=r},{}],6:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./MediaTagReader"),i=[4,132],o=[6,134],a=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"],s=function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),n(e,[{key:"_loadData",value:function(e,t){var n=this;e.loadRange([4,7],{onSuccess:function(){n._loadBlock(e,4,t)}})}},{key:"_loadBlock",value:function(e,t,n){var r=this,a=e.getByteAt(t),s=e.getInteger24At(t+1,!0);if(-1!==i.indexOf(a))e.loadRange([u=t+4,u+s],{onSuccess:function(){r._commentOffset=u,r._nextBlock(e,t,a,s,n)}});else if(-1!==o.indexOf(a)){var u;e.loadRange([u=t+4,u+s],{onSuccess:function(){r._pictureOffset=u,r._nextBlock(e,t,a,s,n)}})}else r._nextBlock(e,t,a,s,n)}},{key:"_nextBlock",value:function(e,t,n,r,i){var o=this;n>127?o._commentOffset?i.onSuccess():i.onError({type:"loadData",info:"Comment block could not be found."}):e.loadRange([t+4+r,t+4+4+r],{onSuccess:function(){o._loadBlock(e,t+4+r,i)}})}},{key:"_parseData",value:function(e){for(var t,n,r,i,o,s,u=e.getLongAt(this._commentOffset,!1)+(this._commentOffset+4),l=e.getLongAt(u,!1),c=u+4,h=0;h<l;h++){var d=e.getLongAt(c,!1),f=e.getStringWithCharsetAt(c+4,d,"utf-8").toString(),p=f.indexOf("="),m=[f.slice(0,p),f.slice(p+1)];switch(m[0]){case"TITLE":t=m[1];break;case"ARTIST":n=m[1];break;case"ALBUM":r=m[1];break;case"TRACKNUMBER":i=m[1];break;case"GENRE":o=m[1]}c+=4+d}if(this._pictureOffset){var g=e.getLongAt(this._pictureOffset,!0),y=this._pictureOffset+4,v=e.getLongAt(y,!0),b=y+4,_=e.getStringAt(b,v),S=b+v,w=e.getLongAt(S,!0),E=S+4,T=e.getStringWithCharsetAt(E,w,"utf-8").toString(),C=E+w+16,A=e.getLongAt(C,!0),M=e.getBytesAt(C+4,A,!0);s={format:_,type:a[g],description:T,data:M}}return{type:"FLAC",version:"1",tags:{title:t,artist:n,album:r,track:i,genre:o,picture:s}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(e){return"fLaC"===String.fromCharCode.apply(String,e.slice(0,4))}}]),e}();t.exports=s},{"./MediaTagReader":12}],7:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./MediaTagReader"),i=(e("./MediaFileReader"),function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),n(e,[{key:"_loadData",value:function(e,t){var n=e.getSize();e.loadRange([n-128,n-1],t)}},{key:"_parseData",value:function(e){var t=e.getSize()-128,n=e.getStringWithCharsetAt(t+3,30).toString(),r=e.getStringWithCharsetAt(t+33,30).toString(),i=e.getStringWithCharsetAt(t+63,30).toString(),a=e.getStringWithCharsetAt(t+93,4).toString(),s=e.getByteAt(t+97+28),u=e.getByteAt(t+97+29);if(0==s&&0!=u)var l="1.1",c=e.getStringWithCharsetAt(t+97,28).toString();else{l="1.0",c=e.getStringWithCharsetAt(t+97,30).toString();u=0}var h=e.getByteAt(t+97+30);if(h<255)var d=o[h];else d="";var f={type:"ID3",version:l,tags:{title:n,artist:r,album:i,year:a,comment:c,genre:d}};return u&&(f.tags.track=u),f}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(e){return"TAG"===String.fromCharCode.apply(String,e.slice(0,3))}}]),e}()),o=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];t.exports=i},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e("./MediaFileReader");var r=e("./StringUtils"),i=e("./ArrayFileReader"),o={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},a=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return n(e,null,[{key:"getFrameReaderFunction",value:function(e){return e in s?s[e]:"T"===e[0]?s["T*"]:"W"===e[0]?s["W*"]:null}},{key:"readFrames",value:function(t,n,r,i,o){for(var a={},s=this._getFrameHeaderSize(i);t<n-s;){var u=this._readFrameHeader(r,t,i),l=u.id;if(!l)break;var c=u.flags,h=u.size,d=t+u.headerSize,f=r;if(t+=u.headerSize+u.size,!o||-1!==o.indexOf(l)){if("MP3e"===l||"\0MP3"===l||"\0\0MP"===l||" MP3"===l)break;c&&c.format.unsynchronisation&&(f=this.getUnsyncFileReader(f,d,h),d=0,h=f.getSize()),c&&c.format.data_length_indicator&&(d+=4,h-=4);var p=e.getFrameReaderFunction(l),m=p?p.apply(this,[d,h,f,c,i]):null,g={id:l,size:h,description:this._getFrameDescription(l),data:m};l in a?(a[l].id&&(a[l]=[a[l]]),a[l].push(g)):a[l]=g}}return a}},{key:"_getFrameHeaderSize",value:function(e){var t=e.major;return 2==t?6:3==t||4==t?10:0}},{key:"_readFrameHeader",value:function(e,t,n){var r=n.major,i=null,o=this._getFrameHeaderSize(n);switch(r){case 2:var a=e.getStringAt(t,3),s=e.getInteger24At(t+3,!0);break;case 3:a=e.getStringAt(t,4),s=e.getLongAt(t+4,!0);break;case 4:a=e.getStringAt(t,4),s=e.getSynchsafeInteger32At(t+4)}return a!=String.fromCharCode(0,0,0)&&a!=String.fromCharCode(0,0,0,0)||(a=""),a&&r>2&&(i=this._readFrameFlags(e,t+8)),{id:a||"",size:s||0,headerSize:o||0,flags:i}}},{key:"_readFrameFlags",value:function(e,t){return{message:{tag_alter_preservation:e.isBitSetAt(t,6),file_alter_preservation:e.isBitSetAt(t,5),read_only:e.isBitSetAt(t,4)},format:{grouping_identity:e.isBitSetAt(t+1,7),compression:e.isBitSetAt(t+1,3),encryption:e.isBitSetAt(t+1,2),unsynchronisation:e.isBitSetAt(t+1,1),data_length_indicator:e.isBitSetAt(t+1,0)}}}},{key:"_getFrameDescription",value:function(e){return e in o?o[e]:"Unknown"}},{key:"getUnsyncFileReader",value:function(e,t,n){for(var r=e.getBytesAt(t,n),o=0;o<r.length-1;o++)255===r[o]&&0===r[o+1]&&r.splice(o+1,1);return new i(r)}}]),e}(),s={};function u(e){var t;switch(e){case 0:t="iso-8859-1";break;case 1:t="utf-16";break;case 2:t="utf-16be";break;case 3:t="utf-8";break;default:t="iso-8859-1"}return t}function l(e,t,n,r){var i=n.getStringWithCharsetAt(e+1,t-1,r),o=n.getStringWithCharsetAt(e+1+i.bytesReadCount,t-1-i.bytesReadCount);return{user_description:i.toString(),data:o.toString()}}s.APIC=function(e,t,n,r,i){var o=e,a=u(n.getByteAt(e));switch(i&&i.major){case 2:var s=n.getStringAt(e+1,3);e+=4;break;case 3:case 4:e+=1+(s=n.getStringWithCharsetAt(e+1,t-1)).bytesReadCount;break;default:throw new Error("Couldn't read ID3v2 major version.")}var l=n.getByteAt(e),h=c[l],d=n.getStringWithCharsetAt(e+1,t-(e-o)-1,a);return e+=1+d.bytesReadCount,{format:s.toString(),type:h,description:d.toString(),data:n.getBytesAt(e,o+t-e)}},s.CHAP=function(e,t,n,i,o){var a=e,s={},u=r.readNullTerminatedString(n.getBytesAt(e,t));s.id=u.toString(),s.startTime=n.getLongAt(e+=u.bytesReadCount,!0),s.endTime=n.getLongAt(e+=4,!0),s.startOffset=n.getLongAt(e+=4,!0),s.endOffset=n.getLongAt(e+=4,!0);var l=t-((e+=4)-a);return s.subFrames=this.readFrames(e,e+l,n,o),s},s.CTOC=function(e,t,n,i,o){var a=e,s={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},u=r.readNullTerminatedString(n.getBytesAt(e,t));s.id=u.toString(),s.topLevel=n.isBitSetAt(e+=u.bytesReadCount,1),s.ordered=n.isBitSetAt(e,0),s.entryCount=n.getByteAt(++e),e++;for(var l=0;l<s.entryCount;l++){var c=r.readNullTerminatedString(n.getBytesAt(e,t-(e-a)));s.childElementIds.push(c.toString()),e+=c.bytesReadCount}return s.subFrames=this.readFrames(e,e+(t-(e-a)),n,o),s},s.COMM=function(e,t,n){var r=e,i=u(n.getByteAt(e)),o=n.getStringAt(e+1,3),a=n.getStringWithCharsetAt(e+4,t-4,i),s=n.getStringWithCharsetAt(e+=4+a.bytesReadCount,r+t-e,i);return{language:o,short_description:a.toString(),text:s.toString()}},s.COM=s.COMM,s.PIC=function(e,t,n,r,i){return s.APIC(e,t,n,r,i)},s.PCNT=function(e,t,n){return n.getLongAt(e,!1)},s.CNT=s.PCNT,s["T*"]=function(e,t,n){var r=u(n.getByteAt(e));return n.getStringWithCharsetAt(e+1,t-1,r).toString()},s.TXXX=function(e,t,n){var r=u(n.getByteAt(e));return l(e,t,n,r)},s.WXXX=function(e,t,n){if(0===t)return null;var r=u(n.getByteAt(e));return l(e,t,n,r)},s["W*"]=function(e,t,n){return 0===t?null:n.getStringWithCharsetAt(e,t,"iso-8859-1").toString()},s.TCON=function(e,t,n,r){return s["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},s.TCO=s.TCON,s.USLT=function(e,t,n){var r=e,i=u(n.getByteAt(e)),o=n.getStringAt(e+1,3),a=n.getStringWithCharsetAt(e+4,t-4,i),s=n.getStringWithCharsetAt(e+=4+a.bytesReadCount,r+t-e,i);return{language:o,descriptor:a.toString(),lyrics:s.toString()}},s.ULT=s.USLT,s.UFID=function(e,t,n){var i=r.readNullTerminatedString(n.getBytesAt(e,t)),o=n.getBytesAt(e+=i.bytesReadCount,t-i.bytesReadCount);return{ownerIdentifier:i.toString(),identifier:o}};var c=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];t.exports=a},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./MediaTagReader"),i=(e("./MediaFileReader"),e("./ID3v2FrameReader")),o=function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),n(e,[{key:"_loadData",value:function(e,t){e.loadRange([6,9],{onSuccess:function(){e.loadRange([0,10+e.getSynchsafeInteger32At(6)-1],t)},onError:t.onError})}},{key:"_parseData",value:function(e,t){var n=0,r=e.getByteAt(n+3);if(r>4)return{type:"ID3",version:">2.4",tags:{}};var o=e.getByteAt(n+4),s=e.isBitSetAt(n+5,7),u=e.isBitSetAt(n+5,6),l=e.isBitSetAt(n+5,5),c=e.getSynchsafeInteger32At(n+6);(n+=10,u)&&(n+=e.getLongAt(n,!0)+4);var h={type:"ID3",version:"2."+r+"."+o,major:r,revision:o,flags:{unsynchronisation:s,extended_header:u,experimental_indicator:l,footer_present:!1},size:c,tags:{}};if(t)var d=this._expandShortcutTags(t);var f=c+10;h.flags.unsynchronisation&&(e=i.getUnsyncFileReader(e,n,c),n=0,f=e.getSize());var p=i.readFrames(n,f,e,h,d);for(var m in a)if(a.hasOwnProperty(m)){var g=this._getFrameData(p,a[m]);g&&(h.tags[m]=g)}for(var y in p)p.hasOwnProperty(y)&&(h.tags[y]=p[y]);return h}},{key:"_getFrameData",value:function(e,t){for(var n,r=0;n=t[r];r++)if(n in e)return(e[n]instanceof Array?e[n][0]:e[n]).data}},{key:"getShortcuts",value:function(){return a}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(e){return"ID3"===String.fromCharCode.apply(String,e.slice(0,3))}}]),e}(),a={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};t.exports=o},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./MediaTagReader"),i=(e("./MediaFileReader"),function(){function e(){return function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r),n(e,[{key:"_loadData",value:function(e,t){var n=this;e.loadRange([0,16],{onSuccess:function(){n._loadAtom(e,0,"",t)},onError:t.onError})}},{key:"_loadAtom",value:function(e,t,n,r){if(t>=e.getSize())r.onSuccess();else{var i=this,o=e.getLongAt(t,!0);if(0==o||isNaN(o))r.onSuccess();else{var a=e.getStringAt(t+4,4);if(this._isContainerAtom(a)){"meta"==a&&(t+=4);var s=(n?n+".":"")+a;"moov.udta.meta.ilst"===s?e.loadRange([t,t+o],r):e.loadRange([t+8,t+8+8],{onSuccess:function(){i._loadAtom(e,t+8,s,r)},onError:r.onError})}else e.loadRange([t+o,t+o+8],{onSuccess:function(){i._loadAtom(e,t+o,n,r)},onError:r.onError})}}}},{key:"_isContainerAtom",value:function(e){return["moov","udta","meta","ilst"].indexOf(e)>=0}},{key:"_canReadAtom",value:function(e){return"----"!==e}},{key:"_parseData",value:function(e,t){var n={};for(var r in t=this._expandShortcutTags(t),this._readAtom(n,e,0,e.getSize(),t),s)if(s.hasOwnProperty(r)){var i=n[s[r]];i&&(n[r]="track"===r?i.data.track:i.data)}return{type:"MP4",ftyp:e.getStringAt(8,4),version:e.getLongAt(12,!0),tags:n}}},{key:"_readAtom",value:function(e,t,n,r,i,o,a){a=void 0===a?"":a+"  ";for(var s=n;s<n+r;){var u=t.getLongAt(s,!0);if(0==u)return;var l=t.getStringAt(s+4,4);if(this._isContainerAtom(l))return"meta"==l&&(s+=4),void this._readAtom(e,t,s+8,u-8,i,(o?o+".":"")+l,a);(!i||i.indexOf(l)>=0)&&"moov.udta.meta.ilst"===o&&this._canReadAtom(l)&&(e[l]=this._readMetadataAtom(t,s)),s+=u}}},{key:"_readMetadataAtom",value:function(e,t){var n=e.getLongAt(t,!0),r=e.getStringAt(t+4,4),i=e.getInteger24At(t+16+1,!0),s=o[i];if("trkn"==r)u={track:e.getByteAt(t+16+11),total:e.getByteAt(t+16+13)};else if("disk"==r)u={disk:e.getByteAt(t+16+11),total:e.getByteAt(t+16+13)};else{var u,l=t+24,c=n-24;switch("covr"===r&&"uint8"===s&&(s="jpeg"),s){case"text":u=e.getStringWithCharsetAt(l,c,"utf-8").toString();break;case"uint8":u=e.getShortAt(l,!1);break;case"int":case"uint":u=("int"==s?1==c?e.getSByteAt:2==c?e.getSShortAt:4==c?e.getSLongAt:e.getLongAt:1==c?e.getByteAt:2==c?e.getShortAt:e.getLongAt).call(e,l+(8==c?4:0),!0);break;case"jpeg":case"png":u={format:"image/"+s,data:e.getBytesAt(l,c)}}}return{id:r,size:n,description:a[r]||"Unknown",data:u}}},{key:"getShortcuts",value:function(){return s}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(e){return"ftyp"===String.fromCharCode.apply(String,e.slice(4,8))}}]),e}()),o={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},a={"alb":"Album","ART":"Artist",aART:"Album Artist","day":"Release Date","nam":"Title","gen":"Genre",gnre:"Genre",trkn:"Track Number","wrt":"Composer","too":"Encoding Tool","enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","grp":"Grouping",keyw:"Keywords","lyr":"Lyrics","cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},s={title:"nam",artist:"ART",album:"alb",year:"day",comment:"cmt",track:"trkn",genre:"gen",picture:"covr",lyrics:"lyr"};t.exports=i},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./StringUtils"),i=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._isInitialized=!1,this._size=0}return n(e,[{key:"init",value:function(e){var t=this;if(!this._isInitialized)return this._init({onSuccess:function(){t._isInitialized=!0,e.onSuccess()},onError:e.onError});setTimeout(e.onSuccess,1)}},{key:"_init",value:function(){throw new Error("Must implement init function")}},{key:"loadRange",value:function(){throw new Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw new Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(){throw new Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=this.getByteAt(e+r);return n}},{key:"isBitSetAt",value:function(e,t){return 0!=(this.getByteAt(e)&1<<t)}},{key:"getSByteAt",value:function(e){var t=this.getByteAt(e);return t>127?t-256:t}},{key:"getShortAt",value:function(e,t){var n=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e);return n<0&&(n+=65536),n}},{key:"getSShortAt",value:function(e,t){var n=this.getShortAt(e,t);return n>32767?n-65536:n}},{key:"getLongAt",value:function(e,t){var n=this.getByteAt(e),r=this.getByteAt(e+1),i=this.getByteAt(e+2),o=this.getByteAt(e+3),a=t?(((n<<8)+r<<8)+i<<8)+o:(((o<<8)+i<<8)+r<<8)+n;return a<0&&(a+=4294967296),a}},{key:"getSLongAt",value:function(e,t){var n=this.getLongAt(e,t);return n>2147483647?n-4294967296:n}},{key:"getInteger24At",value:function(e,t){var n=this.getByteAt(e),r=this.getByteAt(e+1),i=this.getByteAt(e+2),o=t?((n<<8)+r<<8)+i:((i<<8)+r<<8)+n;return o<0&&(o+=16777216),o}},{key:"getStringAt",value:function(e,t){for(var n=[],r=e,i=0;r<e+t;r++,i++)n[i]=String.fromCharCode(this.getByteAt(r));return n.join("")}},{key:"getStringWithCharsetAt",value:function(e,t,n){var i,o=this.getBytesAt(e,t);switch((n||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":i=r.readUTF16String(o,"utf-16be"===n);break;case"utf-8":i=r.readUTF8String(o);break;default:i=r.readNullTerminatedString(o)}return i}},{key:"getCharAt",value:function(e){return String.fromCharCode(this.getByteAt(e))}},{key:"getSynchsafeInteger32At",value:function(e){var t=this.getByteAt(e),n=this.getByteAt(e+1),r=this.getByteAt(e+2);return 127&this.getByteAt(e+3)|(127&r)<<7|(127&n)<<14|(127&t)<<21}}],[{key:"canReadFile",value:function(){throw new Error("Must implement canReadFile function")}}]),e}();t.exports=i},{"./StringUtils":13}],12:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e("./MediaFileReader");var r=function(){function e(t){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._mediaFileReader=t,this._tags=null}return n(e,[{key:"setTagsToRead",value:function(e){return this._tags=e,this}},{key:"read",value:function(e){var t=this;this._mediaFileReader.init({onSuccess:function(){t._loadData(t._mediaFileReader,{onSuccess:function(){try{var n=t._parseData(t._mediaFileReader,t._tags)}catch(t){if(e.onError)return void e.onError({type:"parseData",info:t.message})}e.onSuccess(n)},onError:e.onError})},onError:e.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(){throw new Error("Must implement _loadData function")}},{key:"_parseData",value:function(){throw new Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(e){if(!e)return null;for(var t,n=[],r=this.getShortcuts(),i=0;t=e[i];i++)n=n.concat(r[t]||[t]);return n}}],[{key:"getTagIdentifierByteRange",value:function(){throw new Error("Must implement")}},{key:"canReadTagFormat",value:function(){throw new Error("Must implement")}}]),e}();t.exports=r},{"./MediaFileReader":11}],13:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(t,n){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._value=t,this.bytesReadCount=n,this.length=t.length}return n(e,[{key:"toString",value:function(){return this._value}}]),e}();t.exports={readUTF16String:function(e,t,n){var i=0,o=1,a=0;n=Math.min(n||e.length,e.length),254==e[0]&&255==e[1]?(t=!0,i=2):255==e[0]&&254==e[1]&&(t=!1,i=2),t&&(o=0,a=1);for(var s=[],u=0;i<n;u++){var l=e[i+o],c=(l<<8)+e[i+a];if(i+=2,0==c)break;if(l<216||l>=224)s[u]=String.fromCharCode(c);else{var h=e[i+o],d=e[i+a];i+=2,s[u]=String.fromCharCode(c,(h<<8)+d)}}return new r(s.join(""),i)},readUTF8String:function(e,t){var n=0;t=Math.min(t||e.length,e.length),239==e[0]&&187==e[1]&&191==e[2]&&(n=3);for(var i=[],o=0;n<t;o++){var a=e[n++];if(0==a)break;if(a<128)i[o]=String.fromCharCode(a);else if(a>=194&&a<224){var s=e[n++];i[o]=String.fromCharCode(((31&a)<<6)+(63&s))}else if(a>=224&&a<240){s=e[n++];var u=e[n++];i[o]=String.fromCharCode(((255&a)<<12)+((63&s)<<6)+(63&u))}else if(a>=240&&a<245){var l=((7&a)<<18)+((63&(s=e[n++]))<<12)+((63&(u=e[n++]))<<6)+(63&e[n++])-65536;i[o]=String.fromCharCode(55296+(l>>10),56320+(1023&l))}}return new r(i.join(""),n)},readNullTerminatedString:function(e,t){var n=[];t=t||e.length;for(var i=0;i<t;){var o=e[i++];if(0==o)break;n[i-1]=String.fromCharCode(o)}return new r(n.join(""),i)}}},{}],14:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e("./ChunkedFileData"),i=e("./MediaFileReader"),o=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._url=e,n._fileData=new r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),n(t,[{key:"_init",value:function(e){t._config.avoidHeadRequests?this._fetchSizeWithGetRequest(e):this._fetchSizeWithHeadRequest(e)}},{key:"_fetchSizeWithHeadRequest",value:function(e){var t=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(n){var r=t._parseContentLength(n);r?(t._size=r,e.onSuccess()):t._fetchSizeWithGetRequest(e)},onError:e.onError})}},{key:"_fetchSizeWithGetRequest",value:function(e){var t=this,n=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",n,{onSuccess:function(n){var r=t._parseContentRange(n),i=t._getXhrResponseContent(n);if(r){if(null==r.instanceLength)return void t._fetchEntireFile(e);t._size=r.instanceLength}else t._size=i.length;t._fileData.addData(0,i),e.onSuccess()},onError:e.onError})}},{key:"_fetchEntireFile",value:function(e){var t=this;this._makeXHRRequest("GET",null,{onSuccess:function(n){var r=t._getXhrResponseContent(n);t._size=r.length,t._fileData.addData(0,r),e.onSuccess()},onError:e.onError})}},{key:"_getXhrResponseContent",value:function(e){return e.responseBody||e.responseText||""}},{key:"_parseContentLength",value:function(e){var t=this._getResponseHeader(e,"Content-Length");return null==t?t:parseInt(t,10)}},{key:"_parseContentRange",value:function(e){var t=this._getResponseHeader(e,"Content-Range");if(t){var n=t.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!n)throw new Error("FIXME: Unknown Content-Range syntax: "+t);return{firstBytePosition:parseInt(n[1],10),lastBytePosition:parseInt(n[2],10),instanceLength:n[3]?parseInt(n[3],10):null}}return null}},{key:"loadRange",value:function(e,t){var n=this;n._fileData.hasDataRange(e[0],Math.min(n._size,e[1]))?setTimeout(t.onSuccess,1):((e=this._roundRangeToChunkMultiple(e))[1]=Math.min(n._size,e[1]),this._makeXHRRequest("GET",e,{onSuccess:function(r){var i=n._getXhrResponseContent(r);n._fileData.addData(e[0],i),t.onSuccess()},onError:t.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(e){var t=1024*Math.ceil((e[1]-e[0]+1)/1024);return[e[0],e[0]+t-1]}},{key:"_makeXHRRequest",value:function(e,n,r){var i=this._createXHRObject();i.open(e,this._url);var o=function(){200===i.status||206===i.status?r.onSuccess(i):r.onError&&r.onError({type:"xhr",info:"Unexpected HTTP status "+i.status+".",xhr:i}),i=null};void 0!==i.onload?(i.onload=o,i.onerror=function(){r.onError&&r.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:i})}):i.onreadystatechange=function(){4===i.readyState&&o()},t._config.timeoutInSec&&(i.timeout=1e3*t._config.timeoutInSec,i.ontimeout=function(){r.onError&&r.onError({type:"xhr",info:"Timeout after "+i.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:i})}),i.overrideMimeType("text/plain; charset=x-user-defined"),n&&this._setRequestHeader(i,"Range","bytes="+n[0]+"-"+n[1]),this._setRequestHeader(i,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),i.send(null)}},{key:"_setRequestHeader",value:function(e,n,r){t._config.disallowedXhrHeaders.indexOf(n.toLowerCase())<0&&e.setRequestHeader(n,r)}},{key:"_hasResponseHeader",value:function(e,t){var n=e.getAllResponseHeaders();if(!n)return!1;for(var r=n.split("\r\n"),i=[],o=0;o<r.length;o++)i[o]=r[o].split(":")[0].toLowerCase();return i.indexOf(t.toLowerCase())>=0}},{key:"_getResponseHeader",value:function(e,t){return this._hasResponseHeader(e,t)?e.getResponseHeader(t):null}},{key:"getByteAt",value:function(e){return 255&this._fileData.getByteAt(e).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(e("xhr2").XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw new Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(e){return"string"==typeof e&&/^[a-z]+:\/\//i.test(e)}},{key:"setConfig",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this._config[t]=e[t]);for(var n=this._config.disallowedXhrHeaders,r=0;r<n.length;r++)n[r]=n[r].toLowerCase()}}]),t}();o._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},t.exports=o},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e("./MediaFileReader");var i=e("./NodeFileReader"),o=e("./XhrFileReader"),a=e("./BlobFileReader"),s=e("./ArrayFileReader"),u=(e("./MediaTagReader"),e("./ID3v1TagReader")),l=e("./ID3v2TagReader"),c=e("./MP4TagReader"),h=e("./FLACTagReader"),d=[],f=[];function p(e,t){return!(e.offset>=0&&e.offset+e.length>=t||e.offset<0&&(-e.offset>t||e.offset+e.length>0))}var m=function(){function e(t){r(this,e),this._file=t}return n(e,[{key:"setTagsToRead",value:function(e){return this._tagsToRead=e,this}},{key:"setFileReader",value:function(e){return this._fileReader=e,this}},{key:"setTagReader",value:function(e){return this._tagReader=e,this}},{key:"read",value:function(e){var t=new(this._getFileReader())(this._file),n=this;t.init({onSuccess:function(){n._getTagReader(t,{onSuccess:function(r){new r(t).setTagsToRead(n._tagsToRead).read(e)},onError:e.onError})},onError:e.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var e=0;e<d.length;e++)if(d[e].canReadFile(this._file))return d[e];throw new Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(e,t){if(this._tagReader){var n=this._tagReader;setTimeout(function(){t.onSuccess(n)},1)}else this._findTagReader(e,t)}},{key:"_findTagReader",value:function(e,t){for(var n=[],r=[],i=e.getSize(),o=0;o<f.length;o++){var a=f[o].getTagIdentifierByteRange();p(a,i)&&(a.offset>=0&&a.offset<i/2||a.offset<0&&a.offset<-i/2?n.push(f[o]):r.push(f[o]))}var s=!1,u={onSuccess:function(){if(s){for(var n=0;n<f.length;n++){var r=f[n].getTagIdentifierByteRange();if(p(r,i)){try{var o=e.getBytesAt(r.offset>=0?r.offset:r.offset+i,r.length)}catch(e){return void(t.onError&&t.onError({type:"fileReader",info:e.message}))}if(f[n].canReadTagFormat(o))return void t.onSuccess(f[n])}}t.onError&&t.onError({type:"tagFormat",info:"No suitable tag reader found"})}else s=!0},onError:t.onError};this._loadTagIdentifierRanges(e,n,u),this._loadTagIdentifierRanges(e,r,u)}},{key:"_loadTagIdentifierRanges",value:function(e,t,n){if(0!==t.length){for(var r=[Number.MAX_VALUE,0],i=e.getSize(),o=0;o<t.length;o++){var a=t[o].getTagIdentifierByteRange(),s=a.offset>=0?a.offset:a.offset+i,u=s+a.length-1;r[0]=Math.min(s,r[0]),r[1]=Math.max(u,r[1])}e.loadRange(r,n)}else setTimeout(n.onSuccess,1)}}]),e}(),g=function(){function e(){r(this,e)}return n(e,null,[{key:"addFileReader",value:function(t){return d.push(t),e}},{key:"addTagReader",value:function(t){return f.push(t),e}},{key:"removeTagReader",value:function(t){var n=f.indexOf(t);return n>=0&&f.splice(n,1),e}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){o.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(e){o.setConfig({disallowedXhrHeaders:e})}},{key:"setXhrTimeoutInSec",value:function(e){o.setConfig({timeoutInSec:e})}}]),e}();g.addFileReader(o).addFileReader(a).addFileReader(s).addTagReader(l).addTagReader(u).addTagReader(c).addTagReader(h),"undefined"==typeof process||process.browser||g.addFileReader(i),t.exports={read:function(e,t){new m(e).read(t)},Reader:m,Config:g}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)}),Q=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},$=1;function Z(e){var t=Q();return e.onerror=function(n){"function"==typeof n.preventDefault&&n.preventDefault(),t.reject(e.error)},e.onsuccess=function(){return t.resolve(e.result)},t.promise}var ee=function(){function n(e){r(this,e),this._index=0,this.songChanged=u(this,"songChanged",7)}return n.prototype.songChangedHandler=function(){this.songChanged.emit(this._index)},Object.defineProperty(n.prototype,"url",{get:function(){return window.location.origin+v(this.src)},enumerable:!0,configurable:!0}),n.prototype.componentWillLoad=function(){return e(this,void 0,void 0,function(){var n,r,i,o,a=this;return t(this,function(s){switch(s.label){case 0:return[4,(u="songs",l=u,new Promise(function(e,t){var n=window.indexedDB.open(u,$);n.onupgradeneeded=function(){return n.result.createObjectStore(l)},n.onblocked=function(){return t(new Error("onblocked"))},n.onerror=function(){return t(n.error)},n.onsuccess=function(){var t=n.result;e(function(e,n){return function(e){var t=e.db,n=e.storeName,r=e.transactionType,i=e.fn;return new Promise(function(e,o){var a=t.transaction(n,r),s=a.objectStore(n),u=i(s),l=Array.isArray(u)?Promise.all(u.map(Z)):Z(u);a.onerror=function(){return o(a.error)},a.oncomplete=function(){return e(l)}})}({db:t,storeName:l,transactionType:e,fn:n})})}}))];case 1:return[4,(n=s.sent())("readonly",function(e){return e.get(a.src)})];case 2:return(r=s.sent())?[3,3]:(J.read(this.url,{onSuccess:function(r){return e(a,void 0,void 0,function(){var e,i,o,a,s=this;return t(this,function(t){switch(t.label){case 0:if(e={title:r.tags.title,album:r.tags.album,genre:r.tags.genre,artist:r.tags.artist,picture:r.tags.picture},!r.tags.picture)return[3,2];for(i="",o=0;o<r.tags.picture.data.length;o++)i+=String.fromCharCode(r.tags.picture.data[o]);return a="data:image/jpeg;base64,"+window.btoa(i),e.picture=a,[4,n("readwrite",function(t){return t.put(a,e.album+"_picture")})];case 1:return t.sent(),[3,3];case 2:e.picture=void 0,t.label=3;case 3:return[4,n("readwrite",function(t){return t.put(JSON.stringify(e),s.src)})];case 4:return t.sent(),this.updateDetails(e),[2]}})})},onError:function(e){a.error=e}}),[3,5]);case 3:return i=JSON.parse(r),[4,n("readonly",function(e){return e.get(i.album+"_picture")})];case 4:o=s.sent(),i.picture=o,this.updateDetails(i),s.label=5;case 5:return[2]}var u,l})})},n.prototype.componentDidLoad=function(){this.player=this.element.parentElement},n.prototype.updateDetails=function(e){this.title=e.title,this.album=e.album,this.genre=e.genre,this.artist=e.artist,this.picture=e.picture},n.prototype.details=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,{title:this.title,album:this.album,genre:this.genre,artist:this.artist,picture:this.picture}]})})},n.prototype.preload=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(){return(e=new Audio).src=this.src,e.preload="auto",e.volume=1,[2]})})},n.prototype.play=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.playing||(this.songChangedHandler(),this.playing=!0,this.player.prepare(this.element),this.player.play()),[2]})})},n.prototype.switching=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.playing=!1,[2]})})},n.prototype.getIndex=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this._index]})})},n.prototype.setIndex=function(n){return e(this,void 0,void 0,function(){return t(this,function(){return this._index=n,[2]})})},n.prototype.render=function(){var e=this;return i("button",{onClick:function(){return e.play()}},i("span",{class:"index"},!this.playing&&b(this._index),this.playing&&i("stellar-asset",{name:"play"})),i("div",{class:"tracklisting"},this.artwork&&i("img",{src:this.picture,class:"preview-image"}),i("h2",null,i("span",null,this.title||"Loading...")," / ",this.artist||"Loading...")),i("img",{src:this.picture,class:"backdrop"}))},Object.defineProperty(n,"assetsDirs",{get:function(){return["vendor"]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return":host{display:block;width:100%;-ms-flex:0 0 100%;flex:0 0 100%}:host button{background:none;width:100%;border:0;outline:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-ms-flexbox;display:flex;padding:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;position:relative;overflow:hidden;border-top:1px solid var(--color-line)}:host button:focus,:host button:hover{background:var(--color-bg-active)}:host([playing]) button{background:var(--color-bg-playing)!important}:host .index{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:45px;width:55px;-ms-flex:0 0 55px;flex:0 0 55px;border-right:1px solid var(--color-line);font-size:.75rem;margin:0;margin-right:20px;text-transform:uppercase;color:var(--color-two);letter-spacing:.23em;z-index:1;font-weight:900}:host([playing]) .index{font-size:1.5rem}:host img.preview-image{width:2rem;height:2rem;display:inline-block;margin-right:10px;-webkit-transition:all .15s ease-in-out 0s;transition:all .15s ease-in-out 0s;-webkit-filter:grayscale(100%);filter:grayscale(100%);padding:0;background:#fff;border-radius:4px;z-index:1}:host([playing]) img.preview-image{-webkit-filter:grayscale(0);filter:grayscale(0)}:host h2{z-index:1;color:var(--color-four);font-size:14px;font-weight:400;margin:0;line-height:1;margin-top:-3px;white-space:nowrap}:host h2 span{color:var(--color-two)}:host .tracklisting{overflow:auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;height:46px}:host .tracklisting:after{content:\"\";display:block;width:30px;height:30px;-ms-flex:0 0 30px;flex:0 0 30px}:host img.backdrop{position:absolute;width:100%;-webkit-filter:blur(20px) grayscale(75%);filter:blur(20px) grayscale(75%);opacity:.15;z-index:0;mix-blend-mode:color}:host button[data-playing=true] img.preview-image{width:30px;height:30px;-webkit-filter:grayscale(0);filter:grayscale(0)}:host button[data-playing=true] img.backdrop{opacity:1}:host button[data-playing=true] .index,:host button[data-playing=true] h2 span{color:var(--color-three)!important}"},enumerable:!0,configurable:!0}),n}();n("stellar_song",ee);var te={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},ne=function(e){return!(!e||!te[typeof e])},re=Object.prototype,ie=RegExp("^"+String(re.toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),oe=Object.prototype.hasOwnProperty,ae=ie.test(ae=Object.keys)&&ae,se=ae?function(e){return ne(e)?ae(e):[]}:function(e){var t,n=e,r=[];if(!n)return r;if(!te[typeof e])return r;for(t in n)oe.call(n,t)&&r.push(t);return r},ue=ie.test(ue=Object.create)&&ue;function le(e){return ne(e)?ue(e):{}}ue||(le=function(){function e(){}return function(t){if(ne(t)){e.prototype=t;var n=new e;e.prototype=null}return n||h.Object()}}());var ce=le,he={configurable:!1,enumerable:!1,value:null,writable:!1},de=function(){try{var e={},t=ie.test(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(e){}return n}(),fe=de?function(e,t){he.value=t,de(e,"__bindData__",he)}:function(){},pe=[].push,me=function(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(i<0?0:i);++r<i;)o[r]=e[t+r];return o},ge=[].push,ye=[].push,ve=function e(t,n,r,i,o,a){var s,u=1&n,l=4&n,c=16&n,h=32&n;if(!(2&n||(s=t,"function"==typeof s)))throw new TypeError;c&&!r.length&&(n&=-17,c=r=!1),h&&!i.length&&(n&=-33,h=i=!1);var d=t&&t.__bindData__;return d&&!0!==d?(d=d.slice(),!u||1&d[1]||(d[4]=o),!u&&1&d[1]&&(n|=8),!l||4&d[1]||(d[5]=a),c&&ye.apply(d[2]||(d[2]=[]),r),h&&ye.apply(d[3]||(d[3]=[]),i),d[1]|=n,e.apply(null,d)):(1==n||17===n?function(e){var t=e[0],n=e[2],r=e[4];function i(){if(n){var e=n.slice();pe.apply(e,arguments)}if(this instanceof i){var o=ce(t.prototype),a=t.apply(o,e||arguments);return ne(a)?a:o}return t.apply(r,e||arguments)}return fe(i,e),i}:function e(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=1&r,l=2&r,c=4&r,h=8&r,d=n;function f(){var t=u?a:this;if(i){var p=i.slice();ge.apply(p,arguments)}if((o||c)&&(p||(p=me(arguments)),o&&ge.apply(p,o),c&&p.length<s))return r|=16,e([n,h?r:-4&r,p,null,a,s]);if(p||(p=arguments),l&&(n=t[d]),this instanceof f){t=ce(n.prototype);var m=n.apply(t,p);return ne(m)?m:t}return n.apply(t,p)}return fe(f,t),f})([t,n,r,i,o,a])},be=function(e){return e},_e={};_e.funcDecomp=!ie.test(h.WinRTError)&&/\bthis\b/.test(function(){return this}),_e.funcNames="string"==typeof Function.name;var Se,we=_e,Ee=/^\s*function[ \n\r\t]+\w/,Te=/\bthis\b/,Ce=Function.prototype.toString,Ae=function(e,t,n){if("function"!=typeof e)return be;if(void 0===t||!("prototype"in e))return e;var r=e.__bindData__;if(void 0===r&&(we.funcNames&&(r=!e.name),!(r=r||!we.funcDecomp))){var i=Ce.call(e);we.funcNames||(r=!Ee.test(i)),r||(r=Te.test(i),fe(e,r))}if(!1===r||!0!==r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(e,t){return arguments.length>2?ve(e,17,me(arguments,2),null,t):ve(e,1,null,null,t)}(e,t)},Me=function(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&void 0===n?t:Ae(t,n,3),"number"==typeof i)for(;++r<i&&!1!==t(e[r],r,e););else!function(e,t,n){var r,i=e,o=i;if(!i)return o;if(!te[typeof i])return o;t=t&&void 0===n?t:Ae(t,n,3);for(var a=-1,s=te[typeof i]&&se(i),u=s?s.length:0;++a<u;)if(!1===t(i[r=s[a]],r,e))return o}(e,t);return e},Ie={length:{metric:{mm:{name:{singular:"Millimeter",plural:"Millimeters"},to_anchor:.001},cm:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:.01},m:{name:{singular:"Meter",plural:"Meters"},to_anchor:1},km:{name:{singular:"Kilometer",plural:"Kilometers"},to_anchor:1e3}},imperial:{in:{name:{singular:"Inch",plural:"Inches"},to_anchor:1/12},yd:{name:{singular:"Yard",plural:"Yards"},to_anchor:3},"ft-us":{name:{singular:"US Survey Foot",plural:"US Survey Feet"},to_anchor:1.000002},ft:{name:{singular:"Foot",plural:"Feet"},to_anchor:1},mi:{name:{singular:"Mile",plural:"Miles"},to_anchor:5280}},_anchors:{metric:{unit:"m",ratio:3.28084},imperial:{unit:"ft",ratio:1/3.28084}}},area:{metric:{mm2:{name:{singular:"Square Millimeter",plural:"Square Millimeters"},to_anchor:1e-6},cm2:{name:{singular:"Centimeter",plural:"Centimeters"},to_anchor:1e-4},m2:{name:{singular:"Square Meter",plural:"Square Meters"},to_anchor:1},ha:{name:{singular:"Hectare",plural:"Hectares"},to_anchor:1e4},km2:{name:{singular:"Square Kilometer",plural:"Square Kilometers"},to_anchor:1e6}},imperial:{in2:{name:{singular:"Square Inch",plural:"Square Inches"},to_anchor:1/144},yd2:{name:{singular:"Square Yard",plural:"Square Yards"},to_anchor:9},ft2:{name:{singular:"Square Foot",plural:"Square Feet"},to_anchor:1},ac:{name:{singular:"Acre",plural:"Acres"},to_anchor:43560},mi2:{name:{singular:"Square Mile",plural:"Square Miles"},to_anchor:27878400}},_anchors:{metric:{unit:"m2",ratio:10.7639},imperial:{unit:"ft2",ratio:1/10.7639}}},mass:{metric:{mcg:{name:{singular:"Microgram",plural:"Micrograms"},to_anchor:1e-6},mg:{name:{singular:"Milligram",plural:"Milligrams"},to_anchor:.001},g:{name:{singular:"Gram",plural:"Grams"},to_anchor:1},kg:{name:{singular:"Kilogram",plural:"Kilograms"},to_anchor:1e3},mt:{name:{singular:"Metric Tonne",plural:"Metric Tonnes"},to_anchor:1e6}},imperial:{oz:{name:{singular:"Ounce",plural:"Ounces"},to_anchor:1/16},lb:{name:{singular:"Pound",plural:"Pounds"},to_anchor:1},t:{name:{singular:"Ton",plural:"Tons"},to_anchor:2e3}},_anchors:{metric:{unit:"g",ratio:1/453.592},imperial:{unit:"lb",ratio:453.592}}},volume:{metric:{mm3:{name:{singular:"Cubic Millimeter",plural:"Cubic Millimeters"},to_anchor:1e-6},cm3:{name:{singular:"Cubic Centimeter",plural:"Cubic Centimeters"},to_anchor:.001},ml:{name:{singular:"Millilitre",plural:"Millilitres"},to_anchor:.001},cl:{name:{singular:"Centilitre",plural:"Centilitres"},to_anchor:.01},dl:{name:{singular:"Decilitre",plural:"Decilitres"},to_anchor:.1},l:{name:{singular:"Litre",plural:"Litres"},to_anchor:1},kl:{name:{singular:"Kilolitre",plural:"Kilolitres"},to_anchor:1e3},m3:{name:{singular:"Cubic meter",plural:"Cubic meters"},to_anchor:1e3},km3:{name:{singular:"Cubic kilometer",plural:"Cubic kilometers"},to_anchor:1e12},krm:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:.001},tsk:{name:{singular:"Tesked",plural:"Teskedar"},to_anchor:.005},msk:{name:{singular:"Matsked",plural:"Matskedar"},to_anchor:.015},kkp:{name:{singular:"Kaffekopp",plural:"Kaffekoppar"},to_anchor:.15},glas:{name:{singular:"Glas",plural:"Glas"},to_anchor:.2},kanna:{name:{singular:"Kanna",plural:"Kannor"},to_anchor:2.617}},imperial:{tsp:{name:{singular:"Teaspoon",plural:"Teaspoons"},to_anchor:1/6},Tbs:{name:{singular:"Tablespoon",plural:"Tablespoons"},to_anchor:.5},in3:{name:{singular:"Cubic inch",plural:"Cubic inches"},to_anchor:.55411},"fl-oz":{name:{singular:"Fluid Ounce",plural:"Fluid Ounces"},to_anchor:1},cup:{name:{singular:"Cup",plural:"Cups"},to_anchor:8},pnt:{name:{singular:"Pint",plural:"Pints"},to_anchor:16},qt:{name:{singular:"Quart",plural:"Quarts"},to_anchor:32},gal:{name:{singular:"Gallon",plural:"Gallons"},to_anchor:128},ft3:{name:{singular:"Cubic foot",plural:"Cubic feet"},to_anchor:957.506},yd3:{name:{singular:"Cubic yard",plural:"Cubic yards"},to_anchor:25852.7}},_anchors:{metric:{unit:"l",ratio:33.8140226},imperial:{unit:"fl-oz",ratio:1/33.8140226}}},each:{metric:{ea:{name:{singular:"Each",plural:"Each"},to_anchor:1},dz:{name:{singular:"Dozen",plural:"Dozens"},to_anchor:12}},imperial:{},_anchors:{metric:{unit:"ea",ratio:1}}},temperature:{metric:{C:{name:{singular:"degree Celsius",plural:"degrees Celsius"},to_anchor:1,anchor_shift:0},K:{name:{singular:"degree Kelvin",plural:"degrees Kelvin"},to_anchor:1,anchor_shift:273.15}},imperial:{F:{name:{singular:"degree Fahrenheit",plural:"degrees Fahrenheit"},to_anchor:1},R:{name:{singular:"degree Rankine",plural:"degrees Rankine"},to_anchor:1,anchor_shift:459.67}},_anchors:{metric:{unit:"C",transform:function(e){return e/(5/9)+32}},imperial:{unit:"F",transform:function(e){return 5/9*(e-32)}}}},time:{metric:{ns:{name:{singular:"Nanosecond",plural:"Nanoseconds"},to_anchor:1e-9},mu:{name:{singular:"Microsecond",plural:"Microseconds"},to_anchor:1e-6},ms:{name:{singular:"Millisecond",plural:"Milliseconds"},to_anchor:.001},s:{name:{singular:"Second",plural:"Seconds"},to_anchor:1},min:{name:{singular:"Minute",plural:"Minutes"},to_anchor:60},h:{name:{singular:"Hour",plural:"Hours"},to_anchor:3600},d:{name:{singular:"Day",plural:"Days"},to_anchor:86400},week:{name:{singular:"Week",plural:"Weeks"},to_anchor:604800},month:{name:{singular:"Month",plural:"Months"},to_anchor:2629800},year:{name:{singular:"Year",plural:"Years"},to_anchor:31557600}},_anchors:{metric:{unit:"s",ratio:1}}},digital:{bits:{b:{name:{singular:"Bit",plural:"Bits"},to_anchor:1},Kb:{name:{singular:"Kilobit",plural:"Kilobits"},to_anchor:1024},Mb:{name:{singular:"Megabit",plural:"Megabits"},to_anchor:1048576},Gb:{name:{singular:"Gigabit",plural:"Gigabits"},to_anchor:1073741824},Tb:{name:{singular:"Terabit",plural:"Terabits"},to_anchor:1099511627776}},bytes:{B:{name:{singular:"Byte",plural:"Bytes"},to_anchor:1},KB:{name:{singular:"Kilobyte",plural:"Kilobytes"},to_anchor:1024},MB:{name:{singular:"Megabyte",plural:"Megabytes"},to_anchor:1048576},GB:{name:{singular:"Gigabyte",plural:"Gigabytes"},to_anchor:1073741824},TB:{name:{singular:"Terabyte",plural:"Terabytes"},to_anchor:1099511627776}},_anchors:{bits:{unit:"b",ratio:1/8},bytes:{unit:"B",ratio:8}}},partsPer:{metric:{ppm:{name:{singular:"Part-per Million",plural:"Parts-per Million"},to_anchor:1},ppb:{name:{singular:"Part-per Billion",plural:"Parts-per Billion"},to_anchor:.001},ppt:{name:{singular:"Part-per Trillion",plural:"Parts-per Trillion"},to_anchor:1e-6},ppq:{name:{singular:"Part-per Quadrillion",plural:"Parts-per Quadrillion"},to_anchor:1e-9}},imperial:{},_anchors:{metric:{unit:"ppm",ratio:1e-6}}},speed:{metric:{"m/s":{name:{singular:"Metre per second",plural:"Metres per second"},to_anchor:3.6},"km/h":{name:{singular:"Kilometre per hour",plural:"Kilometres per hour"},to_anchor:1}},imperial:{"m/h":{name:{singular:"Mile per hour",plural:"Miles per hour"},to_anchor:1},knot:{name:{singular:"Knot",plural:"Knots"},to_anchor:1.150779},"ft/s":{name:{singular:"Foot per second",plural:"Feet per second"},to_anchor:.681818}},_anchors:{metric:{unit:"km/h",ratio:1/1.609344},imperial:{unit:"m/h",ratio:1.609344}}},pace:{metric:{"min/km":{name:{singular:"Minute per kilometre",plural:"Minutes per kilometre"},to_anchor:.06},"s/m":{name:{singular:"Second per metre",plural:"Seconds per metre"},to_anchor:1}},imperial:{"min/mi":{name:{singular:"Minute per mile",plural:"Minutes per mile"},to_anchor:.0113636},"s/ft":{name:{singular:"Second per foot",plural:"Seconds per foot"},to_anchor:1}},_anchors:{metric:{unit:"s/m",ratio:.3048},imperial:{unit:"s/ft",ratio:1/.3048}}},pressure:{metric:{Pa:{name:{singular:"pascal",plural:"pascals"},to_anchor:.001},kPa:{name:{singular:"kilopascal",plural:"kilopascals"},to_anchor:1},MPa:{name:{singular:"megapascal",plural:"megapascals"},to_anchor:1e3},hPa:{name:{singular:"hectopascal",plural:"hectopascals"},to_anchor:.1},bar:{name:{singular:"bar",plural:"bar"},to_anchor:100},torr:{name:{singular:"torr",plural:"torr"},to_anchor:101325/76e4}},imperial:{psi:{name:{singular:"pound per square inch",plural:"pounds per square inch"},to_anchor:.001},ksi:{name:{singular:"kilopound per square inch",plural:"kilopound per square inch"},to_anchor:1}},_anchors:{metric:{unit:"kPa",ratio:.00014503768078},imperial:{unit:"psi",ratio:6894.76000045014}}},current:{metric:{A:{name:{singular:"Ampere",plural:"Amperes"},to_anchor:1},mA:{name:{singular:"Milliampere",plural:"Milliamperes"},to_anchor:.001},kA:{name:{singular:"Kiloampere",plural:"Kiloamperes"},to_anchor:1e3}},_anchors:{metric:{unit:"A",ratio:1}}},voltage:{metric:{V:{name:{singular:"Volt",plural:"Volts"},to_anchor:1},mV:{name:{singular:"Millivolt",plural:"Millivolts"},to_anchor:.001},kV:{name:{singular:"Kilovolt",plural:"Kilovolts"},to_anchor:1e3}},_anchors:{metric:{unit:"V",ratio:1}}},power:{metric:{W:{name:{singular:"Watt",plural:"Watts"},to_anchor:1},mW:{name:{singular:"Milliwatt",plural:"Milliwatts"},to_anchor:.001},kW:{name:{singular:"Kilowatt",plural:"Kilowatts"},to_anchor:1e3},MW:{name:{singular:"Megawatt",plural:"Megawatts"},to_anchor:1e6},GW:{name:{singular:"Gigawatt",plural:"Gigawatts"},to_anchor:1e9}},_anchors:{metric:{unit:"W",ratio:1}}},reactivePower:{metric:{VAR:{name:{singular:"Volt-Ampere Reactive",plural:"Volt-Amperes Reactive"},to_anchor:1},mVAR:{name:{singular:"Millivolt-Ampere Reactive",plural:"Millivolt-Amperes Reactive"},to_anchor:.001},kVAR:{name:{singular:"Kilovolt-Ampere Reactive",plural:"Kilovolt-Amperes Reactive"},to_anchor:1e3},MVAR:{name:{singular:"Megavolt-Ampere Reactive",plural:"Megavolt-Amperes Reactive"},to_anchor:1e6},GVAR:{name:{singular:"Gigavolt-Ampere Reactive",plural:"Gigavolt-Amperes Reactive"},to_anchor:1e9}},_anchors:{metric:{unit:"VAR",ratio:1}}},apparentPower:{metric:{VA:{name:{singular:"Volt-Ampere",plural:"Volt-Amperes"},to_anchor:1},mVA:{name:{singular:"Millivolt-Ampere",plural:"Millivolt-Amperes"},to_anchor:.001},kVA:{name:{singular:"Kilovolt-Ampere",plural:"Kilovolt-Amperes"},to_anchor:1e3},MVA:{name:{singular:"Megavolt-Ampere",plural:"Megavolt-Amperes"},to_anchor:1e6},GVA:{name:{singular:"Gigavolt-Ampere",plural:"Gigavolt-Amperes"},to_anchor:1e9}},_anchors:{metric:{unit:"VA",ratio:1}}},energy:{metric:{Wh:{name:{singular:"Watt-hour",plural:"Watt-hours"},to_anchor:3600},mWh:{name:{singular:"Milliwatt-hour",plural:"Milliwatt-hours"},to_anchor:3.6},kWh:{name:{singular:"Kilowatt-hour",plural:"Kilowatt-hours"},to_anchor:36e5},MWh:{name:{singular:"Megawatt-hour",plural:"Megawatt-hours"},to_anchor:36e8},GWh:{name:{singular:"Gigawatt-hour",plural:"Gigawatt-hours"},to_anchor:36e11},J:{name:{singular:"Joule",plural:"Joules"},to_anchor:1},kJ:{name:{singular:"Kilojoule",plural:"Kilojoules"},to_anchor:1e3}},_anchors:{metric:{unit:"J",ratio:1}}},reactiveEnergy:{metric:{VARh:{name:{singular:"Volt-Ampere Reactive Hour",plural:"Volt-Amperes Reactive Hour"},to_anchor:1},mVARh:{name:{singular:"Millivolt-Ampere Reactive Hour",plural:"Millivolt-Amperes Reactive Hour"},to_anchor:.001},kVARh:{name:{singular:"Kilovolt-Ampere Reactive Hour",plural:"Kilovolt-Amperes Reactive Hour"},to_anchor:1e3},MVARh:{name:{singular:"Megavolt-Ampere Reactive Hour",plural:"Megavolt-Amperes Reactive Hour"},to_anchor:1e6},GVARh:{name:{singular:"Gigavolt-Ampere Reactive Hour",plural:"Gigavolt-Amperes Reactive Hour"},to_anchor:1e9}},_anchors:{metric:{unit:"VARh",ratio:1}}},volumeFlowRate:{metric:{"mm3/s":{name:{singular:"Cubic Millimeter per second",plural:"Cubic Millimeters per second"},to_anchor:1e-6},"cm3/s":{name:{singular:"Cubic Centimeter per second",plural:"Cubic Centimeters per second"},to_anchor:.001},"ml/s":{name:{singular:"Millilitre per second",plural:"Millilitres per second"},to_anchor:.001},"cl/s":{name:{singular:"Centilitre per second",plural:"Centilitres per second"},to_anchor:.01},"dl/s":{name:{singular:"Decilitre per second",plural:"Decilitres per second"},to_anchor:.1},"l/s":{name:{singular:"Litre per second",plural:"Litres per second"},to_anchor:1},"l/min":{name:{singular:"Litre per minute",plural:"Litres per minute"},to_anchor:1/60},"l/h":{name:{singular:"Litre per hour",plural:"Litres per hour"},to_anchor:1/3600},"kl/s":{name:{singular:"Kilolitre per second",plural:"Kilolitres per second"},to_anchor:1e3},"kl/min":{name:{singular:"Kilolitre per minute",plural:"Kilolitres per minute"},to_anchor:50/3},"kl/h":{name:{singular:"Kilolitre per hour",plural:"Kilolitres per hour"},to_anchor:5/18},"m3/s":{name:{singular:"Cubic meter per second",plural:"Cubic meters per second"},to_anchor:1e3},"m3/min":{name:{singular:"Cubic meter per minute",plural:"Cubic meters per minute"},to_anchor:50/3},"m3/h":{name:{singular:"Cubic meter per hour",plural:"Cubic meters per hour"},to_anchor:5/18},"km3/s":{name:{singular:"Cubic kilometer per second",plural:"Cubic kilometers per second"},to_anchor:1e12}},imperial:{"tsp/s":{name:{singular:"Teaspoon per second",plural:"Teaspoons per second"},to_anchor:1/6},"Tbs/s":{name:{singular:"Tablespoon per second",plural:"Tablespoons per second"},to_anchor:.5},"in3/s":{name:{singular:"Cubic inch per second",plural:"Cubic inches per second"},to_anchor:.55411},"in3/min":{name:{singular:"Cubic inch per minute",plural:"Cubic inches per minute"},to_anchor:.55411/60},"in3/h":{name:{singular:"Cubic inch per hour",plural:"Cubic inches per hour"},to_anchor:.55411/3600},"fl-oz/s":{name:{singular:"Fluid Ounce per second",plural:"Fluid Ounces per second"},to_anchor:1},"fl-oz/min":{name:{singular:"Fluid Ounce per minute",plural:"Fluid Ounces per minute"},to_anchor:1/60},"fl-oz/h":{name:{singular:"Fluid Ounce per hour",plural:"Fluid Ounces per hour"},to_anchor:1/3600},"cup/s":{name:{singular:"Cup per second",plural:"Cups per second"},to_anchor:8},"pnt/s":{name:{singular:"Pint per second",plural:"Pints per second"},to_anchor:16},"pnt/min":{name:{singular:"Pint per minute",plural:"Pints per minute"},to_anchor:4/15},"pnt/h":{name:{singular:"Pint per hour",plural:"Pints per hour"},to_anchor:1/225},"qt/s":{name:{singular:"Quart per second",plural:"Quarts per second"},to_anchor:32},"gal/s":{name:{singular:"Gallon per second",plural:"Gallons per second"},to_anchor:128},"gal/min":{name:{singular:"Gallon per minute",plural:"Gallons per minute"},to_anchor:32/15},"gal/h":{name:{singular:"Gallon per hour",plural:"Gallons per hour"},to_anchor:8/225},"ft3/s":{name:{singular:"Cubic foot per second",plural:"Cubic feet per second"},to_anchor:957.506},"ft3/min":{name:{singular:"Cubic foot per minute",plural:"Cubic feet per minute"},to_anchor:957.506/60},"ft3/h":{name:{singular:"Cubic foot per hour",plural:"Cubic feet per hour"},to_anchor:957.506/3600},"yd3/s":{name:{singular:"Cubic yard per second",plural:"Cubic yards per second"},to_anchor:25852.7},"yd3/min":{name:{singular:"Cubic yard per minute",plural:"Cubic yards per minute"},to_anchor:25852.7/60},"yd3/h":{name:{singular:"Cubic yard per hour",plural:"Cubic yards per hour"},to_anchor:25852.7/3600}},_anchors:{metric:{unit:"l/s",ratio:33.8140227},imperial:{unit:"fl-oz/s",ratio:1/33.8140227}}},illuminance:{metric:{lx:{name:{singular:"Lux",plural:"Lux"},to_anchor:1}},imperial:{"ft-cd":{name:{singular:"Foot-candle",plural:"Foot-candles"},to_anchor:1}},_anchors:{metric:{unit:"lx",ratio:1/10.76391},imperial:{unit:"ft-cd",ratio:10.76391}}},frequency:{metric:{mHz:{name:{singular:"millihertz",plural:"millihertz"},to_anchor:.001},Hz:{name:{singular:"hertz",plural:"hertz"},to_anchor:1},kHz:{name:{singular:"kilohertz",plural:"kilohertz"},to_anchor:1e3},MHz:{name:{singular:"megahertz",plural:"megahertz"},to_anchor:1e6},GHz:{name:{singular:"gigahertz",plural:"gigahertz"},to_anchor:1e9},THz:{name:{singular:"terahertz",plural:"terahertz"},to_anchor:1e12},rpm:{name:{singular:"rotation per minute",plural:"rotations per minute"},to_anchor:1/60},"deg/s":{name:{singular:"degree per second",plural:"degrees per second"},to_anchor:1/360},"rad/s":{name:{singular:"radian per second",plural:"radians per second"},to_anchor:1/(2*Math.PI)}},_anchors:{frequency:{unit:"hz",ratio:1}}},angle:{metric:{rad:{name:{singular:"radian",plural:"radians"},to_anchor:180/Math.PI},deg:{name:{singular:"degree",plural:"degrees"},to_anchor:1},grad:{name:{singular:"gradian",plural:"gradians"},to_anchor:.9},arcmin:{name:{singular:"arcminute",plural:"arcminutes"},to_anchor:1/60},arcsec:{name:{singular:"arcsecond",plural:"arcseconds"},to_anchor:1/3600}},_anchors:{metric:{unit:"deg",ratio:1}}}};(Se=function(e,t){this.val=t?e/t:e}).prototype.from=function(e){if(this.destination)throw new Error(".from must be called before .to");return this.origin=this.getUnit(e),this.origin||this.throwUnsupportedUnitError(e),this},Se.prototype.to=function(e){if(!this.origin)throw new Error(".to must be called after .from");var t,n;if(this.destination=this.getUnit(e),this.destination||this.throwUnsupportedUnitError(e),this.origin.abbr===this.destination.abbr)return this.val;if(this.destination.measure!=this.origin.measure)throw new Error("Cannot convert incompatible measures of "+this.destination.measure+" and "+this.origin.measure);return t=this.val*this.origin.unit.to_anchor,this.origin.unit.anchor_shift&&(t-=this.origin.unit.anchor_shift),this.origin.system!=this.destination.system&&("function"==typeof(n=Ie[this.origin.measure]._anchors[this.origin.system].transform)?t=n(t):t*=Ie[this.origin.measure]._anchors[this.origin.system].ratio),this.destination.unit.anchor_shift&&(t+=this.destination.unit.anchor_shift),t/this.destination.unit.to_anchor},Se.prototype.toBest=function(e){if(!this.origin)throw new Error(".toBest must be called after .from");var t;return e=Object.assign({exclude:[],cutOffNumber:1},e),Me(this.possibilities(),function(n){var r=this.describe(n);if(-1===e.exclude.indexOf(n)&&r.system===this.origin.system){var i=this.to(n);(!t||i>=e.cutOffNumber&&i<t.val)&&(t={val:i,unit:n,singular:r.singular,plural:r.plural})}}.bind(this)),t},Se.prototype.getUnit=function(e){var t;return Me(Ie,function(n,r){if(Me(n,function(n,i){return"_anchors"!=i&&(Me(n,function(n,o){if(o==e)return t={abbr:e,measure:r,system:i,unit:n},!1}),!t&&void 0)}),t)return!1}),t};var ke=function(e){return{abbr:e.abbr,measure:e.measure,system:e.system,singular:e.unit.name.singular,plural:e.unit.name.plural}};Se.prototype.describe=function(e){var t=Se.prototype.getUnit(e),n=null;try{n=ke(t)}catch(t){this.throwUnsupportedUnitError(e)}return n},Se.prototype.list=function(e){var t=[];return Me(Ie,function(n,r){e&&e!==r||Me(n,function(e,n){if("_anchors"==n)return!1;Me(e,function(e,i){t=t.concat(ke({abbr:i,measure:r,system:n,unit:e}))})})}),t},Se.prototype.throwUnsupportedUnitError=function(e){var t=[];throw Me(Ie,function(e){Me(e,function(e,n){if("_anchors"==n)return!1;t=t.concat(se(e))})}),new Error("Unsupported unit "+e+", use one of: "+t.join(", "))},Se.prototype.possibilities=function(e){var t=[];return this.origin||e?Me(Ie[e=e||this.origin.measure],function(e,n){if("_anchors"==n)return!1;t=t.concat(se(e))}):Me(se(Ie),function(e){Me(Ie[e],function(e,n){if("_anchors"==n)return!1;t=t.concat(se(e))})}),t},Se.prototype.measures=function(){return se(Ie)};function Re(e,t,n){var r;if("number"!=typeof t)throw new TypeError("Expected value to be a number");if(!Number.isInteger(n))throw new TypeError("Expected precision to be an integer");var i="round"===e&&t<0;i&&(t=Math.abs(t));var o=(t+"e").split("e"),a=o[0],s=o[1],u=Math[e](a+"e"+(Number(s)+n));return a=(r=(u+"e").split("e"))[0],s=r[1],u=Number(a+"e"+(Number(s)-n)),i&&(u=-u),u}var Oe=Re.bind(null,"round"),Pe=Re.bind(null,"ceil"),De=Re.bind(null,"floor");Oe.up=Pe,Oe.down=De;var Le=function(){function e(e){r(this,e),this.value=1e3,this.from="B",this.to="KB",this.round=!1,this.decimals=2}return e.prototype.render=function(){return Oe((e=this.value,new Se(e)).from(this.from).to(this.to),this.decimals)+" "+this.to;var e},Object.defineProperty(e,"style",{get:function(){return"stellar-unit{display:inline-block}"},enumerable:!0,configurable:!0}),e}();n("stellar_unit",Le);var xe=function(){function n(e){r(this,e),this.trackInView=!0,this.preload="auto",this.autoplay=!1,this.muted=!1,this.playsinline=!1,this.controls=!0,this.duration=0,this.startTime=0,this.pausedTime=0,this.currentTime=0,this.playing=!1,this.timeupdate=u(this,"timeupdate",7),this.played=u(this,"played",7),this.paused=u(this,"paused",7),this.loaded=u(this,"loaded",7)}return n.prototype.componentDidLoad=function(){var e=this;this.video_tag=this.element.querySelector("video"),this.video_tag.onplay=function(){e.playing=!0,e.played.emit(e.eventData)},this.video_tag.onpause=function(){e.playing=!1,e.pausedTime=e.video_tag.currentTime,e.paused.emit(e.eventData)},this.video_tag.onloadedmetadata=function(){e.setDimensions(),e.duration=e.video_tag.duration,e.loaded.emit(e.eventData)},this.trackInView&&this.addIntersectionObserver()},Object.defineProperty(n.prototype,"eventData",{get:function(){return{playing:this.playing,currentTime:this.currentTime,pausedTime:this.pausedTime,startTime:this.startTime,duration:this.duration}},enumerable:!0,configurable:!0}),n.prototype.startInterval=function(){var e=this;this.playing?this.interval=setInterval(function(){e.currentTime=e.video_tag.currentTime,e.timeupdate.emit(e.eventData)},30):clearInterval(this.interval)},n.prototype.setDimensions=function(){this.width=this.width?this.width:this.video_tag.videoWidth,this.height=this.height?this.height:this.video_tag.videoHeight,d.set({"--width":""+this.width,"--height":""+this.height,"--aspect-ratio":this.height/this.width*100+"%"},this.element)},n.prototype.addIntersectionObserver=function(){var e=this;"IntersectionObserver"in window?(this.io=new IntersectionObserver(function(t){t[0].isIntersecting?e.handleInScreen():e.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element.querySelector("video"))):setTimeout(function(){e.handleInScreen()},300)},n.prototype.handleInScreen=function(){this.video_tag.play()},n.prototype.handleOffScreen=function(){this.video_tag.currentTime=0,this.video_tag.pause()},n.prototype.getDuration=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this.video_tag.duration]})})},n.prototype.play=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.video_tag.play(),[2]})})},n.prototype.pause=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.video_tag.pause(),[2]})})},n.prototype.toggle=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.video_tag.paused?this.play():this.pause(),[2]})})},n.prototype.stop=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.skipTo(0),this.video_tag.pause(),[2]})})},n.prototype.skipTo=function(n){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return[4,this.pause()];case 1:return e.sent(),this.video_tag.currentTime=1e3*n,[4,this.play()];case 2:return e.sent(),[2]}})})},n.prototype.render=function(){return i("video",{preload:this.preload,width:this.width,height:this.height,autoplay:this.autoplay,muted:this.muted,playsinline:this.playsinline,poster:this.poster,controls:this.controls},i("slot",null))},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"watchers",{get:function(){return{playing:["startInterval"]}},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return"stellar-video{display:block;width:100%;height:0;position:relative;overflow:hidden;padding-bottom:var(--aspect-ratio)}stellar-video:after,stellar-video video{width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0}stellar-video:after{content:\"\";display:block;pointer-events:none;z-index:2;mix-blend-mode:color}stellar-video[overlay]:after{background:linear-gradient(35deg,var(--theme-complement5),var(--theme-base5) 40%,var(--theme-complement5));mix-blend-mode:color}\@media not all and (min-resolution:.001dpcm){\@media{stellar-video[overlay]:after{mix-blend-mode:hard-light;opacity:.5}}}"},enumerable:!0,configurable:!0}),n}();n("stellar_video",xe);var Ne=function(){function n(e){r(this,e),this.randomId=Math.floor(6*Math.random())+1,this.color="white",this.width=800,this.height=800,this.aspectRatio=100,this.visualization="bars2",this.loaded=!1,this.loading=!1,this.duration=0,this.current=0,this.visible=!1,this.cache=new WeakMap}return n.prototype.componentWillLoad=function(){d.set({"--width":this.width+"px","--height":this.height+"px","--aspectRatio":this.aspectRatio+"%"},this.element)},n.prototype.componentDidLoad=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.interviewLines||(this.interviewLines=W(this.element)),q(this.interviewLines,this.cache,this.time),this.visualizer=this.element.querySelector("web-audio-visualizer"),this.video=this.element.querySelector("stellar-video"),this.addIntersectionObserver(),[2]})})},n.prototype.addIntersectionObserver=function(){var e=this;"IntersectionObserver"in window&&(this.io=new IntersectionObserver(function(t){t[0].isIntersecting?e.handleInScreen():e.handleOffScreen()},{rootMargin:"50%",threshold:[0]}),this.io.observe(this.element))},n.prototype.handleTimeUpdate=function(e){this.current=Math.round(1e3*e.detail.currentTime),this.duration=Math.round(1e3*e.detail.duration),q(this.interviewLines,this.cache,this.time)},Object.defineProperty(n.prototype,"time",{get:function(){return this.current},enumerable:!0,configurable:!0}),n.prototype.handleInScreen=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return[4,m(1e3)];case 1:return e.sent(),this.visible=!0,[4,m(100)];case 2:return e.sent(),this.visualizer=this.element.querySelector("web-audio-visualizer"),this.video=this.element.querySelector("stellar-video"),[2]}})})},n.prototype.attachContext=function(){return e(this,void 0,void 0,function(){var e,n;return t(this,function(t){switch(t.label){case 0:return this.context?[3,3]:(this.context=new AudioContext,e=this.context.createMediaElementSource(this.video.video_tag),this.visualizer||(this.visualizer=this.element.querySelector("web-audio-visualizer")),[4,this.visualizer.connect(this.context)]);case 1:return n=t.sent(),[4,e.connect(n.analyser)];case 2:t.sent(),n.analyser.connect(this.context.destination),t.label=3;case 3:return[2]}})})},n.prototype.handleOffScreen=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.pause(),[2]})})},n.prototype.play=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.video?[4,this.video.play()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.skipTo=function(n){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.video?[4,this.video.skipTo(n)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.pause=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.video?[4,this.video.pause()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.toggle=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return this.video?[4,this.video.toggle()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.handlePlay=function(){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return[4,this.handleInScreen()];case 1:return e.sent(),[4,this.attachContext()];case 2:return e.sent(),this.playing=!0,[2]}})})},n.prototype.handleClick=function(){this.toggle(),this.current===this.duration&&this.skipTo(0)},n.prototype.handleCurrentClick=function(){S.copyPlain(this.current)},n.prototype.render=function(){var e=this;return i("div",{class:"card",onDblClick:function(){e.handleClick()}},!this.visible&&i("div",null,i("skeleton-img",{width:"1050",height:"600",loading:!0})),this.visible&&i("section",null,i("stellar-video",{controls:!1,autoplay:!0,trackInView:!1,onPlayed:function(){e.handlePlay()},onPaused:function(){e.playing=!1},onTimeupdate:function(t){e.handleTimeUpdate(t)}},i("source",{src:this.src})),i("div",{class:"transcript"},i("slot",{name:"transcript"})),this.video&&i("web-audio-visualizer",{for:"interview-"+this.randomId,type:this.visualization,width:"1024",height:"1024",color:this.color,tag:this.video.video_tag}),i("button",{class:this.loading?"loading button":this.playing?"playing button":"button",onClick:function(){e.handleClick()}},i("stellar-asset",{name:this.loading?"sync":this.playing?"pause":"play",class:this.loading?"animation-spin":""})),i("h3",null,i("stellar-unit",{class:"current",value:this.current,from:"ms",to:"s",onClick:function(){e.handleCurrentClick()}})),i("h3",null,i("stellar-unit",{class:"duration",value:this.duration,from:"ms",to:"s"})),i("stellar-progress",{value:this.current,max:this.duration,noease:!0,blurable:!1,slender:!0,editable:!0,onValueChange:function(t){e.skipTo(t.detail.value)}})))},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return"stellar-video-interview{--width:800px;--height:800px;display:block}stellar-video-interview div.card{position:relative;display:block;width:auto;height:auto;margin:auto;overflow:hidden}stellar-video-interview div.card section{height:inherit;display:block;position:relative;padding-top:0!important}stellar-video-interview web-audio-visualizer{position:absolute;top:auto;left:0;right:0;bottom:0;width:100%;height:60%;pointer-events:none;z-index:2}stellar-video-interview web-audio-visualizer[type=circle]{height:100%}stellar-video-interview web-audio-visualizer[type=bars2]{width:80%;left:10%;right:10%}stellar-video-interview stellar-360-image,stellar-video-interview stellar-360-video,stellar-video-interview stellar-image,stellar-video-interview stellar-video{--gradient:radial-gradient(circle at 30% 107%,var(--theme-base5) 0%,var(--theme-base8) 5%,var(--theme-complement8) 45%,var(--theme-complement5) 60%,var(--theme-base5) 90%);position:relative;z-index:1;display:block}stellar-video-interview stellar-progress{position:absolute;top:0;left:0;width:100%;z-index:9;--border-radius:0}stellar-video-interview stellar-progress .progress{border:0}stellar-video-interview h3{color:#fff}stellar-video-interview stellar-unit{position:absolute;bottom:1rem;z-index:2;color:#fff!important;font-weight:700}stellar-video-interview stellar-unit.current{left:1rem}stellar-video-interview stellar-unit.duration{right:1rem}stellar-video-interview .transcript{position:absolute;bottom:0;width:70%;left:15%;z-index:5;pointer-events:none}stellar-video-interview .button{position:absolute;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;width:9rem;height:9rem;top:50%;right:50%;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);border-radius:100%;padding:0;border:0;z-index:3;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;text-align:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;z-index:4;outline:0;cursor:pointer;padding-left:1rem;mix-blend-mode:soft-light}stellar-video-interview .button:focus,stellar-video-interview .button:hover{-webkit-transform:translate(50%,-50%) scale(1.1);transform:translate(50%,-50%) scale(1.1);mix-blend-mode:hard-light}stellar-video-interview .button stellar-asset{font-size:7rem;margin:auto;display:block}stellar-video-interview .button.loading{padding:0}stellar-video-interview .button.playing{width:2.8rem;height:2.8rem;top:2.2rem;right:1.8rem;padding:0;background:transparent;-webkit-transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s;transition:all .35s var(--ease) 0s,background .175s var(--ease) 0s}stellar-video-interview .button.playing stellar-asset{font-size:2.8rem}"},enumerable:!0,configurable:!0}),n}();n("stellar_video_interview",Ne);var Be=function(){function e(e){r(this,e),this.unsubscribe=function(){},this.activeClass="link-active",this.exact=!1,this.strict=!0,this.custom="a",this.match=null}return e.prototype.componentWillLoad=function(){this.computeMatch()},e.prototype.computeMatch=function(){this.location&&(this.match=E(this.location.pathname,{path:this.urlMatch||this.url,exact:this.exact,strict:this.strict}))},e.prototype.handleClick=function(e){var t,n;if(!T(e)&&this.history&&this.url&&this.root)return e.preventDefault(),this.history.push((n=this.root,"/"==(t=this.url).charAt(0)&&"/"==n.charAt(n.length-1)?n.slice(0,n.length-1)+t:n+t))},e.prototype.render=function(){var e,t={class:(e={},e[this.activeClass]=null!==this.match,e),onClick:this.handleClick.bind(this)};return this.anchorClass&&(t.class[this.anchorClass]=!0),"a"===this.custom&&(t=Object.assign({},t,{href:this.url,title:this.anchorTitle,role:this.anchorRole,tabindex:this.anchorTabIndex,"aria-haspopup":this.ariaHaspopup,id:this.anchorId,"aria-posinset":this.ariaPosinset,"aria-setsize":this.ariaSetsize,"aria-label":this.ariaLabel})),i(this.custom,Object.assign({},t),i("slot",null))},Object.defineProperty(e.prototype,"el",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{location:["computeMatch"]}},enumerable:!0,configurable:!0}),e}();n("stencil_route_link",Be),C.injectProps(Be,["history","location","root"]);var Fe=function(e,t,n){this.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var r=this;n.onload=function(){r.context.decodeAudioData(n.response,function(n){n?(r.bufferList[t]=n,++r.loadCount==r.urlList.length&&r.onload(r.bufferList)):alert("error decoding file data: "+e)},function(e){console.error("decodeAudioData error",e)})},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},this.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)},this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0},He=l(function(e){!function(t){function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");n.prototype._singleton=this,this._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}function r(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function i(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}var o=new n;n.prototype.enable=function(e,t){return this.enabled?void 0:this.supported?void navigator.requestMIDIAccess({sysex:t}).then(function(t){function n(){clearTimeout(r),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof e&&e.call(this),i.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}var r,i=[],o=[];this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){i.push(e)};for(var a=t.inputs.values(),s=a.next();s&&!s.done;s=a.next())o.push(s.value.open());for(var u=t.outputs.values(),l=u.next();l&&!l.done;l=u.next())o.push(l.value.open());r=setTimeout(n.bind(this),200),Promise&&Promise.all(o).catch(function(){}).then(n.bind(this))}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):void("function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._resetInterfaceUserHandlers()},n.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(this._midiInterfaceEvents.indexOf(e)>=0))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},n.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(this._midiInterfaceEvents.indexOf(e)>=0))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},n.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(this._midiInterfaceEvents.indexOf(e)>=0)if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(e){var t;return(t="all"===e||void 0===e?["all"]:Array.isArray(e)?e:[e]).indexOf("all")>-1&&(t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),t.map(function(e){return parseInt(e)}).filter(function(e){return e>=1&&16>=e})},n.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},n.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},n.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},n.prototype.getOctave=function(e){return null!=e&&e>=0&&127>=e?Math.floor(Math.floor(e)/12-1)+Math.floor(o.octaveOffset):void 0},n.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},n.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&e>=0&&127>=e?t=Math.round(e):parseInt(e)>=0&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},n.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var n=o._semitones[t[1].toUpperCase()],r=12*(parseInt(t[3])+1-Math.floor(o.octaveOffset))+n;if(t[2].toLowerCase().indexOf("b")>-1?r-=t[2].length:t[2].toLowerCase().indexOf("#")>-1&&(r+=t[2].length),0>r||r>127)throw new RangeError("Invalid note name or note outside valid range.");return r},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),i=n.next();i&&!i.done;i=n.next())if(this._inputs[e]._midiInput===i.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(new r(e))}.bind(this))},n.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(new i(e))}.bind(this))},n.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach(function(e){e(t)})},n.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},r.prototype.on=r.prototype.addListener=function(e,t,n){var r=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach(function(e){if("all"!==e&&!(e>=1&&16>=e))throw new RangeError("The 'channel' parameter is invalid.")}),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==o.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(n);else{if(void 0===o.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(t.indexOf("all")>-1){t=[];for(var i=1;16>=i;i++)t.push(i)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach(function(t){r._userHandlers.channel[e][t]||(r._userHandlers.channel[e][t]=[]),r._userHandlers.channel[e][t].push(n)})}return this},r.prototype.hasListener=function(e,t,n){var r=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==o.MIDI_SYSTEM_MESSAGES[e]){for(var i=0;i<this._userHandlers.system[e].length;i++)if(this._userHandlers.system[e][i]===n)return!0}else if(void 0!==o.MIDI_CHANNEL_MESSAGES[e]){if(t.indexOf("all")>-1){t=[];for(var a=1;16>=a;a++)t.push(a)}return!!this._userHandlers.channel[e]&&t.every(function(t){var i=r._userHandlers.channel[e][t];return i&&i.indexOf(n)>-1})}return!1},r.prototype.removeListener=function(e,t,n){var r=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==o.MIDI_SYSTEM_MESSAGES[e])if(void 0===n)this._userHandlers.system[e]=[];else for(var i=0;i<this._userHandlers.system[e].length;i++)this._userHandlers.system[e][i]===n&&this._userHandlers.system[e].splice(i,1);else if(void 0!==o.MIDI_CHANNEL_MESSAGES[e]){if(t.indexOf("all")>-1){t=[];for(var a=1;16>=a;a++)t.push(a)}if(!this._userHandlers.channel[e])return this;t.forEach(function(t){var i=r._userHandlers.channel[e][t];if(i)if(void 0===n)r._userHandlers.channel[e][t]=[];else for(var o=0;o<i.length;o++)i[o]===n&&i.splice(o,1)})}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},r.prototype._initializeUserHandlers=function(){for(var e in o.MIDI_CHANNEL_MESSAGES)o.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in o.MIDI_SYSTEM_MESSAGES)o.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},r.prototype._onMidiMessage=function(e){if(this._userHandlers.system.midimessage.length>0){var t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(e){e(t)})}e.data[0]<240?this._parseChannelEvent(e):e.data[0]<=255&&this._parseSystemEvent(e)},r.prototype._parseChannelEvent=function(e){var t,n,r=e.data[0]>>4,i=1+(15&e.data[0]);e.data.length>1&&(t=e.data[1],n=e.data.length>2?e.data[2]:void 0);var a={target:this,data:e.data,timestamp:e.timeStamp,channel:i};r===o.MIDI_CHANNEL_MESSAGES.noteoff||r===o.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(a.type="noteoff",a.note={number:t,name:o._notes[t%12],octave:o.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):r===o.MIDI_CHANNEL_MESSAGES.noteon?(a.type="noteon",a.note={number:t,name:o._notes[t%12],octave:o.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):r===o.MIDI_CHANNEL_MESSAGES.keyaftertouch?(a.type="keyaftertouch",a.note={number:t,name:o._notes[t%12],octave:o.getOctave(t)},a.value=n/127):r===o.MIDI_CHANNEL_MESSAGES.controlchange&&t>=0&&119>=t?(a.type="controlchange",a.controller={number:t,name:this.getCcNameByNumber(t)},a.value=n):r===o.MIDI_CHANNEL_MESSAGES.channelmode&&t>=120&&127>=t?(a.type="channelmode",a.controller={number:t,name:this.getChannelModeByNumber(t)},a.value=n):r===o.MIDI_CHANNEL_MESSAGES.programchange?(a.type="programchange",a.value=t):r===o.MIDI_CHANNEL_MESSAGES.channelaftertouch?(a.type="channelaftertouch",a.value=t/127):r===o.MIDI_CHANNEL_MESSAGES.pitchbend?(a.type="pitchbend",a.value=((n<<7)+t-8192)/8192):a.type="unknownchannelmessage",this._userHandlers.channel[a.type]&&this._userHandlers.channel[a.type][i]&&this._userHandlers.channel[a.type][i].forEach(function(e){e(a)})},r.prototype.getCcNameByNumber=function(e){if(!((e=Math.floor(e))>=0&&119>=e))throw new RangeError("The control change number must be between 0 and 119.");for(var t in o.MIDI_CONTROL_CHANGE_MESSAGES)if(o.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===o.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},r.prototype.getChannelModeByNumber=function(e){if(!((e=Math.floor(e))>=120&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in o.MIDI_CHANNEL_MODE_MESSAGES)if(o.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===o.MIDI_CHANNEL_MODE_MESSAGES[t])return t},r.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===o.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===o.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===o.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===o.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):n.type=t===o.MIDI_SYSTEM_MESSAGES.tuningrequest?"tuningrequest":t===o.MIDI_SYSTEM_MESSAGES.clock?"clock":t===o.MIDI_SYSTEM_MESSAGES.start?"start":t===o.MIDI_SYSTEM_MESSAGES.continue?"continue":t===o.MIDI_SYSTEM_MESSAGES.stop?"stop":t===o.MIDI_SYSTEM_MESSAGES.activesensing?"activesensing":t===o.MIDI_SYSTEM_MESSAGES.reset?"reset":"unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach(function(e){e(n)})},i.prototype.send=function(e,t,n){if(!(e>=128&&255>=e))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(e){var t=Math.floor(e);if(!(t>=0&&255>=t))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(t)}),this._midiOutput.send([e].concat(r),parseFloat(n)||0),this},i.prototype.sendSysex=function(e,t,n){if(!o.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach(function(e){if(0>e||e>127)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),t=e.concat(t,o.MIDI_SYSTEM_MESSAGES.sysexend),this.send(o.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},i.prototype.sendTimecodeQuarterFrame=function(e,t){return this.send(o.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter((t=t||{}).time)),this},i.prototype.sendSongPosition=function(e,t){return e=Math.floor(e)||0,this.send(o.MIDI_SYSTEM_MESSAGES.songposition,[e>>7&127,127&e],this._parseTimeParameter((t=t||{}).time)),this},i.prototype.sendSongSelect=function(e,t){if(t=t||{},!((e=Math.floor(e))>=0&&127>=e))throw new RangeError("The song number must be between 0 and 127.");return this.send(o.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},i.prototype.sendTuningRequest=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendClock=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendStart=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendContinue=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendStop=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendActiveSensing=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter((e=e||{}).time)),this},i.prototype.sendReset=function(e){return this.send(o.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter((e=e||{}).time)),this},i.prototype.stopNote=function(e,t,n){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,n);var r=64;return(n=n||{}).rawVelocity?!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=127&&(r=n.velocity):!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=1&&(r=127*n.velocity),this._convertNoteToArray(e).forEach(function(e){o.toMIDIChannels(t).forEach(function(t){this.send(t-1+(o.MIDI_CHANNEL_MESSAGES.noteoff<<4),[e,Math.round(r)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},i.prototype.playNote=function(e,t,n){var r,i=64;if((n=n||{}).rawVelocity?!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=127&&(i=n.velocity):!isNaN(n.velocity)&&n.velocity>=0&&n.velocity<=1&&(i=127*n.velocity),r=this._parseTimeParameter(n.time),this._convertNoteToArray(e).forEach(function(e){o.toMIDIChannels(t).forEach(function(t){this.send(t-1+(o.MIDI_CHANNEL_MESSAGES.noteon<<4),[e,Math.round(i)],r)}.bind(this))}.bind(this)),!isNaN(n.duration)){n.duration<=0&&(n.duration=0);var a=64;n.rawVelocity?!isNaN(n.release)&&n.release>=0&&n.release<=127&&(a=n.release):!isNaN(n.release)&&n.release>=0&&n.release<=1&&(a=127*n.release),this._convertNoteToArray(e).forEach(function(e){o.toMIDIChannels(t).forEach(function(t){this.send(t-1+(o.MIDI_CHANNEL_MESSAGES.noteoff<<4),[e,Math.round(a)],(r||o.time)+n.duration)}.bind(this))}.bind(this))}return this},i.prototype.sendKeyAftertouch=function(e,t,n,r){var i=this;if(r=r||{},1>t||t>16)throw new RangeError("The channel must be between 1 and 16.");(isNaN(n)||0>n||n>1)&&(n=.5);var a=Math.round(127*n);return this._convertNoteToArray(e).forEach(function(e){o.toMIDIChannels(t).forEach(function(t){i.send(t-1+(o.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4),[e,a],i._parseTimeParameter(r.time))})}),this},i.prototype.sendControlChange=function(e,t,n,r){if(r=r||{},"string"==typeof e){if(void 0===(e=o.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!((e=Math.floor(e))>=0&&119>=e))throw new RangeError("Controller numbers must be between 0 and 119.");if(!((t=Math.floor(t)||0)>=0&&127>=t))throw new RangeError("Controller value must be between 0 and 127.");return o.toMIDIChannels(n).forEach(function(n){this.send(n-1+(o.MIDI_CHANNEL_MESSAGES.controlchange<<4),[e,t],this._parseTimeParameter(r.time))}.bind(this)),this},i.prototype._selectRegisteredParameter=function(e,t,n){var r=this;if(e[0]=Math.floor(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(e[1]>=0&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return o.toMIDIChannels(t).forEach(function(){r.sendControlChange(101,e[0],t,{time:n}),r.sendControlChange(100,e[1],t,{time:n})}),this},i.prototype._selectNonRegisteredParameter=function(e,t,n){var r=this;if(e[0]=Math.floor(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(e[1]>=0&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return o.toMIDIChannels(t).forEach(function(){r.sendControlChange(99,e[0],t,{time:n}),r.sendControlChange(98,e[1],t,{time:n})}),this},i.prototype._setCurrentRegisteredParameter=function(e,t,n){var r=this;if((e=[].concat(e))[0]=Math.floor(e[0]),!(e[0]>=0&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return o.toMIDIChannels(t).forEach(function(){r.sendControlChange(6,e[0],t,{time:n})}),e[1]=Math.floor(e[1]),e[1]>=0&&e[1]<=127&&o.toMIDIChannels(t).forEach(function(){r.sendControlChange(38,e[1],t,{time:n})}),this},i.prototype._deselectRegisteredParameter=function(e,t){var n=this;return o.toMIDIChannels(e).forEach(function(){n.sendControlChange(101,127,e,{time:t}),n.sendControlChange(100,127,e,{time:t})}),this},i.prototype.setRegisteredParameter=function(e,t,n,r){var i=this;if(r=r||{},!Array.isArray(e)){if(!o.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=o.MIDI_REGISTERED_PARAMETER[e]}return o.toMIDIChannels(n).forEach(function(){i._selectRegisteredParameter(e,n,r.time),i._setCurrentRegisteredParameter(t,n,r.time),i._deselectRegisteredParameter(n,r.time)}),this},i.prototype.setNonRegisteredParameter=function(e,t,n,r){var i=this;if(r=r||{},!(e[0]>=0&&e[0]<=127&&e[1]>=0&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),o.toMIDIChannels(n).forEach(function(){i._selectNonRegisteredParameter(e,n,r.time),i._setCurrentRegisteredParameter(t,n,r.time),i._deselectRegisteredParameter(n,r.time)}),this},i.prototype.incrementRegisteredParameter=function(e,t,n){var r=this;if(n=n||{},!Array.isArray(e)){if(!o.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=o.MIDI_REGISTERED_PARAMETER[e]}return o.toMIDIChannels(t).forEach(function(){r._selectRegisteredParameter(e,t,n.time),r.sendControlChange(96,0,t,{time:n.time}),r._deselectRegisteredParameter(t,n.time)}),this},i.prototype.decrementRegisteredParameter=function(e,t,n){if(n=n||{},!Array.isArray(e)){if(!o.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=o.MIDI_REGISTERED_PARAMETER[e]}return o.toMIDIChannels(t).forEach(function(){this._selectRegisteredParameter(e,t,n.time),this.sendControlChange(97,0,t,{time:n.time}),this._deselectRegisteredParameter(t,n.time)}.bind(this)),this},i.prototype.setPitchBendRange=function(e,t,n,r){var i=this;if(r=r||{},!((e=Math.floor(e)||0)>=0&&127>=e))throw new RangeError("The semitones value must be between 0 and 127");if(!((t=Math.floor(t)||0)>=0&&127>=t))throw new RangeError("The cents value must be between 0 and 127");return o.toMIDIChannels(n).forEach(function(){i.setRegisteredParameter("pitchbendrange",[e,t],n,{time:r.time})}),this},i.prototype.setModulationRange=function(e,t,n,r){var i=this;if(r=r||{},!((e=Math.floor(e)||0)>=0&&127>=e))throw new RangeError("The semitones value must be between 0 and 127");if(!((t=Math.floor(t)||0)>=0&&127>=t))throw new RangeError("The cents value must be between 0 and 127");return o.toMIDIChannels(n).forEach(function(){i.setRegisteredParameter("modulationrange",[e,t],n,{time:r.time})}),this},i.prototype.setMasterTuning=function(e,t,n){var r=this;if(n=n||{},-65>=(e=parseFloat(e)||0)||e>=64)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var i=Math.floor(e)+64,a=e-Math.floor(e),s=(a=Math.round((a+1)/2*16383))>>7&127,u=127&a;return o.toMIDIChannels(t).forEach(function(){r.setRegisteredParameter("channelcoarsetuning",i,t,{time:n.time}),r.setRegisteredParameter("channelfinetuning",[s,u],t,{time:n.time})}),this},i.prototype.setTuningProgram=function(e,t,n){var r=this;if(n=n||{},!((e=Math.floor(e))>=0&&127>=e))throw new RangeError("The program value must be between 0 and 127");return o.toMIDIChannels(t).forEach(function(){r.setRegisteredParameter("tuningprogram",e,t,{time:n.time})}),this},i.prototype.setTuningBank=function(e,t,n){var r=this;if(n=n||{},!((e=Math.floor(e)||0)>=0&&127>=e))throw new RangeError("The bank value must be between 0 and 127");return o.toMIDIChannels(t).forEach(function(){r.setRegisteredParameter("tuningbank",e,t,{time:n.time})}),this},i.prototype.sendChannelMode=function(e,t,n,r){if(r=r||{},"string"==typeof e){if(!(e=o.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!((e=Math.floor(e))>=120&&127>=e))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if(0>(t=Math.floor(t)||0)||t>127)throw new RangeError("Value must be an integer between 0 and 127.");return o.toMIDIChannels(n).forEach(function(n){this.send(n-1+(o.MIDI_CHANNEL_MESSAGES.channelmode<<4),[e,t],this._parseTimeParameter(r.time))}.bind(this)),this},i.prototype.sendProgramChange=function(e,t,n){var r=this;if(n=n||{},e=Math.floor(e),isNaN(e)||0>e||e>127)throw new RangeError("Program numbers must be between 0 and 127.");return o.toMIDIChannels(t).forEach(function(t){r.send(t-1+(o.MIDI_CHANNEL_MESSAGES.programchange<<4),[e],r._parseTimeParameter(n.time))}),this},i.prototype.sendChannelAftertouch=function(e,t,n){var r=this;n=n||{},e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=.5);var i=Math.round(127*e);return o.toMIDIChannels(t).forEach(function(e){r.send(e-1+(o.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4),[i],r._parseTimeParameter(n.time))}),this},i.prototype.sendPitchBend=function(e,t,n){var r=this;if(n=n||{},isNaN(e)||-1>e||e>1)throw new RangeError("Pitch bend value must be between -1 and 1.");var i=Math.round((e+1)/2*16383),a=i>>7&127,s=127&i;return o.toMIDIChannels(t).forEach(function(e){r.send(e-1+(o.MIDI_CHANNEL_MESSAGES.pitchbend<<4),[s,a],r._parseTimeParameter(n.time))}),this},i.prototype._parseTimeParameter=function(e){var t,n=parseFloat(e);return"string"==typeof e&&"+"===e.substring(0,1)?n&&n>0&&(t=o.time+n):n>o.time&&(t=n),t},i.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach(function(e){t.push(o.guessNoteNumber(e))}),t},e.exports?e.exports=o:t.WebMidi||(t.WebMidi=o)}(h)}),Ge=function(){function n(e){r(this,e),this.name="web_audio",this.prepared=!1,this.midi=!1,this.sources=[],this.keys={}}return n.prototype.source=function(n){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return 0!==this.sources.length?[3,2]:[4,this.connect_the_world()];case 1:e.sent(),e.label=2;case 2:return[2,this.sources[n]]}})})},n.prototype.get_context=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this.context]})})},n.prototype.is_prepared=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this.prepared]})})},n.prototype.componentDidLoad=function(){this.connect_debugger()},n.prototype.connect_the_world=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.connect_context(),this.gain=this.context.createGain(),this.connect_visualizers(),this.connect_sources(),this.connect_midi(),this.prepared=!0,[2,!0]})})},n.prototype.connect_context=function(){this.context=window.webkitAudioContext?new webkitAudioContext:new AudioContext,this.log("Connected to this.context")},n.prototype.connect_sources=function(){this.build_sources()},n.prototype.build_sources=function(){return e(this,void 0,void 0,function(){var e=this;return t(this,function(){return this.log("Building sources"),this._sources=Array.from(this.element.querySelectorAll("web-audio-source")),this.externalFiles=[],this._sources.forEach(function(t,n){e.log("("+n+") Preparing "+t.name),e.sources[t.name]=t,new Fe(e.context,[t.src],function(n){e.cache_sources(n,t)}).load()},this),[2]})})},n.prototype.cache_sources=function(n,r){return e(this,void 0,void 0,function(){var e=this;return t(this,function(t){switch(t.label){case 0:return[4,A(20)];case 1:return t.sent(),n.forEach(function(t){e.log("Caching "+r.name),e.midi&&(e.log("Assigned "+r.name+" to midi key "+r.midikey+", channel "+r.midichannel),null==e.keys[r.midichannel]&&(e.keys[r.midichannel]=[]),e.keys[r.midichannel][r.midikey]=r),e._currentSource=r,e._currentSource.assignBuffer(e,t),e.log("Source "+r.name+" is ready")}),this._currentSource=null,[2]}})})},n.prototype.connect_visualizers=function(){return e(this,void 0,void 0,function(){var n=this;return t(this,function(r){switch(r.label){case 0:return[4,A(20)];case 1:return r.sent(),this.visualizers=Array.from(document.querySelectorAll('web-audio-visualizer[for="'+this.name+'"]')),this.visualizers?(this.log("Attaching visualizers"),[4,_(this.visualizers,function(r,i){return e(n,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return 0!==i?[3,2]:[4,r.connect(this.context,this.context.destination)];case 1:return r=e.sent(),[3,4];case 2:return[4,r.connect(this.context,this.previousVisualizer.analyser)];case 3:r=e.sent(),e.label=4;case 4:return this.previousVisualizer=r,[2]}})})})]):[3,3];case 2:return r.sent(),[3,4];case 3:this.log("No visualizers for "+this.name),r.label=4;case 4:return this.visualizers.length>=1?[4,this.gain.connect(this.previousVisualizer.analyser)]:[3,6];case 5:return r.sent(),[3,8];case 6:return[4,this.gain.connect(this.context.destination)];case 7:r.sent(),r.label=8;case 8:return[2]}})})},n.prototype.connect_debugger=function(){this.debugger=document.querySelector('web-audio-debugger[for="'+this.name+'"]'),this.log("Connected debugger")},n.prototype.log=function(e){this.debugger&&this.debugger.addHistory(e)},n.prototype.connect_midi=function(){var e=this;this.midi&&He.enable(function(t){e.log(t?"Midi couldn't be enabled."+t:"Midi is enabled");var n=He.inputs[0];n&&(n.addListener("noteon","all",function(t){e.log("KEY: Channel: "+t.channel+", Note: "+t.note.number+", Name: "+t.note.name+", Oct: "+t.note.octave),e.keys[t.channel]&&(e.keys[t.channel][t.note.number].gain().value=t.data[2]/175,e.keys[t.channel][t.note.number].play())}),n.addListener("pitchbend","all",function(t){e.log("PITCH: Channel: "+t.channel+", Value: "+t.value)}),n.addListener("controlchange","all",function(t){e.log("CTRL: Channel: "+t.channel+", controller: "+t.controller.number+", Value: "+t.value);var n=new CustomEvent("midi-controller-update",{detail:t});document.dispatchEvent(n)}),e.log("Listeners added for notes, pitch bend, and controllers."))})},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),n}();n("web_audio",Ge);var je=function(){function n(e){r(this,e),this.inert=!1,this.midikey=0,this.midichannel=1,this.status="paused",this.effectsvolume=100,this.effects=[],this.duration=0,this.startTime=0,this.pausedTime=0,this.elapsedTime=0,this.playing=!1,this.timeupdate=u(this,"timeupdate",7)}return n.prototype.getBuffer=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this.buffer]})})},n.prototype.webAudio=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this.webAudioWrapper]})})},n.prototype.gain=function(n){return void 0===n&&(n="wet"),e(this,void 0,void 0,function(){return t(this,function(){return"wet"===n?[2,this.wetGain]:"dry"===n?[2,this.dryGain]:"channel"===n?[2,this.channelGain]:[2]})})},n.prototype.getDuration=function(){return e(this,void 0,void 0,function(){return t(this,function(){return[2,this.duration]})})},n.prototype.currentTime=function(){var e=0;return this.pausedTime?e=this.pausedTime:this.startTime&&(e=this.context.currentTime-this.startTime),e>=this.duration&&(e=this.duration),e},n.prototype.prepare=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.inert||(this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.wetGain?(this.wetGain.gain.value=this.effectsvolume/100,this.dryGain.gain.value=Math.abs((this.effectsvolume-100)/100)):this.dryGain.gain.value=1,this.wetGain&&this.source.connect(this.wetGain),this.source.connect(this.dryGain),this.duration=this.source.buffer.duration),[2]})})},n.prototype.play=function(){return e(this,void 0,void 0,function(){var e=this;return t(this,function(){if(this.inert)throw"Cannot play inert media.";return this.prepare(),this.source.start(0,this.pausedTime),this.startTime=this.context.currentTime-this.pausedTime,this.pausedTime=0,this.playing=!0,this.tick(),M(function(){e.tick()}),[2]})})},n.prototype.skipTo=function(n){return e(this,void 0,void 0,function(){return t(this,function(){return this.stop(),this.pausedTime=n/1e3,this.play(),[2]})})},n.prototype.pause=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.elapsedTime=this.context.currentTime-this.startTime,this.stop(),this.pausedTime=this.elapsedTime,this.playing=!1,[2]})})},n.prototype.toggle=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.playing?this.pause():this.play(),[2]})})},n.prototype.stop=function(){return e(this,void 0,void 0,function(){return t(this,function(){return this.source&&(this.source.disconnect(),this.source.stop()),this.source=null,this.pausedTime=0,this.startTime=0,this.playing=!1,[2]})})},n.prototype.tick=function(){var e=this;this.timeupdate.emit({time:this.currentTime(),duration:this.duration}),this.source&&M(function(){e.tick()})},n.prototype.assignBuffer=function(n,r){return e(this,void 0,void 0,function(){var e,i=this;return t(this,function(t){switch(t.label){case 0:return this.webAudioWrapper=n.element,this.context=n.context,this.buffer=r,this.inert?[3,2]:(this.masterGain=n.gain,this.channelGain=this.context.createGain(),[4,this.prepareEffects()]);case 1:t.sent(),Object.keys(this.effects).length>0&&(this.wetGain=this.context.createGain(),e="",Object.keys(this.effects).reverse().forEach(function(t,n){0===n?i.wetGain.connect(i.effects[t]):i.effects[e].connect(i.effects[t]),e=t}),this.effects[e].connect(this.channelGain)),this.dryGain=this.context.createGain(),this.dryGain.connect(this.channelGain),this.channelGain.connect(this.masterGain),t.label=2;case 2:return[2]}})})},n.prototype.prepareEffects=function(){return e(this,void 0,void 0,function(){var e,n,r;return t(this,function(t){switch(t.label){case 0:if("WEB-AUDIO"===this.element.parentElement.nodeName)return[3,3];e=this.element.parentElement,t.label=1;case 1:return"WEB-AUDIO"===e.nodeName?[3,3]:(n=this.effects,r=e.getAttribute("name"),[4,e.attachEffect(this.context,this.element)]);case 2:return n[r]=t.sent(),e=e.parentElement,[3,1];case 3:return[2]}})})},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),n}();n("web_audio_source",je);var ze=250,We=100,qe=15,Ue=l(function(e){(function(){e.exports=function(e,t,n){var r,i,o,a,s,u;if(e/=255,t/=255,n/=255,i=0,u=0,o=((a=Math.max(e,t,n))+(s=Math.min(e,t,n)))/2,a===s)i=u=0;else{switch(r=a-s,u=o>.5?r/(2-a-s):r/(a+s),a){case e:i=(t-n)/r+(t<n?6:0);break;case t:i=(n-e)/r+2;break;case n:i=(e-t)/r+4}i/=6}return[i=Math.ceil(360*i),u=Math.ceil(100*u)+"%",o=Math.ceil(100*o)+"%"]}}).call(h)}),Xe=function(e){var t=Ue.apply(Ue,function(e){e.charAt&&"#"===e.charAt(0)&&(e=function(e){var t=e.split("");return t.shift(),t.join("")}(e)),3===e.length&&(e=function(e){return e.split("").reduce(function(e,t){return e.concat([t,t])},[]).join("")}(e));var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}(e));return[t[0],parseInt(t[1],10),parseInt(t[2],10)]},Ve=function(){function n(e){var t=this;r(this,e),this.for="web_audio",this.type="wave",this.smoothing=.7,this.size=1024,this.color="white",this.width=1024,this.height=1024,this.clearBackground=function(){t.canvasCTX.clearRect(0,0,t.canvas.width,t.canvas.height),t.canvasCTX.fillStyle="transparent",t.canvasCTX.fillRect(0,0,t.canvas.width,t.canvas.height)}}return n.prototype.componentWillLoad=function(){this._color=["white","black","black-alt"].includes(this.color)?Xe(p[this.color]):Xe(p[this.color][5])},n.prototype.componentDidLoad=function(){this.canvas=this.element.shadowRoot.querySelector("canvas")},n.prototype.connect=function(n,r){return e(this,void 0,void 0,function(){return t(this,function(){return this.context=n,this.analyser=this.context.createAnalyser(),r&&this.analyser.connect(r),this.freqs=new Uint8Array(this.analyser.frequencyBinCount),this.times=new Uint8Array(this.analyser.frequencyBinCount),this.canvasCTX=this.canvas.getContext("2d"),requestAnimationFrame(this.draw.bind(this)),[2,this]})})},n.prototype.draw=function(){this.analyser.smoothingTimeConstant=this.smoothing,this.analyser.fftSize=this.size,this.analyser.getByteFrequencyData(this.freqs),this.analyser.getByteTimeDomainData(this.times);var e=Math.floor(this.freqs.length);this.canvas.width=e||this.width,this.canvas.height=this.height,this.clearBackground(),"wave"===this.type?function(e){for(var t=0;t<e.analyser.frequencyBinCount;t++){var n=e.height-e.height*(e.times[t]/512)*1.25,r=e.width/e.analyser.frequencyBinCount+16;e.canvasCTX.fillStyle="hsl("+e._color[0]+", "+e._color[1]+"%, "+e._color[2]+"%)",e.canvasCTX.fillRect(t*r,n,24,24)}}(this):"bars"===this.type?function(e){for(var t=0;t<e.analyser.frequencyBinCount;t++){var n=e.freqs[t]/256,r=e.height*n*.75,i=e.height-r+25,o=e.width/e.analyser.frequencyBinCount+24;e.canvasCTX.fillStyle="hsl("+e._color[0]+", "+e._color[1]+"%, "+100*n+"%)",e.canvasCTX.fillRect(t*o,i,o,r)}}(this):"bars2"===this.type?function(e){for(var t=e.freqs,n=e.canvas,r=e.canvasCTX,i=t.length-50*~~(t.length/70),o=e.size,a=~~(i/70),s=n.width/70,u=4,l=n.height-8,c=0;c<i;c+=a){var h=t[c]/o*l,d=l/2-h/2;r.beginPath(),r.shadowColor="rgba(0, 0, 0, 0.5)",r.shadowBlur=8,r.shadowOffsetX=0,r.shadowOffsetY=4,r.strokeStyle="hsl("+e._color[0]+", "+e._color[1]+"%, "+e._color[2]+"%)",r.lineWidth=4,r.lineCap="round",r.moveTo(u,d),r.lineTo(u,d+h),r.stroke(),u+=s}}(this):"circle"===this.type&&function(e){var t,n=e.analyser.frequencyBinCount,r=(t=e.freqs).reduce(function(e,t){return e+t})/t.length,i=r<qe?qe:r,o=0,a=e.width/2,s=e.height/2,u=2*We*Math.PI/n;e.canvasCTX.beginPath(),e.canvasCTX.arc(a,s,We,0,2*Math.PI),e.canvasCTX.lineWidth=i,e.canvasCTX.strokeStyle="hsl("+e._color[0]+", "+e._color[1]+"%, "+e._color[2]+"%)",e.canvasCTX.closePath(),e.canvasCTX.stroke(),e.canvasCTX.save(),e.canvasCTX.translate(a,s);for(var l=0;l<e.analyser.frequencyBinCount;l++){var c=e.freqs[l],h=c>ze?ze:c;e.canvasCTX.rotate(o),e.canvasCTX.fillStyle="hsl("+e._color[0]+", "+e._color[1]+"%, "+e._color[2]+"%)",e.canvasCTX.fillRect(We+100,-1*u/2,h,u),o=o/(n+u)%360+1}}(this),requestAnimationFrame(this.draw.bind(this))},n.prototype.getFrequencyValue=function(e){var t=Math.round(e/(this.context.sampleRate/2)*this.freqs.length);return this.freqs[t]},n.prototype.render=function(){return i("canvas",{id:"canvas"})},Object.defineProperty(n.prototype,"element",{get:function(){return a(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:function(){return":host,:host canvas{display:block}:host canvas{width:100%;height:100%}"},enumerable:!0,configurable:!0}),n}();n("web_audio_visualizer",Ve)}}});