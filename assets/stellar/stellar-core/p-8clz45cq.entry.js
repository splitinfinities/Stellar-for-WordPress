import{c as t,h as e,d as s,f as a}from"./p-9ed7c17e.js";import"./p-c16f1b5d.js";import"./p-80aceae1.js";import{g as r,i}from"./p-a45d5d95.js";import"./p-091920a9.js";class o{constructor(s){t(this,s),this.ajax=!1,this.method="get",this.autocomplete="on",this.enctype="multipart/form-data",this.novalidate=!1,this.selectors=["stellar-input","stellar-toggle","stellar-range","stellar-switch","stellar-select"],this.submit=e(this,"submit",7)}handleEnter(t){"enter"===t.key&&this.submit_form()}async register(t){this.selectors=[...this.selectors,...t]}async refresh(){var t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}async state(){var t=new FormData,e=[],s=!0;const a=Array.from(this.element.querySelectorAll(this.selectors.join(",")));return await r(a,async t=>{try{let s=await t.validate();e.push(s)}catch(s){e.push({name:`${t.name}`,value:void 0,valid:!1,errors:[s.message]})}}),e.forEach(e=>{e&&(e.name&&t.append(e.name.toString(),e.value),e.valid||(s=!1))}),{els:a,json:i(e.filter(t=>t&&t.name)),results:e,formData:t,valid:s}}async submit_form(){const t=await this.state();t.valid&&(this.ajax?this.submit.emit(t):this.element.querySelector("form").submit())}render(){return s("form",{action:this.action,method:this.method,"accept-charset":this.acceptCharset,autocomplete:this.autocomplete,enctype:this.enctype,name:this.name,novalidate:this.novalidate,target:this.target,onSubmit:t=>{t.preventDefault(),this.submit_form()}},s("slot",null))}get element(){return a(this)}static get style(){return"stellar-form{display:block}"}}export{o as stellar_form};