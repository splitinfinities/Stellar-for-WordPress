import*as tslib_1 from"../polyfills/tslib.js";import{h}from"../stellar-core.core.js";import"./chunk-7646164d.js";import"./chunk-340b8099.js";import{h as asyncForEach,i as form2js}from"./chunk-43ad3764.js";import"./chunk-5ce278cb.js";var Form=function(){function t(){this.ajax=!1,this.method="get",this.autocomplete="on",this.enctype="multipart/form-data",this.novalidate=!1,this.selectors=["stellar-input","stellar-toggle","stellar-range","stellar-switch","stellar-select"]}return t.prototype.handleEnter=function(t){"enter"===t.key&&this.submit_form()},t.prototype.register=function(t){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(e){return this.selectors=this.selectors.concat(t),[2]})})},t.prototype.refresh=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var t;return tslib_1.__generator(this,function(e){return(t=window.document.createEvent("UIEvents")).initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t),[2]})})},t.prototype.state=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var t,e,r,n,i,o=this;return tslib_1.__generator(this,function(a){switch(a.label){case 0:return t=new FormData,e=[],r=!0,n=Array.from(this.element.querySelectorAll(this.selectors.join(","))),[4,asyncForEach(n,function(t){return tslib_1.__awaiter(o,void 0,void 0,function(){var r,n;return tslib_1.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.validate()];case 1:return r=i.sent(),e.push(r),[3,3];case 2:return n=i.sent(),e.push({name:""+t.name,value:void 0,valid:!1,errors:[n.message]}),[3,3];case 3:return[2]}})})})];case 1:return a.sent(),e.forEach(function(e){e&&(e.name&&t.append(e.name.toString(),e.value),e.valid||(r=!1))}),i=form2js(e.filter(function(t){return t&&t.name})),[2,{els:n,json:i,results:e,formData:t,valid:r}]}})})},t.prototype.submit_form=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var t;return tslib_1.__generator(this,function(e){switch(e.label){case 0:return[4,this.state()];case 1:return(t=e.sent()).valid&&(this.ajax?this.submit.emit(t):this.element.querySelector("form").submit()),[2]}})})},t.prototype.render=function(){var t=this;return h("form",{action:this.action,method:this.method,"accept-charset":this.acceptCharset,autocomplete:this.autocomplete,enctype:this.enctype,name:this.name,novalidate:this.novalidate,target:this.target,onSubmit:function(e){e.preventDefault(),t.submit_form()}},h("slot",null))},Object.defineProperty(t,"is",{get:function(){return"stellar-form"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{acceptCharset:{type:String,attr:"accept-charset"},action:{type:String,attr:"action"},ajax:{type:Boolean,attr:"ajax"},autocomplete:{type:String,attr:"autocomplete"},element:{elementRef:!0},enctype:{type:String,attr:"enctype"},method:{type:String,attr:"method"},name:{type:String,attr:"name"},novalidate:{type:Boolean,attr:"novalidate"},refresh:{method:!0},register:{method:!0},selectors:{state:!0},state:{method:!0},submit_form:{method:!0},target:{type:String,attr:"target"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"submit",method:"submit",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"keydown",method:"handleEnter"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"stellar-form{display:block}"},enumerable:!0,configurable:!0}),t}();export{Form as StellarForm};