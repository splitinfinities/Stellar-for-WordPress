import{a as e}from"./chunk-ee695030.js";const t=function(e,t){const i=e.createBiquadFilter();return i.type=t.method,i.gain.value=1,o(i,t),i},i=function(e,t){const i=e.createDelay(5);return i.delayTime.value=3,o(i,t),i},n=async function(e,t){const i=e.createConvolver();var n=t._use;const o=await n.getBuffer();return o&&(i.buffer=o),i},o=function(e,t){!1!==t.midicontroller?s(e,t):"mouse"===t.responds?u(e,t):e.frequency.value=t.value},r=function(e){var t,i,n;return null==(e=e||window.event).pageX&&null!=e.clientX&&(n=(t=e.target&&e.target.ownerDocument||document).body,e.pageX=e.clientX+((i=t.documentElement)&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),{toTop:e.pageY,toRight:window.innerWidth-e.pageX,toBottom:window.innerHeight-e.pageY,toLeft:e.pageX}},a=function(){if(window.mousePos){var e=new CustomEvent("mouse-update",{detail:window.mousePos});document.dispatchEvent(e)}},s=function(e,t){document.addEventListener("midi-controller-update",i=>{t.midicontroller===i.detail.controller.number&&(e.frequency.value=(i.detail.value+1)/128*3e3)})},u=function(e,t){document.addEventListener("mouse-update",i=>{"x"===t.axis?e.frequency.value=1.5*i.detail.toLeft||1e3:"x-reverse"===t.axis?e.frequency.value=1.5*i.detail.toRight||1e3:"y"===t.axis?e.frequency.value=1.5*i.detail.toTop||1e3:"y-reverse"===t.axis?e.frequency.value=1.5*i.detail.toBottom||1e3:"bi"===t.axis?e.frequency.value=i.detail.toRight+i.detail.toTop||1e3:"bi-reverse"===t.axis&&(e.frequency.value=i.detail.toLeft+i.detail.toRight||1e3)},!1),window.mouseInitialized||(window.mouseInitialized=!0,document.onmousemove=r,setInterval(a,100))};class c{constructor(){this.method="lowshelf",this.value=1,this.responds=null,this.midicontroller=0,this.axis="x"}async attachEffect(o,r){this.context=o,this.source=r;const a=await r.webAudio();return this._use=a.querySelector(`web-audio-source[name=${this.use}]`),e(this.type,`"${this.type}" is not a valid effect - Routing around to masterGain."`)&&("panner"===this.type||"listener"===this.type||("reverb"===this.type?this.effect=await n(this.context,this):"filter"===this.type?this.effect=t(this.context,this):"delay"===this.type&&(this.effect=i(this.context,this)))),this.effect}effects(){return["panner","listener","reverb","delay","compression","distortion","filter"]}static get is(){return"web-audio-effect"}static get encapsulation(){return"shadow"}static get properties(){return{_use:{state:!0},attachEffect:{method:!0},axis:{type:String,attr:"axis"},context:{state:!0},effect:{state:!0},element:{elementRef:!0},method:{type:String,attr:"method"},midicontroller:{type:Number,attr:"midicontroller"},parent:{state:!0},responds:{type:String,attr:"responds"},source:{state:!0},type:{type:String,attr:"type"},use:{type:String,attr:"use"},value:{type:Number,attr:"value"}}}}export{c as WebAudioEffect};