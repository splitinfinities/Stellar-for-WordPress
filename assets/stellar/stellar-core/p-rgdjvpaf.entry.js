import{c as t,e,d as r,f as s}from"./p-9ed7c17e.js";import{a as i}from"./p-a0d31045.js";import"./p-2c7f64d5.js";import{a as o}from"./p-75188364.js";var n=function(t,e,r,s){return new(r||(r=Promise))(function(i,o){function n(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(n,c)}a((s=s.apply(t,e||[])).next())})};function c(t){return"stencil-route"===t.tagName.toLowerCase()}class a{constructor(r){t(this,r),this.group=window.crypto?([1e7].toString()+-1e3.toString()+-4e3.toString()+-8e3.toString()+-1e11.toString()).replace(/[018]/g,function(t){return(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):((1e17*Math.random()).toString().match(/.{4}/g)||[]).join("-"),this.subscribers=[],this.queue=e(this,"queue")}componentWillLoad(){null!=this.location&&this.regenerateSubscribers(this.location)}regenerateSubscribers(t){return n(this,void 0,void 0,function*(){if(null==t)return;let e=-1;if(this.subscribers=Array.prototype.slice.call(this.el.children).filter(c).map((r,s)=>{const o=i(t.pathname,{path:r.url,exact:r.exact,strict:!0});return o&&-1===e&&(e=s),{el:r,match:o}}),-1===e)return;if(this.activeIndex===e)return void(this.subscribers[e].el.match=this.subscribers[e].match);this.activeIndex=e;const r=this.subscribers[this.activeIndex];this.scrollTopOffset&&(r.el.scrollTopOffset=this.scrollTopOffset),r.el.group=this.group,r.el.match=r.match,r.el.componentUpdated=(t=>{this.queue.write(()=>{this.subscribers.forEach((t,e)=>{if(t.el.componentUpdated=void 0,e===this.activeIndex)return t.el.style.display="";this.scrollTopOffset&&(t.el.scrollTopOffset=this.scrollTopOffset),t.el.group=this.group,t.el.match=null,t.el.style.display="none"})}),this.routeViewsUpdated&&this.routeViewsUpdated(Object.assign({scrollTopOffset:this.scrollTopOffset},t))})})}render(){return r("slot",null)}get el(){return s(this)}static get watchers(){return{location:["regenerateSubscribers"]}}}o.injectProps(a,["location","routeViewsUpdated"]);export{a as stencil_route_switch};