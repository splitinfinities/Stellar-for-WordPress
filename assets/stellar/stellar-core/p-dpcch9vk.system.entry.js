var __awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i["throw"](e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,u)}s((i=i.apply(e,t||[])).next())})};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return s([e,t])}}function s(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(o=a[0]&2?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;if(r=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;r=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1];o=a;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(a);break}if(o[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];r=0}finally{i=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-6f2a0351.system.js","./p-0096abe1.system.js"],function(e,t){"use strict";var n,i,r;return{setters:[function(e){n=e.d;i=e.g},function(e){r=e.a}],execute:function(){var t=function(e,t){var n=e.createBiquadFilter();n.type=t.method;n.gain.value=1;u(n,t);return n};var o=function(e,t){var n=e.createDelay(5);n.delayTime.value=3;u(n,t);return n};var a=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,i,r;return __generator(this,function(o){switch(o.label){case 0:n=e.createConvolver();i=t._use;return[4,i.getBuffer()];case 1:r=o.sent();if(r){n.buffer=r}return[2,n]}})})};var u=function(e,t){if(t.midicontroller!==false){c(e,t)}else if(t.responds==="mouse"){f(e,t)}else{e.frequency.value=t.value}};var s=function(e){var t,n,i;e=e||window.event;if(e.pageX==null&&e.clientX!=null){t=e.target&&e.target.ownerDocument||document;n=t.documentElement;i=t.body;e.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0);e.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)}return{toTop:e.pageY,toRight:window.innerWidth-e.pageX,toBottom:window.innerHeight-e.pageY,toLeft:e.pageX}};var l=function(){if(window["mousePos"]){var e=new CustomEvent("mouse-update",{detail:window["mousePos"]});document.dispatchEvent(e)}};var c=function(e,t){document.addEventListener("midi-controller-update",function(n){if(t.midicontroller===n.detail.controller.number){e.frequency.value=(n.detail.value+1)/128*3e3}})};var f=function(e,t){document.addEventListener("mouse-update",function(n){if(t.axis==="x"){e.frequency.value=n.detail.toLeft*1.5||1e3}else if(t.axis==="x-reverse"){e.frequency.value=n.detail.toRight*1.5||1e3}else if(t.axis==="y"){e.frequency.value=n.detail.toTop*1.5||1e3}else if(t.axis==="y-reverse"){e.frequency.value=n.detail.toBottom*1.5||1e3}else if(t.axis==="bi"){e.frequency.value=n.detail.toRight+n.detail.toTop||1e3}else if(t.axis==="bi-reverse"){e.frequency.value=n.detail.toLeft+n.detail.toRight||1e3}},false);(function(){if(!window["mouseInitialized"]){window["mouseInitialized"]=true;document.onmousemove=s;setInterval(l,100)}})()};var d=function(){function e(e){n(this,e);this.method="lowshelf";this.value=1;this.responds=null;this.midicontroller=0;this.axis="x"}e.prototype.attachEffect=function(e,n){return __awaiter(this,void 0,void 0,function(){var i,u;return __generator(this,function(s){switch(s.label){case 0:this.context=e;this.source=n;return[4,n.webAudio()];case 1:i=s.sent();this._use=i.querySelector("web-audio-source[name="+this.use+"]");if(!r(this.type,'"'+this.type+'" is not a valid effect - Routing around to masterGain."'))return[3,6];if(!(this.type==="panner"))return[3,2];return[3,6];case 2:if(!(this.type==="listener"))return[3,3];return[3,6];case 3:if(!(this.type==="reverb"))return[3,5];u=this;return[4,a(this.context,this)];case 4:u.effect=s.sent();return[3,6];case 5:if(this.type==="filter"){this.effect=t(this.context,this)}else if(this.type==="delay"){this.effect=o(this.context,this)}else if(this.type==="compression");else if(this.type==="distortion");s.label=6;case 6:return[2,this.effect]}})})};e.prototype.effects=function(){return["panner","listener","reverb","delay","compression","distortion","filter"]};Object.defineProperty(e.prototype,"element",{get:function(){return i(this)},enumerable:true,configurable:true});return e}();e("web_audio_effect",d)}}});