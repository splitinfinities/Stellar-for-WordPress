function t(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function e(e,n){return t(e,n)?e.substr(n.length):e}function n(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function r(t){return"/"===t.charAt(0)?t:"/"+t}function a(t){return"/"===t.charAt(0)?t.substr(1):t}function s(t){const{pathname:e,search:n,hash:r}=t;let a=e||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:`?${n}`),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:`#${r}`),a}function h(t){return"/"===t.charAt(0)}function c(t){return Math.random().toString(36).substr(2,t)}function u(t,e){for(let n=e,r=n+1,a=t.length;r<a;n+=1,r+=1)t[n]=t[r];t.pop()}function o(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return o(t,e[n])});const n=typeof t;if(n!==typeof e)return!1;if("object"===n){const n=t.valueOf(),r=e.valueOf();if(n!==t||r!==e)return o(n,r);const a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return o(t[n],e[n])})}return!1}function i(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&o(t.state,e.state)}function l(t,e,n,r){let a;"string"==typeof t?void 0!==(a=function(t){let e=t||"/",n="",r="";const a=e.indexOf("#");-1!==a&&(r=e.substr(a),e=e.substr(0,a));const s=e.indexOf("?");return-1!==s&&(n=e.substr(s),e=e.substr(0,s)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r,query:{},key:""}}(t)).state&&(a.state=e):((a=Object.assign({pathname:""},t)).search&&"?"!==a.search.charAt(0)&&(a.search="?"+a.search),a.hash&&"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash),void 0!==e&&void 0===a.state&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}var s;return a.key=n,r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=function(t,e=""){const n=t&&t.split("/")||[];let r=e&&e.split("/")||[];const a=t&&h(t),s=e&&h(e),c=a||s;if(t&&h(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";let o;if(r.length){const t=r[r.length-1];o="."===t||".."===t||""===t}else o=!1;let i=0;for(let t=r.length;t>=0;t--){const e=r[t];"."===e?u(r,t):".."===e?(u(r,t),i++):i&&(u(r,t),i--)}if(!c)for(;i--;i)r.unshift("..");!c||""===r[0]||r[0]&&h(r[0])||r.unshift("");let l=r.join("/");return o&&"/"!==l.substr(-1)&&(l+="/"),l}(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a.query=(s=a.search||"")?(/^[?#]/.test(s)?s.slice(1):s).split("&").reduce((t,e)=>{let[n,r]=e.split("=");return t[n]=r?decodeURIComponent(r.replace(/\+/g," ")):"",t},{}):{},a}export{o as a,n as b,r as c,l as d,c as e,t as f,e as g,s as h,a as i,i as j};